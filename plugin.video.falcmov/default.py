import base64;exec base64.b64decode('IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFNvdXJjZWQgRnJvbSBPbmxpbmUgVGVtcGxhdGVzLCBHdWlkZXMgJiBHaXRodWIKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIExpY2Vuc2U6IEdQTCAoaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2dwbC0zLjAuaHRtbCkKIyBCYXNlZCBvbiBjb2RlIGZyb20gd2hpY2ggTWFueSBBZGRvbnMgVXNlIQojCiMgQXV0aG9yOiAgICBNZXJsaW4KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQppZiA2NCAtIDY0OiBpMTFpSWlpSWlpCmltcG9ydCB1cmxsaWIKaW1wb3J0IHVybGxpYjIKaW1wb3J0IGRhdGV0aW1lCmltcG9ydCBzaHV0aWwKaW1wb3J0IHJlCmltcG9ydCBvcwppbXBvcnQgeGJtY3BsdWdpbgppbXBvcnQgeGJtY2d1aQppbXBvcnQgeGJtY2FkZG9uCmltcG9ydCB4Ym1jdmZzCmltcG9ydCB0cmFjZWJhY2sKaW1wb3J0IGNvb2tpZWxpYgppbXBvcnQgYmFzZTY0CmZyb20gYWRkb24gLiBjb21tb24gLiBuZXQgaW1wb3J0IE5ldApmcm9tIEJlYXV0aWZ1bFNvdXAgaW1wb3J0IEJlYXV0aWZ1bFN0b25lU291cCAsIEJlYXV0aWZ1bFNvdXAgLCBCZWF1dGlmdWxTT0FQCnRyeSA6CiBpbXBvcnQganNvbgpleGNlcHQgOgogaW1wb3J0IHNpbXBsZWpzb24gYXMganNvbgppbXBvcnQgU2ltcGxlRG93bmxvYWRlciBhcyBkb3dubG9hZGVyCmltcG9ydCB0aW1lCmltcG9ydCByZXF1ZXN0cwppZiA2NSAtIDY1OiBPMCAvIGlJaWkxSTExSTFJSTEgJSBPb29vb29vb09PIC0gaTFJSWkKbzBPTzAwID0geGJtY2d1aSAuIERpYWxvZyAoICkKaWYgNzggLSA3ODogaTExaSAuIG9Pb29Pb08wT28wTwppZiAxMCAtIDEwOiBJSWlJMUkxMWkxMQpvb09PMDBvT28gPSB7CiAnQWNjZXB0JyA6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLCovKjtxPTAuOCcKIH0KaWYgOTIgLSA5MjogTzBPIC8gb28wMDAgJSBJaUlpMTFpSUlpMUlpIC8gbzBPT08gLSBpaWlpSWkxMWkgLiBJaTFJCklpaUlJSTExMWlJID0gWyAnYWxsZGVicmlkLmNvbScgLCAnYWxsbXl2aWRlb3MubmV0JyAsICdhbGx2aWQuY2gnICwgJ2F1ZW5naW5lLmNvbScgLCAnYmVzdHN0cmVhbXMubmV0JyAsICdicmlza2ZpbGUuY29tJyAsICdjYXN0YW1wLmNvbScgLCAnY2xpY2tudXBsb2FkLmNvbScgLCAnY2xpY2tudXBsb2FkLm1lJyAsICdjbGlja251cGxvYWQubGluaycgLCAnY2xvdWR5LmVjJyAsICdjbG91ZHppbGxhLnRvJyAsICduZW9kcml2ZS5jbycgLCAnY3J1bmNoeXJvbGwuY29tJyAsICdkYWNsaXBzLmluJyAsICdkYWNsaXBzLmNvbScgLCAnZGFpbHltb3Rpb24uY29tJyAsICdkaXZ4c3RhZ2UuZXUnICwgJ2RpdnhzdGFnZS5uZXQnICwgJ2RpdnhzdGFnZS50bycgLCAnY291bGR0aW1lLnRvJyAsICdlY29zdHJlYW0udHYnICwgJ2V4YXNoYXJlLmNvbScgLCAnZmFjZWJvb2suY29tJyAsICdmYXN0cGxheS5zeCcgLCAnZmlsZWhvb3QuY29tJyAsICdmaWxlbnVrZS5jb20nICwgJ2ZpbGVwdXAubmV0JyAsICdmaWxtc2hvd29ubGluZS5uZXQnICwgJ2ZsYXNoeC50dicgLCAncGx1cy5nb29nbGUuY29tJyAsICdnb29nbGV2aWRlby5jb20nICwgJ3BpY2FzYXdlYi5nb29nbGUuY29tJyAsICdnb29nbGV1c2VyY29udGVudC5jb20nICwgJ2dvb2dsZWRyaXZlLmNvbScgLCAnZ29yaWxsYXZpZC5pbicgLCAnZ29yaWxsYXZpZC5jb20nICwgJ2dvcmlsbGF2aWQuaW4nICwgJ2dyaWZ0aG9zdC5jb20nICwgJ2h1Z2VmaWxlcy5uZXQnICwgJ2lkb3dhdGNoLm5ldCcgLCAnaW5kYXZpZGVvLmh1JyAsICdpc2hhcmVkLmV1JyAsICdqZXRsb2FkLnR2JyAsICdraW5nZmlsZXMubmV0JyAsICdsZXR3YXRjaC51cycgLCAnbGV0d2F0Y2gudG8nICwgJ3ZpZHNoYXJlLnVzJyAsICdtYWlsLnJ1JyAsICdteS5tYWlsLnJ1JyAsICd2aWRlb2FwaS5teS5tYWlsLnJ1JyAsICdhcGkudmlkZW8ubWFpbC5ydScgLCAnbWVnYS1kZWJyaWQuZXUnICwgJ21lZ2FtcDQubmV0JyAsICdtZXJzYWxhYXlpdHRlbi5jb20nICwgJ21vdmRpdnguY29tJyAsICdtb3Zwb2QubmV0JyAsICdtb3Zwb2QuaW4nICwgJ21vdnNoYXJlLm5ldCcgLCAnd2hvbGVjbG91ZC5uZXQnICwgJ21wNGVuZ2luZS5jb20nICwgJ21wNHN0cmVhbS5jb20nICwgJ21wNHVwbG9hZC5jb20nICwgJ215dmlkc3RyZWFtLm5ldCcgLCAnbm9zdmlkZW8uY29tJyAsICdub3Nsb2NrZXIuY29tJyAsICdhdXJvcmF2aWQudG8nICwgJ25vdmFtb3YuY29tJyAsICdub3d2aWRlby5zeCcgLCAnbm93dmlkZW8uZXUnICwgJ25vd3ZpZGVvLmNoJyAsICdub3d2aWRlby5zeCcgLCAnbm93dmlkZW8uY28nICwgJ25vd3ZpZGVvLmxpJyAsICdub3d2aWRlby5lYycgLCAnbm93dmlkZW8uYXQnICwgJ25vd3ZpZGVvLmZvJyAsICdvay5ydScgLCAnb2Rub2tsYXNzbmlraS5ydScgLCAnb3BlbmxvYWQuaW8nICwgJ29wZW5sb2FkLmNvJyAsICdwbGF5NDQubmV0JyAsICdwbGF5ZWQudG8nICwgJ3BsYXloZC52aWRlbycgLCAncGxheWhkLmZvJyAsICdwbGF5dS5uZXQnICwgJ3BsYXl1Lm1lJyAsICdwbGF5d2lyZS5jb20nICwgJ1ByZW1pdW1pemUubWUnICwgJ3ByaW1lc2hhcmUudHYnICwgJ3Byb21wdGZpbGUuY29tJyAsICdwdXJldmlkLmNvbScgLCAncmFwaWR2aWRlby53cycgLCAncmFwaWR2aWRlby5jb20nICwgJ2FwaS5yZWFsLWRlYnJpZC5jb20nICwgJ3ByZW1pdW0ucnBuZXQuYml6JyAsICdydXR1YmUucnUnICwgJ3NoYXJlZDIubWUnICwgJ3NoYXJlZC5zeCcgLCAnc2hhcmVyZXBvLmNvbScgLCAnc2hhcmVzaXguY29tJyAsICdzaW1wbHktZGVicmlkLmNvbScgLCAnc3BlZWRwbGF5Lnh5eicgLCAnc3BlZWRwbGF5LnVzJyAsICdzcGVlZHBsYXkzLnB3JyAsICdzcGVlZHZpZGVvLm5ldCcgLCAnc3RhZ2V2dS5jb20nICwgJ3N0cmVhbWNsb3VkLmV1JyAsICdzdHJlYW1pbi50bycgLCAndGVyYW1peGVyLmNvbScgLCAndGhldmlkZW8ubWUnICwgJ3RoZXZpZGVvcy50dicgLCAndG9sdHNkLWZlbC50aycgLCAndHJvbGx2aWQubmV0JyAsICd0dW5lLnBrJyAsICd0dXNmaWxlcy5uZXQnICwgJ3R3aXRjaC50dicgLCAndXAyc3RyZWFtLmNvbScgLCAndXBsb2FkLmFmJyAsICd1cGxvYWRjLmNvbScgLCAndXBsb2FkYy5jaCcgLCAnemFsYWEuY29tJyAsICd1cGxvYWR4Lm9yZycgLCAndXB0b2JveC5jb20nICwgJ3VwdG9zdHJlYW0uY29tJyAsICd1c2VyZmlsZXMuY29tJyAsICd1c2Vyc2Nsb3VkLmNvbScgLCAndmVlaGQuY29tJyAsICd2ZW9oLmNvbScgLCAndmlkLmFnJyAsICd2aWRidWxsLmNvbScgLCAndmlkY3JhenkubmV0JyAsICd1cGxvYWRjcmF6eS5uZXQnICwgJ3RoZXZpZGVvYmVlLnRvJyAsICd2aWRlb2JveGVyLmNvJyAsICd2aWRnZy50bycgLCAndmlkLmdnJyAsICd2aWRlb2h1dC50bycgLCAndmlkZW9tZWdhLnR2JyAsICd2aWRlb3Jhai50bycgLCAndmlkZW9yZXYuY2MnICwgJ3ZpZGVvc2t5LnRvJyAsICd2aWRlby50dCcgLCAndmlkZW93ZWVkLmVzJyAsICdiaXR2aWQuc3gnICwgJ3ZpZGVvd2VlZC5jb20nICwgJ3ZpZGVvd29vZC50dicgLCAnYnl6b28ub3JnJyAsICdwbGF5cGFuZGEubmV0JyAsICd2aWRlb3pvby5tZScgLCAndmlkZW93aW5nLm1lJyAsICd2aWRlb3dpbmcubWUnICwgJ2Vhc3l2aWRlby5tZScgLCAncGxheTQ0Lm5ldCcgLCAncGxheWJiLm1lJyAsICd2aWRlbzQ0Lm5ldCcgLCAndmlkaW8uc3gnICwgJ3ZpZC5tZScgLCAndmlkc3BvdC5uZXQnICwgJ3ZpZHRvLm1lJyAsICd2aWR1cC5tZScgLCAndmlkdXAub3JnJyAsICd2aWR6aS50dicgLCAndmltZW8uY29tJyAsICd2aXZvLnN4JyAsICd2ay5jb20nICwgJ3ZrcGFzcy5jb20nICwgJ3ZvZGxvY2tlci5jb20nICwgJ3ZzaGFyZS5pbycgLCAndnNoYXJlLmV1JyAsICd3YXRjaGVycy50bycgLCAnd2F0Y2hvbmxpbmUudG8nICwgJ3dhdGNodmlkZW8udXMnICwgJ3dhdGNodmlkZW8yLnVzJyAsICd3YXRjaHZpZGVvMy51cycgLCAnd2F0Y2h2aWRlbzQudXMnICwgJ3dhdGNodmlkZW81LnVzJyAsICd3YXRjaHZpZGVvNi51cycgLCAnd2F0Y2h2aWRlbzcudXMnICwgJ3dhdGNodmlkZW84LnVzJyAsICd3YXRjaHZpZGVvOS51cycgLCAnd2VzaGFyZS5tZScgLCAneHZpZHN0YWdlLmNvbScgLCAneW91bG9sLmJpeicgLCAnc2hpdG1vdmllLmNvbScgLCAneW91cnVwbG9hZC5jb20nICwgJ3lvdXR1YmUuY29tJyAsICd5b3V0dS5iZScgLCAneW91d2F0Y2gub3JnJyAsICdhcGkuemV2ZXJhLmNvbScgLCAnemV0dGFob3N0LnR2JyAsICd6c3RyZWFtLnRvJyBdCmlmIDM0IC0gMzQ6IGlpaTFJMUkgLyBPMDBvT29Pb08wbzBPIC4gTzBvbzBPTzAgKyBPbzBvb08wb28wb08gLiBJMWkxaUkxaSAtIElJCk9vID0gWyAncGx1Z2luLnZpZGVvLmRyYW1hc29ubGluZScgLCAncGx1Z2luLnZpZGVvLmY0bVRlc3RlcicgLCAncGx1Z2luLnZpZGVvLnNoYWhpZG1iY25ldCcgLCAncGx1Z2luLnZpZGVvLlNwb3J0c0RldmlsJyAsICdwbHVnaW4uc3RyZWFtLnZhdWdobmxpdmUudHYnICwgJ3BsdWdpbi52aWRlby5aZW1UVi1zaGFuaScgXQppZiAyNyAtIDI3OiBPbzBvb08wb28wb08gKiBPb29vb29vb09PICsgaWlpMUkxSSAqIElJIC0gaTExaUlpaUlpaSAtIE8wb28wT08wCmNsYXNzIElpaWlJaUkxaUlpSTEgKCB1cmxsaWIyIC4gSFRUUEVycm9yUHJvY2Vzc29yICkgOgogZGVmIGh0dHBfcmVzcG9uc2UgKCBzZWxmICwgcmVxdWVzdCAsIHJlc3BvbnNlICkgOgogIHJldHVybiByZXNwb25zZQogaHR0cHNfcmVzcG9uc2UgPSBodHRwX3Jlc3BvbnNlCiBpZiA4NSAtIDg1OiBPME8KaUlpMUlJaWkxMUkgPSAnYUhSMGNEb3ZMMkZxWW5WcGJHUnpMblZyTDJaaGJHTnZiaTlvYjIxbExuaHRiQT09JyAuIGRlY29kZSAoICdiYXNlNjQnICkKaWYgODQgLSA4NDogaUlpaTFJMTFJMUlJMSAuIE9vMG9vTzBvbzBvTyAvIE9vMG9vTzBvbzBvTyAlIE9vMG9vTzBvbzBvTwppMTEgPSB4Ym1jYWRkb24gLiBBZGRvbiAoICdwbHVnaW4udmlkZW8uZmFsY21vdicgKQpJMTEgPSBpMTEgLiBnZXRBZGRvbkluZm8gKCAndmVyc2lvbicgKQpPbzBvMDAwMG8wbzAgPSB4Ym1jIC4gdHJhbnNsYXRlUGF0aCAoIGkxMSAuIGdldEFkZG9uSW5mbyAoICdwcm9maWxlJyApIC4gZGVjb2RlICggJ3V0Zi04JyApICkKb09vMG9vb28wMG8gPSB4Ym1jIC4gdHJhbnNsYXRlUGF0aCAoIGkxMSAuIGdldEFkZG9uSW5mbyAoICdwYXRoJyApIC4gZGVjb2RlICggJ3V0Zi04JyApICkKb08wbzBvMG9vTzBvTyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBPbzBvMDAwMG8wbzAgLCAnZmF2b3JpdGVzJyApCm9vMG8wTzAwID0gb3MgLiBwYXRoIC4gam9pbiAoIE9vMG8wMDAwbzBvMCAsICdoaXN0b3J5JyApCmlmIDY4IC0gNjg6IElpMUkgLiBvT29vT29PME9vME8gLyBPMG9vME9PMApvT09vbyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBPbzBvMDAwMG8wbzAgLCAnbGlzdF9yZXZpc2lvbicgKQpJMUlpSWlpSUlJID0gb3MgLiBwYXRoIC4gam9pbiAoIG9PbzBvb29vMDBvICwgJ2ljb24ucG5nJyApCmlJMTEgPSBvcyAuIHBhdGggLiBqb2luICggb09vMG9vb28wMG8gLCAnZmFuYXJ0LmpwZycgKQppSUkxMTFpaSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBPbzBvMDAwMG8wbzAgLCAnc291cmNlX2ZpbGUnICkKaTFpSUlpMSA9IE9vMG8wMDAwbzBvMAppZiA1MCAtIDUwOiBpMTFpSWlpSWlpIC0gTzAwb09vT29PMG8wTwpkb3dubG9hZGVyID0gZG93bmxvYWRlciAuIFNpbXBsZURvd25sb2FkZXIgKCApCm9vME9vbzAgPSBpMTEgLiBnZXRTZXR0aW5nICggJ2RlYnVnJyApCmlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG9PMG8wbzBvb08wb08gKSA9PSBUcnVlIDoKIEkxSTExSTFJMUkgPSBvcGVuICggb08wbzBvMG9vTzBvTyApIC4gcmVhZCAoICkKZWxzZSA6IEkxSTExSTFJMUkgPSBbIF0KaWYgb3MgLiBwYXRoIC4gZXhpc3RzICggaUlJMTExaWkgKSA9PSBUcnVlIDoKIE9vb08wT08gPSBvcGVuICggaUlJMTExaWkgKSAuIHJlYWQgKCApCmVsc2UgOiBPb29PME9PID0gWyBdCmlmIDI4IC0gMjg6IGkxMWkKaWYgMjggLSAyODogaUlpaTFJMTFJMUlJMSAtIGkxSUlpCmRlZiBPTyAoIHN0cmluZyApIDoKIGlmIG9vME9vbzAgPT0gJ3RydWUnIDoKICB4Ym1jIC4gbG9nICggIlthZGRvbi5saXZlLnByb2plY3RtXTogJXMiICUgKCBJMTEgLCBzdHJpbmcgKSApCiAgaWYgNTUgLSA1NTogTzBPIC8gbzBPT08gKiBJaTFJCiAgaWYgODYgLSA4NjogaTExaUlpaUlpaSArIE8wMG9Pb09vTzBvME8gKyBJSSAqIGlpaTFJMUkgKyBJaUlpMTFpSUlpMUlpCmRlZiBvT29PICggdXJsICwgaGVhZGVycyA9IE5vbmUgKSA6CiB0cnkgOgogIGhlYWRlcnMgPSB7ICdVc2VyLWFnZW50JyA6ICdNeUFnZW50JyB9CiAgb09vID0gdXJsbGliMiAuIFJlcXVlc3QgKCB1cmwgLCBOb25lICwgaGVhZGVycyApCiAgb09vT29PID0gdXJsbGliMiAuIHVybG9wZW4gKCBvT28gKQogIGlpMUkgPSBvT29Pb08gLiByZWFkICggKQogIG9Pb09vTyAuIGNsb3NlICggKQogIHJldHVybiBpaTFJCiBleGNlcHQgdXJsbGliMiAuIFVSTEVycm9yICwgT29vTzAgOgogIE9PICggJ1VSTDogJyArIHVybCApCiAgaWYgaGFzYXR0ciAoIE9vb08wICwgJ2NvZGUnICkgOgogICBPTyAoICdXZSBmYWlsZWQgd2l0aCBlcnJvciBjb2RlIC0gJXMuJyAlIE9vb08wIC4gY29kZSApCiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihGYWxjb24gTW92aWVzLFdlIGZhaWxlZCB3aXRoIGVycm9yIGNvZGUgLSAiICsgc3RyICggT29vTzAgLiBjb2RlICkgKyAiLDEwMDAwLCIgKyBJMUlpSWlpSUlJICsgIikiICkKICBlbGlmIGhhc2F0dHIgKCBPb29PMCAsICdyZWFzb24nICkgOgogICBPTyAoICdXZSBmYWlsZWQgdG8gcmVhY2ggYSBzZXJ2ZXIuJyApCiAgIE9PICggJ1JlYXNvbjogJXMnICUgT29vTzAgLiByZWFzb24gKQogICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oRmFsY29uIE1vdmllcyxXZSBmYWlsZWQgdG8gcmVhY2ggYSBzZXJ2ZXIuIC0gIiArIHN0ciAoIE9vb08wIC4gcmVhc29uICkgKyAiLDEwMDAwLCIgKyBJMUlpSWlpSUlJICsgIikiICkKICAgaWYgMzUgLSAzNTogSWkxSSAlIEkxaTFpSTFpICUgaTExaUlpaUlpaSAvIE9vb29vb29vT08KICAgaWYgMTMgLSAxMzogaTFJSWkgLSBPMDBvT29Pb08wbzBPICUgaWlpaUlpMTFpIC8gaUlpaTFJMTFJMUlJMSAlIE8wb28wT08wCmRlZiBvbyAoICkgOgogT08gKCAiQ1BJbmRleCIgKQogTzBvME9vICggaUlpMUlJaWkxMUkgLCAnJyApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgNzggLSA3ODogaUlpaTFJMTFJMUlJMSAtIE8wMG9Pb09vTzBvME8gKiBPME8gKyBJaUlpMTFpSUlpMUlpICsgTzBvbzBPTzAgKyBPMG9vME9PMApkZWYgSTExSTExaTFJICggdXJsICkgOgogb09vID0gdXJsbGliMiAuIFJlcXVlc3QgKCB1cmwgKQogb09vIC4gYWRkX2hlYWRlciAoICdVc2VyLUFnZW50JyAsICdNb3ppbGxhLzUuMCAoV2luZG93czsgVTsgV2luZG93cyBOVCA1LjE7IGVuLUdCOyBydjoxLjkuMC4zKSBHZWNrby8yMDA4MDkyNDE3IEZpcmVmb3gvMy4wLjMnICkKIG9Pb09vTyA9ICcnCiBpaTExaTFpSUlJID0gJycKIHRyeSA6CiAgb09vT29PID0gdXJsbGliMiAuIHVybG9wZW4gKCBvT28gKQogIGlpMTFpMWlJSUkgPSBvT29Pb08gLiByZWFkICggKQogIG9Pb09vTyAuIGNsb3NlICggKQogZXhjZXB0IDogcGFzcwogaWYgaWkxMWkxaUlJSSAhPSAnJyA6CiAgcmV0dXJuIGlpMTFpMWlJSUkKIGVsc2UgOgogIGlpMTFpMWlJSUkgPSAnT3BlbmVkJwogIHJldHVybiBpaTExaTFpSUlJCiAgaWYgMyAtIDM6IGkxSUlpIC8gb09vb09vTzBPbzBPICUgaWlpMUkxSSAqIGkxMWlJaWlJaWkgLyBPMCAqIGlpaTFJMUkKZGVmIElJSTFpaTFpSUkgKCApIDoKIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG9PMG8wbzBvb08wb08gKSA9PSBUcnVlIDoKICBvbzBvb29vb08wICggJ0Zhdm9yaXRlcycgLCAndXJsJyAsIDQgLCBvcyAuIHBhdGggLiBqb2luICggb09vMG9vb28wMG8gLCAncmVzb3VyY2VzJyAsICdmYXZvcml0ZS5wbmcnICkgLCBpSTExICwgJycgLCAnJyAsICcnICwgJycgKQogaWYgaTExIC4gZ2V0U2V0dGluZyAoICJicm93c2VfeG1sX2RhdGFiYXNlIiApID09ICJ0cnVlIiA6CiAgb28wb29vb29PMCAoICdYTUwgRGF0YWJhc2UnICwgJ2h0dHA6Ly94Ym1jcGx1cy54Yi5mdW5waWMuZGUvd3d3LWRhdGEvZmlsZXN5c3RlbS8nICwgMTUgLCBJMUlpSWlpSUlJICwgaUkxMSAsICcnICwgJycgLCAnJyAsICcnICkKIGlmIGkxMSAuIGdldFNldHRpbmcgKCAiYnJvd3NlX2NvbW11bml0eSIgKSA9PSAidHJ1ZSIgOgogIG9vMG9vb29vTzAgKCAnQ29tbXVuaXR5IEZpbGVzJyAsICdjb21tdW5pdHlfZmlsZXMnICwgMTYgLCBJMUlpSWlpSUlJICwgaUkxMSAsICcnICwgJycgLCAnJyAsICcnICkKIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG9vMG8wTzAwICkgPT0gVHJ1ZSA6CiAgb28wb29vb29PMCAoICdTZWFyY2ggSGlzdG9yeScgLCAnaGlzdG9yeScgLCAyNSAsIG9zIC4gcGF0aCAuIGpvaW4gKCBvT28wb29vbzAwbyAsICdyZXNvdXJjZXMnICwgJ2Zhdm9yaXRlLnBuZycgKSAsIGlJMTEgLCAnJyAsICcnICwgJycgLCAnJyApCiBpZiBpMTEgLiBnZXRTZXR0aW5nICggInNlYXJjaHl0IiApID09ICJ0cnVlIiA6CiAgb28wb29vb29PMCAoICdTZWFyY2g6WW91dHViZScgLCAneW91dHViZScgLCAyNSAsIEkxSWlJaWlJSUkgLCBpSTExICwgJycgLCAnJyAsICcnICwgJycgKQogaWYgaTExIC4gZ2V0U2V0dGluZyAoICJzZWFyY2hETSIgKSA9PSAidHJ1ZSIgOgogIG9vMG9vb29vTzAgKCAnU2VhcmNoOmRhaWx5bW90aW9uJyAsICdkbW90aW9uJyAsIDI1ICwgSTFJaUlpaUlJSSAsIGlJMTEgLCAnJyAsICcnICwgJycgLCAnJyApCiBpZiBpMTEgLiBnZXRTZXR0aW5nICggIlB1bHNhck0iICkgPT0gInRydWUiIDoKICBvbzBvb29vb08wICggJ1B1bHNhcjpJTURCJyAsICdJTURCaWRwbGF5JyAsIDI3ICwgSTFJaUlpaUlJSSAsIGlJMTEgLCAnJyAsICcnICwgJycgLCAnJyApCiBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBpSUkxMTFpaSApID09IFRydWUgOgogIGkxMUlpaWkgPSBqc29uIC4gbG9hZHMgKCBvcGVuICggaUlJMTExaWkgLCAiciIgKSAuIHJlYWQgKCApICkKICBpZiAyMyAtIDIzOiBJaUlpMTFpSUlpMUlpIC4gaTExaQogIGlmIGxlbiAoIGkxMUlpaWkgKSA+IDEgOgogICBmb3IgT28wTzBPT09vbyBpbiBpMTFJaWlpIDoKICAgIGlmIDk1IC0gOTU6IE8wTyAlIGlpaWlJaTExaSAuIE8wCiAgICBpZiBpc2luc3RhbmNlICggT28wTzBPT09vbyAsIGxpc3QgKSA6CiAgICAgb28wb29vb29PMCAoIE9vME8wT09Pb28gWyAwIF0gLiBlbmNvZGUgKCAndXRmLTgnICkgLCBPbzBPME9PT29vIFsgMSBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMSAsIEkxSWlJaWlJSUkgLCBpSTExICwgJycgLCAnJyAsICcnICwgJycgLCAnc291cmNlJyApCiAgICBlbHNlIDoKICAgICBJMWkxSSA9IEkxSWlJaWlJSUkKICAgICBvT08wMG9PTyA9IGlJMTEKICAgICBPb09vID0gJycKICAgICBpSSA9ICcnCiAgICAgY3JlZGl0cyA9ICcnCiAgICAgbzAwTyA9ICcnCiAgICAgaWYgT28wTzBPT09vbyAuIGhhc19rZXkgKCAndGh1bWJuYWlsJyApIDoKICAgICAgSTFpMUkgPSBPbzBPME9PT29vIFsgJ3RodW1ibmFpbCcgXQogICAgIGlmIE9vME8wT09Pb28gLiBoYXNfa2V5ICggJ2ZhbmFydCcgKSA6CiAgICAgIG9PTzAwb09PID0gT28wTzBPT09vbyBbICdmYW5hcnQnIF0KICAgICBpZiBPbzBPME9PT29vIC4gaGFzX2tleSAoICdkZXNjcmlwdGlvbicgKSA6CiAgICAgIE9vT28gPSBPbzBPME9PT29vIFsgJ2Rlc2NyaXB0aW9uJyBdCiAgICAgaWYgT28wTzBPT09vbyAuIGhhc19rZXkgKCAnZGF0ZScgKSA6CiAgICAgIGlJID0gT28wTzBPT09vbyBbICdkYXRlJyBdCiAgICAgaWYgT28wTzBPT09vbyAuIGhhc19rZXkgKCAnZ2VucmUnICkgOgogICAgICBvMDBPID0gT28wTzBPT09vbyBbICdnZW5yZScgXQogICAgIGlmIE9vME8wT09Pb28gLiBoYXNfa2V5ICggJ2NyZWRpdHMnICkgOgogICAgICBjcmVkaXRzID0gT28wTzBPT09vbyBbICdjcmVkaXRzJyBdCiAgICAgb28wb29vb29PMCAoIE9vME8wT09Pb28gWyAndGl0bGUnIF0gLiBlbmNvZGUgKCAndXRmLTgnICkgLCBPbzBPME9PT29vIFsgJ3VybCcgXSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIDEgLCBJMWkxSSAsIG9PTzAwb09PICwgT29PbyAsIG8wME8gLCBpSSAsIGNyZWRpdHMgLCAnc291cmNlJyApCiAgICAgaWYgNjkgLSA2OTogaWlpaUlpMTFpICUgSTFpMWlJMWkgLSBJaUlpMTFpSUlpMUlpICsgSTFpMWlJMWkgLSBPMCAlIE9vb29vb29vT08KICBlbHNlIDoKICAgaWYgbGVuICggaTExSWlpaSApID09IDEgOgogICAgaWYgaXNpbnN0YW5jZSAoIGkxMUlpaWkgWyAwIF0gLCBsaXN0ICkgOgogICAgIE8wbzBPbyAoIGkxMUlpaWkgWyAwIF0gWyAxIF0gLiBlbmNvZGUgKCAndXRmLTgnICkgLCBpSTExICkKICAgIGVsc2UgOgogICAgIE8wbzBPbyAoIGkxMUlpaWkgWyAwIF0gWyAndXJsJyBdICwgaTExSWlpaSBbIDAgXSBbICdmYW5hcnQnIF0gKQogICAgIGlmIDMxIC0gMzE6IGkxMWkgLSBJaTFJIC4gSTFpMWlJMWkgJSBvbzAwMCAtIE8wCiAgICAgaWYgNCAtIDQ6IGkxMWkgLyBJSSAuIE8wb28wT08wCmRlZiBPMG9vME9PMG9PT09vICggdXJsID0gTm9uZSApIDoKIGlmIHVybCBpcyBOb25lIDoKICBpZiBub3QgaTExIC4gZ2V0U2V0dGluZyAoICJuZXdfZmlsZV9zb3VyY2UiICkgPT0gIiIgOgogICBpMWkxaTExSUlpID0gaTExIC4gZ2V0U2V0dGluZyAoICduZXdfZmlsZV9zb3VyY2UnICkgLiBkZWNvZGUgKCAndXRmLTgnICkKICBlbGlmIG5vdCBpMTEgLiBnZXRTZXR0aW5nICggIm5ld191cmxfc291cmNlIiApID09ICIiIDoKICAgaTFpMWkxMUlJaSA9IGkxMSAuIGdldFNldHRpbmcgKCAnbmV3X3VybF9zb3VyY2UnICkgLiBkZWNvZGUgKCAndXRmLTgnICkKIGVsc2UgOgogIGkxaTFpMTFJSWkgPSB1cmwKIGlmIGkxaTFpMTFJSWkgPT0gJycgb3IgaTFpMWkxMUlJaSBpcyBOb25lIDoKICByZXR1cm4KIE9PICggJ0FkZGluZyBOZXcgU291cmNlOiAnICsgaTFpMWkxMUlJaSAuIGVuY29kZSAoICd1dGYtOCcgKSApCiBpZiAzMyAtIDMzOiBJaUlpMTFpSUlpMUlpICsgSWkxSSAqIE8wTyAtIElJaUkxSTExaTExIC8gaWlpaUlpMTFpICUgTzAwb09vT29PMG8wTwogSUkxaTFJaWlJSWkxMSA9IE5vbmUKIGlmIDQ3IC0gNDc6IE8wb28wT08wCiBpaTFJID0gSWkxMWlJSTEgKCBpMWkxaTExSUlpICkKIHByaW50ICdzb3VyY2VfdXJsJyAsIGkxaTFpMTFJSWkKIGlmIGlzaW5zdGFuY2UgKCBpaTFJICwgQmVhdXRpZnVsU09BUCApIDoKICBpZiBpaTFJIC4gZmluZCAoICdjaGFubmVsc19pbmZvJyApIDoKICAgSUkxaTFJaWlJSWkxMSA9IGlpMUkgLiBjaGFubmVsc19pbmZvCiAgZWxpZiBpaTFJIC4gZmluZCAoICdpdGVtc19pbmZvJyApIDoKICAgSUkxaTFJaWlJSWkxMSA9IGlpMUkgLiBpdGVtc19pbmZvCiBpZiBJSTFpMUlpaUlJaTExIDoKICBPbzBPME8wb29PME8gPSB7IH0KICBPbzBPME8wb29PME8gWyAndXJsJyBdID0gaTFpMWkxMUlJaQogIHRyeSA6IE9vME8wTzBvb08wTyBbICd0aXRsZScgXSA9IElJMWkxSWlpSUlpMTEgLiB0aXRsZSAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICB0cnkgOiBPbzBPME8wb29PME8gWyAndGh1bWJuYWlsJyBdID0gSUkxaTFJaWlJSWkxMSAuIHRodW1ibmFpbCAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICB0cnkgOiBPbzBPME8wb29PME8gWyAnZmFuYXJ0JyBdID0gSUkxaTFJaWlJSWkxMSAuIGZhbmFydCAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICB0cnkgOiBPbzBPME8wb29PME8gWyAnZ2VucmUnIF0gPSBJSTFpMUlpaUlJaTExIC4gZ2VucmUgLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiAgdHJ5IDogT28wTzBPMG9vTzBPIFsgJ2Rlc2NyaXB0aW9uJyBdID0gSUkxaTFJaWlJSWkxMSAuIGRlc2NyaXB0aW9uIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIHRyeSA6IE9vME8wTzBvb08wTyBbICdkYXRlJyBdID0gSUkxaTFJaWlJSWkxMSAuIGRhdGUgLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiAgdHJ5IDogT28wTzBPMG9vTzBPIFsgJ2NyZWRpdHMnIF0gPSBJSTFpMUlpaUlJaTExIC4gY3JlZGl0cyAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKIGVsc2UgOgogIGlmICcvJyBpbiBpMWkxaTExSUlpIDoKICAgSUlJSWlpID0gaTFpMWkxMUlJaSAuIHNwbGl0ICggJy8nICkgWyAtIDEgXSAuIHNwbGl0ICggJy4nICkgWyAwIF0KICBpZiAnXFwnIGluIGkxaTFpMTFJSWkgOgogICBJSUlJaWkgPSBpMWkxaTExSUlpIC4gc3BsaXQgKCAnXFwnICkgWyAtIDEgXSAuIHNwbGl0ICggJy4nICkgWyAwIF0KICBpZiAnJScgaW4gSUlJSWlpIDoKICAgSUlJSWlpID0gdXJsbGliIC4gdW5xdW90ZV9wbHVzICggSUlJSWlpICkKICBPMG8wID0geGJtYyAuIEtleWJvYXJkICggSUlJSWlpICwgJ0Rpc3BsYXllZCBOYW1lLCBSZW5hbWU/JyApCiAgTzBvMCAuIGRvTW9kYWwgKCApCiAgaWYgKCBPMG8wIC4gaXNDb25maXJtZWQgKCApID09IEZhbHNlICkgOgogICByZXR1cm4KICBPTzAwT28gPSBPMG8wIC4gZ2V0VGV4dCAoICkKICBpZiBsZW4gKCBPTzAwT28gKSA9PSAwIDoKICAgcmV0dXJuCiAgT28wTzBPMG9vTzBPID0geyB9CiAgT28wTzBPMG9vTzBPIFsgJ3RpdGxlJyBdID0gT08wME9vCiAgT28wTzBPMG9vTzBPIFsgJ3VybCcgXSA9IGkxaTFpMTFJSWkKICBPbzBPME8wb29PME8gWyAnZmFuYXJ0JyBdID0gb09PMDBvT08KICBpZiA1MSAtIDUxOiBPbzBvb08wb28wb08gKiBJaUlpMTFpSUlpMUlpICsgaWlpMUkxSSArIE8wTwogaWYgb3MgLiBwYXRoIC4gZXhpc3RzICggaUlJMTExaWkgKSA9PSBGYWxzZSA6CiAgbzBPME8wMCA9IFsgXQogIG8wTzBPMDAgLiBhcHBlbmQgKCBPbzBPME8wb29PME8gKQogIG8wMDBvID0gb3BlbiAoIGlJSTExMWlpICwgInciICkKICBvMDAwbyAuIHdyaXRlICgganNvbiAuIGR1bXBzICggbzBPME8wMCApICkKICBvMDAwbyAuIGNsb3NlICggKQogZWxzZSA6CiAgaTExSWlpaSA9IGpzb24gLiBsb2FkcyAoIG9wZW4gKCBpSUkxMTFpaSAsICJyIiApIC4gcmVhZCAoICkgKQogIGkxMUlpaWkgLiBhcHBlbmQgKCBPbzBPME8wb29PME8gKQogIG8wMDBvID0gb3BlbiAoIGlJSTExMWlpICwgInciICkKICBvMDAwbyAuIHdyaXRlICgganNvbiAuIGR1bXBzICggaTExSWlpaSApICkKICBvMDAwbyAuIGNsb3NlICggKQogaTExIC4gc2V0U2V0dGluZyAoICduZXdfdXJsX3NvdXJjZScgLCAiIiApCiBpMTEgLiBzZXRTZXR0aW5nICggJ25ld19maWxlX3NvdXJjZScgLCAiIiApCiB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oRmFsY29uIE1vdmllcyxOZXcgc291cmNlIGFkZGVkLiw1MDAwLCIgKyBJMUlpSWlpSUlJICsgIikiICkKIGlmIG5vdCB1cmwgaXMgTm9uZSA6CiAgaWYgJ3hibWNwbHVzLnhiLmZ1bnBpYy5kZScgaW4gdXJsIDoKICAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuQ29udGFpbmVyLlVwZGF0ZSglcz9tb2RlPTE0LHJlcGxhY2UpIiAlIHN5cyAuIGFyZ3YgWyAwIF0gKQogIGVsaWYgJ2NvbW11bml0eS1saW5rcycgaW4gdXJsIDoKICAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuQ29udGFpbmVyLlVwZGF0ZSglcz9tb2RlPTEwLHJlcGxhY2UpIiAlIHN5cyAuIGFyZ3YgWyAwIF0gKQogZWxzZSA6IGkxMSAuIG9wZW5TZXR0aW5ncyAoICkKIGlmIDcgLSA3OiBJSSAqIE8wTyAlIGlpaWlJaTExaSAuIE9vMG9vTzBvbzBvTwpkZWYgSWkxaUlpSUkxaWkxICggdXJsICkgOgogb29Pb29vMDAwb09PID0geGJtY2d1aSAuIERpYWxvZyAoICkKIE9vMG9PT28gPSBvb09vb28wMDBvT08gLiBpbnB1dCAoICdTZWFyY2gnICwgdHlwZSA9IHhibWNndWkgLiBJTlBVVF9BTFBIQU5VTSApCiBPbzBPb08wMG9PTzBvID0gT28wb09PbyAuIGxvd2VyICggKQogaWYgT28wT29PMDBvT08wbyA9PSAnJyA6CiAgcGFzcwogZWxzZSA6CiAgT09PMDBPICggT28wT29PMDBvT08wbyAsIHVybCApCiAgaWYgODQgLSA4NDogaWlpaUlpMTFpICogTzBPIC8gaWlpMUkxSSAtIE8wCmRlZiBPT08wME8gKCBTZWFyY2hfbmFtZSAsIHVybCApIDoKIElpSTEgPSBJMTFJMTFpMUkgKCB1cmwgKQogaWYgSWlJMSAhPSAnRmFpbGVkJyA6CiAgT28wTzAwT28wbzAgPSByZSAuIGNvbXBpbGUgKCAnPGNoYW5uZWw+Lis/PG5hbWU+KC4rPyk8L25hbWU+Lis/PHRodW1ibmFpbD4oLis/KTwvdGh1bWJuYWlsPi4rPzxleHRlcm5hbGxpbms+KC4rPyk8L2V4dGVybmFsbGluaz4uKz88ZmFuYXJ0PiguKz8pPC9mYW5hcnQ+Lis/PC9jaGFubmVsPicgLCByZSAuIERPVEFMTCApIC4gZmluZGFsbCAoIElpSTEgKQogIGZvciBPMDBPMG9PTzAwTzAwICwgaTEgLCB1cmwgLCBvT08wMG9PTyBpbiBPbzBPMDBPbzBvMCA6CiAgIGlmIG5vdCAnaHR0cDonIGluIHVybCA6CiAgICBwYXNzCiAgIGVsc2UgOgogICAgT09PMDBPICggU2VhcmNoX25hbWUgLCB1cmwgKQogIE9vMDAgPSByZSAuIGNvbXBpbGUgKCAnPHRpdGxlPiguKz8pPC90aXRsZT4uKz88bGluaz4oLis/KTwvbGluaz4uKz88dGh1bWJuYWlsPiguKz8pPC90aHVtYm5haWw+Lis/PGZhbmFydD4oLis/KTwvZmFuYXJ0PicgLCByZSAuIERPVEFMTCApIC4gZmluZGFsbCAoIElpSTEgKQogIGZvciBPMDBPMG9PTzAwTzAwICwgdXJsICwgaTEgLCBvT08wMG9PTyBpbiBPbzAwIDoKICAgaWYgJ2h0dHA6JyBpbiB1cmwgOgogICAgaWYgU2VhcmNoX25hbWUgLiBsb3dlciAoICkgaW4gTzAwTzBvT08wME8wMCAuIGxvd2VyICggKSA6CiAgICAgaTFpICggdXJsICwgTzAwTzBvT08wME8wMCAsIGkxICwgb09PMDBvT08gLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCAnJyAsIDEgKQogICAgIGlmIDUwIC0gNTA6IE9vMG9vTzBvbzBvTwogICAgIGlmIDE0IC0gMTQ6IGlpaTFJMUkgJSBPME8gKiBpaWkxSTFJCmRlZiBpSUkgKCBuYW1lICkgOgogaTExSWlpaSA9IGpzb24gLiBsb2FkcyAoIG9wZW4gKCBpSUkxMTFpaSAsICJyIiApIC4gcmVhZCAoICkgKQogZm9yIG9PMDBvMCBpbiByYW5nZSAoIGxlbiAoIGkxMUlpaWkgKSApIDoKICBpZiBpc2luc3RhbmNlICggaTExSWlpaSBbIG9PMDBvMCBdICwgbGlzdCApIDoKICAgaWYgaTExSWlpaSBbIG9PMDBvMCBdIFsgMCBdID09IG5hbWUgOgogICAgZGVsIGkxMUlpaWkgWyBvTzAwbzAgXQogICAgbzAwMG8gPSBvcGVuICggaUlJMTExaWkgLCAidyIgKQogICAgbzAwMG8gLiB3cml0ZSAoIGpzb24gLiBkdW1wcyAoIGkxMUlpaWkgKSApCiAgICBvMDAwbyAuIGNsb3NlICggKQogICAgYnJlYWsKICBlbHNlIDoKICAgaWYgaTExSWlpaSBbIG9PMDBvMCBdIFsgJ3RpdGxlJyBdID09IG5hbWUgOgogICAgZGVsIGkxMUlpaWkgWyBvTzAwbzAgXQogICAgbzAwMG8gPSBvcGVuICggaUlJMTExaWkgLCAidyIgKQogICAgbzAwMG8gLiB3cml0ZSAoIGpzb24gLiBkdW1wcyAoIGkxMUlpaWkgKSApCiAgICBvMDAwbyAuIGNsb3NlICggKQogICAgYnJlYWsKIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLkNvbnRhaW5lci5SZWZyZXNoIiApCiBpZiA1NSAtIDU1OiBJSWlJMUkxMWkxMSArIGlJaWkxSTExSTFJSTEgLyBvbzAwMCAqIGlpaWlJaTExaSAtIGkxMWlJaWlJaWkgLSBPMDBvT29Pb08wbzBPCiBpZiAyNSAtIDI1OiBvME9PTwogaWYgNyAtIDc6IGkxSUlpIC8gb09vb09vTzBPbzBPICogSTFpMWlJMWkgLiBPbzBvb08wb28wb08gLiBpSWlpMUkxMUkxSUkxCmRlZiBpSWlpICggdXJsICwgYnJvd3NlID0gRmFsc2UgKSA6CiBpZiB1cmwgaXMgTm9uZSA6CiAgdXJsID0gJ2h0dHA6Ly94Ym1jcGx1cy54Yi5mdW5waWMuZGUvd3d3LWRhdGEvZmlsZXN5c3RlbS8nCiBvb28wTyA9IEJlYXV0aWZ1bFNvdXAgKCBvT29PICggdXJsICkgLCBjb252ZXJ0RW50aXRpZXMgPSBCZWF1dGlmdWxTb3VwIC4gSFRNTF9FTlRJVElFUyApCiBmb3IgT28wTzBPT09vbyBpbiBvb28wTyAoICdhJyApIDoKICBvT29PMG8wME9PMCA9IE9vME8wT09Pb28gWyAnaHJlZicgXQogIGlmIG5vdCBvT29PMG8wME9PMCAuIHN0YXJ0c3dpdGggKCAnPycgKSA6CiAgIE8wME8wb09PMDBPMDAgPSBPbzBPME9PT29vIC4gc3RyaW5nCiAgIGlmIE8wME8wb09PMDBPMDAgbm90IGluIFsgJ1BhcmVudCBEaXJlY3RvcnknICwgJ3JlY3ljbGVfYmluLycgXSA6CiAgICBpZiBvT29PMG8wME9PMCAuIGVuZHN3aXRoICggJy8nICkgOgogICAgIGlmIGJyb3dzZSA6CiAgICAgIG9vMG9vb29vTzAgKCBPMDBPMG9PTzAwTzAwICwgdXJsICsgb09vTzBvMDBPTzAgLCAxNSAsIEkxSWlJaWlJSUkgLCBvT08wMG9PTyAsICcnICwgJycgLCAnJyApCiAgICAgZWxzZSA6CiAgICAgIG9vMG9vb29vTzAgKCBPMDBPMG9PTzAwTzAwICwgdXJsICsgb09vTzBvMDBPTzAgLCAxNCAsIEkxSWlJaWlJSUkgLCBvT08wMG9PTyAsICcnICwgJycgLCAnJyApCiAgICBlbGlmIG9Pb08wbzAwT08wIC4gZW5kc3dpdGggKCAnLnhtbCcgKSA6CiAgICAgaWYgYnJvd3NlIDoKICAgICAgb28wb29vb29PMCAoIE8wME8wb09PMDBPMDAgLCB1cmwgKyBvT29PMG8wME9PMCAsIDEgLCBJMUlpSWlpSUlJICwgb09PMDBvT08gLCAnJyAsICcnICwgJycgLCAnJyAsICdkb3dubG9hZCcgKQogICAgIGVsc2UgOgogICAgICBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBpSUkxMTFpaSApID09IFRydWUgOgogICAgICAgaWYgTzAwTzBvT08wME8wMCBpbiBPb29PME9PIDoKICAgICAgICBvbzBvb29vb08wICggTzAwTzBvT08wME8wMCArICcgKGluIHVzZSknICwgdXJsICsgb09vTzBvMDBPTzAgLCAxMSAsIEkxSWlJaWlJSUkgLCBvT08wMG9PTyAsICcnICwgJycgLCAnJyAsICcnICwgJ2Rvd25sb2FkJyApCiAgICAgICBlbHNlIDoKICAgICAgICBvbzBvb29vb08wICggTzAwTzBvT08wME8wMCAsIHVybCArIG9Pb08wbzAwT08wICwgMTEgLCBJMUlpSWlpSUlJICwgb09PMDBvT08gLCAnJyAsICcnICwgJycgLCAnJyAsICdkb3dubG9hZCcgKQogICAgICBlbHNlIDoKICAgICAgIG9vMG9vb29vTzAgKCBPMDBPMG9PTzAwTzAwICwgdXJsICsgb09vTzBvMDBPTzAgLCAxMSAsIEkxSWlJaWlJSUkgLCBvT08wMG9PTyAsICcnICwgJycgLCAnJyAsICcnICwgJ2Rvd25sb2FkJyApCiAgICAgICBpZiA3IC0gNzogSWkxSSArIEkxaTFpSTFpICsgTzAKICAgICAgIGlmIDkgLSA5OiBpMTFpIC4gSWlJaTExaUlJaTFJaSAtIElJIC8gSWlJaTExaUlJaTFJaQpkZWYgSTExT29Pb09PT29PTyAoIGJyb3dzZSA9IEZhbHNlICkgOgogaWkxaWkxMUlJSWlpSSA9ICdodHRwOi8vY29tbXVuaXR5LWxpbmtzLmdvb2dsZWNvZGUuY29tL3N2bi90cnVuay8nCiBvb28wTyA9IEJlYXV0aWZ1bFNvdXAgKCBvT29PICggaWkxaWkxMUlJSWlpSSApICwgY29udmVydEVudGl0aWVzID0gQmVhdXRpZnVsU291cCAuIEhUTUxfRU5USVRJRVMgKQogTzAwT09Pb09vbzBPID0gb29vME8gKCAndWwnICkgWyAwIF0gKCAnbGknICkgWyAxIDogXQogZm9yIE9vME8wT09Pb28gaW4gTzAwT09Pb09vbzBPIDoKICBPMDBPMG9PTzAwTzAwID0gT28wTzBPT09vbyAoICdhJyApIFsgMCBdIFsgJ2hyZWYnIF0KICBpZiBicm93c2UgOgogICBvbzBvb29vb08wICggTzAwTzBvT08wME8wMCAsIGlpMWlpMTFJSUlpaUkgKyBPMDBPMG9PTzAwTzAwICwgMSAsIEkxSWlJaWlJSUkgLCBvT08wMG9PTyAsICcnICwgJycgLCAnJyAsICcnICwgJ2Rvd25sb2FkJyApCiAgZWxzZSA6CiAgIG9vMG9vb29vTzAgKCBPMDBPMG9PTzAwTzAwICwgaWkxaWkxMUlJSWlpSSArIE8wME8wb09PMDBPMDAgLCAxMSAsIEkxSWlJaWlJSUkgLCBvT08wMG9PTyAsICcnICwgJycgLCAnJyAsICcnICwgJ2Rvd25sb2FkJyApCiAgIGlmIDc3IC0gNzc6IE8wb28wT08wICUgTzBvbzBPTzAgKiBpaWlpSWkxMWkgLSBpMTFpSWlpSWlpCiAgIGlmIDkzIC0gOTM6IE9vb29vb29vT08gLyBvT29vT29PME9vME8gJSBpMTFpSWlpSWlpICsgbzBPT08gKiBPME8KZGVmIElpMTFpSUkxICggdXJsICwgZGF0YSA9IE5vbmUgKSA6CiBwcmludCAnZ2V0c291cCcgLCB1cmwgLCBkYXRhCiBpZiB1cmwgLiBzdGFydHN3aXRoICggJ2h0dHA6Ly8nICkgb3IgdXJsIC4gc3RhcnRzd2l0aCAoICdodHRwczovLycgKSA6CiAgZGF0YSA9IG9Pb08gKCB1cmwgKQogIGlmIHJlIC4gc2VhcmNoICggIiNFWFRNM1UiICwgZGF0YSApIG9yICdtM3UnIGluIHVybCA6CiAgIHByaW50ICdmb3VuZCBtM3UgZGF0YScgLCBkYXRhCiAgIHJldHVybiBkYXRhCiAgIGlmIDE1IC0gMTU6IGlpaTFJMUkgLiBPME8gLyBJSWlJMUkxMWkxMSArIGlpaTFJMUkKIGVsaWYgZGF0YSA9PSBOb25lIDoKICBpZiB4Ym1jdmZzIC4gZXhpc3RzICggdXJsICkgOgogICBpZiB1cmwgLiBzdGFydHN3aXRoICggInNtYjovLyIgKSBvciB1cmwgLiBzdGFydHN3aXRoICggIm5mczovLyIgKSA6CiAgICBPb28gPSB4Ym1jdmZzIC4gY29weSAoIHVybCAsIG9zIC4gcGF0aCAuIGpvaW4gKCBPbzBvMDAwMG8wbzAgLCAndGVtcCcgLCAnc29yY2VfdGVtcC50eHQnICkgKQogICAgaWYgT29vIDoKICAgICBkYXRhID0gb3BlbiAoIG9zIC4gcGF0aCAuIGpvaW4gKCBPbzBvMDAwMG8wbzAgLCAndGVtcCcgLCAnc29yY2VfdGVtcC50eHQnICkgLCAiciIgKSAuIHJlYWQgKCApCiAgICAgeGJtY3ZmcyAuIGRlbGV0ZSAoIG9zIC4gcGF0aCAuIGpvaW4gKCBPbzBvMDAwMG8wbzAgLCAndGVtcCcgLCAnc29yY2VfdGVtcC50eHQnICkgKQogICAgZWxzZSA6CiAgICAgT08gKCAiZmFpbGVkIHRvIGNvcHkgZnJvbSBzbWI6IiApCiAgIGVsc2UgOgogICAgZGF0YSA9IG9wZW4gKCB1cmwgLCAncicgKSAuIHJlYWQgKCApCiAgICBpZiByZSAuIG1hdGNoICggIiNFWFRNM1UiICwgZGF0YSApIG9yICdtM3UnIGluIHVybCA6CiAgICAgcHJpbnQgJ2ZvdW5kIG0zdSBkYXRhJyAsIGRhdGEKICAgICByZXR1cm4gZGF0YQogIGVsc2UgOgogICBPTyAoICJTb3VwIERhdGEgbm90IGZvdW5kISIgKQogICByZXR1cm4KIHJldHVybiBCZWF1dGlmdWxTT0FQICggZGF0YSAsIGNvbnZlcnRFbnRpdGllcyA9IEJlYXV0aWZ1bFN0b25lU291cCAuIFhNTF9FTlRJVElFUyApCiBpZiA2MiAtIDYyOiBJaTFJIC8gTzBPICsgTzAwb09vT29PMG8wTyAvIE8wTyAuIGkxMWkKIGlmIDY4IC0gNjg6IGkxMWlJaWlJaWkgJSBvME9PTyArIGkxMWlJaWlJaWkKZGVmIE8wbzBPbyAoIHVybCAsIGZhbmFydCApIDoKIHByaW50ICd1cmwtZ2V0RGF0YScgLCB1cmwKIGlpaSA9ICJMaXN0IgogaWYgMSAtIDE6IElJaUkxSTExaTExIC8gSWlJaTExaUlJaTFJaSAlIE8wb28wT08wICogT28wb29PMG9vMG9PIC4gaTExaUlpaUlpaQogb29vME8gPSBJaTExaUlJMSAoIHVybCApCiBpZiAyIC0gMjogbzBPT08gKiBpaWkxSTFJIC0gaUlpaTFJMTFJMUlJMSArIG9Pb29Pb08wT28wTyAuIGlpaWlJaTExaSAlIE8wb28wT08wCiBpZiBpc2luc3RhbmNlICggb29vME8gLCBCZWF1dGlmdWxTT0FQICkgOgogIGlmIGxlbiAoIG9vbzBPICggJ2xheW91dHlwZScgKSApID4gMCA6CiAgIGlpaSA9ICJUaHVtYm5haWwiCiAgIGlmIDkyIC0gOTI6IE8wb28wT08wCiAgaWYgbGVuICggb29vME8gKCAnY2hhbm5lbHMnICkgKSA+IDAgOgogICBJSWlJaWlJaSA9IG9vbzBPICggJ2NoYW5uZWwnICkKICAgZm9yIE8wMDBvbyBpbiBJSWlJaWlJaSA6CiAgICBpZiAyMCAtIDIwOiBJaTFJICUgTzAwb09vT29PMG8wTyAvIE8wMG9Pb09vTzBvME8gKyBPMDBvT29Pb08wbzBPCiAgICBpZiA0NSAtIDQ1OiBpaWlpSWkxMWkgLSBPbzBvb08wb28wb08gLSBPb29vb29vb09PIC0gTzBPIC4gaTExaSAvIE8wCiAgICBvbzBvMDBPID0gJycKICAgIG8wME8wT29PID0gMAogICAgdHJ5IDoKICAgICBvbzBvMDBPID0gTzAwMG9vICggJ2V4dGVybmFsbGluaycgKSBbIDAgXSAuIHN0cmluZwogICAgIG8wME8wT29PID0gbGVuICggTzAwMG9vICggJ2V4dGVybmFsbGluaycgKSApCiAgICBleGNlcHQgOiBwYXNzCiAgICBpZiAxNiAtIDE2OiBpSWlpMUkxMUkxSUkxCiAgICBpZiBvMDBPME9vTyA+IDEgOiBvbzBvMDBPID0gJycKICAgIGlmIDkwIC0gOTA6IElpSWkxMWlJSWkxSWkgJSBpMUlJaSAvIE8wTwogICAgTzAwTzBvT08wME8wMCA9IE8wMDBvbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nCiAgICBJSWkgPSBPMDAwb28gKCAndGh1bWJuYWlsJyApIFsgMCBdIC4gc3RyaW5nCiAgICBpZiBJSWkgPT0gTm9uZSA6CiAgICAgSUlpID0gJycKICAgICBpZiA0MSAtIDQxOiBPMDBvT29Pb08wbzBPIC0gTzAgLSBPMAogICAgdHJ5IDoKICAgICBpZiBub3QgTzAwMG9vICggJ2ZhbmFydCcgKSA6CiAgICAgIGlmIGkxMSAuIGdldFNldHRpbmcgKCAndXNlX3RodW1iJyApID09ICJ0cnVlIiA6CiAgICAgICBvTzAwT09vTzAwID0gSUlpCiAgICAgIGVsc2UgOgogICAgICAgb08wME9Pb08wMCA9IGZhbmFydAogICAgIGVsc2UgOgogICAgICBvTzAwT09vTzAwID0gTzAwMG9vICggJ2ZhbmFydCcgKSBbIDAgXSAuIHN0cmluZwogICAgIGlmIG9PMDBPT29PMDAgPT0gTm9uZSA6CiAgICAgIHJhaXNlCiAgICBleGNlcHQgOgogICAgIG9PMDBPT29PMDAgPSBmYW5hcnQKICAgICBpZiA0MCAtIDQwOiBvT29vT29PME9vME8gKiBPMDBvT29Pb08wbzBPICsgSWkxSSAlIE8wb28wT08wCiAgICB0cnkgOgogICAgIE9vT28gPSBPMDAwb28gKCAnaW5mbycgKSBbIDAgXSAuIHN0cmluZwogICAgIGlmIE9vT28gPT0gTm9uZSA6CiAgICAgIHJhaXNlCiAgICBleGNlcHQgOgogICAgIE9vT28gPSAnJwogICAgIGlmIDc0IC0gNzQ6IGlpaWlJaTExaSAtIElJaUkxSTExaTExICsgT29vb29vb29PTyArIEkxaTFpSTFpIC8gb28wMDAKICAgIHRyeSA6CiAgICAgbzAwTyA9IE8wMDBvbyAoICdnZW5yZScgKSBbIDAgXSAuIHN0cmluZwogICAgIGlmIG8wME8gPT0gTm9uZSA6CiAgICAgIHJhaXNlCiAgICBleGNlcHQgOgogICAgIG8wME8gPSAnJwogICAgIGlmIDIzIC0gMjM6IE8wCiAgICB0cnkgOgogICAgIGlJID0gTzAwMG9vICggJ2RhdGUnICkgWyAwIF0gLiBzdHJpbmcKICAgICBpZiBpSSA9PSBOb25lIDoKICAgICAgcmFpc2UKICAgIGV4Y2VwdCA6CiAgICAgaUkgPSAnJwogICAgIGlmIDg1IC0gODU6IE8wMG9Pb09vTzBvME8KICAgIHRyeSA6CiAgICAgY3JlZGl0cyA9IE8wMDBvbyAoICdjcmVkaXRzJyApIFsgMCBdIC4gc3RyaW5nCiAgICAgaWYgY3JlZGl0cyA9PSBOb25lIDoKICAgICAgcmFpc2UKICAgIGV4Y2VwdCA6CiAgICAgY3JlZGl0cyA9ICcnCiAgICAgaWYgODQgLSA4NDogb09vb09vTzBPbzBPIC4gaUlpaTFJMTFJMUlJMSAlIE9vb29vb29vT08gKyBPMDBvT29Pb08wbzBPICUgT29vb29vb29PTyAlIE8wTwogICAgdHJ5IDoKICAgICBpZiBvbzBvMDBPID09ICcnIDoKICAgICAgb28wb29vb29PMCAoIE8wME8wb09PMDBPMDAgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSAsIHVybCAuIGVuY29kZSAoICd1dGYtOCcgKSAsIDIgLCBJSWkgLCBvTzAwT09vTzAwICwgT29PbyAsIG8wME8gLCBpSSAsIGNyZWRpdHMgLCBUcnVlICkKICAgICBlbHNlIDoKICAgICAgaWYgNDIgLSA0MjogTzBPIC8gaWlpMUkxSSAvIElpSWkxMWlJSWkxSWkgKyBPMG9vME9PMCAvIG9vMDAwCiAgICAgIG9vMG9vb29vTzAgKCBPMDBPMG9PTzAwTzAwIC4gZW5jb2RlICggJ3V0Zi04JyApICwgb28wbzAwTyAuIGVuY29kZSAoICd1dGYtOCcgKSAsIDEgLCBJSWkgLCBvTzAwT09vTzAwICwgT29PbyAsIG8wME8gLCBpSSAsIE5vbmUgLCAnc291cmNlJyApCiAgICBleGNlcHQgOgogICAgIE9PICggJ1RoZXJlIHdhcyBhIHByb2JsZW0gYWRkaW5nIGRpcmVjdG9yeSBmcm9tIGdldERhdGEoKTogJyArIE8wME8wb09PMDBPMDAgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSApCiAgZWxzZSA6CiAgIE9PICggJ05vIENoYW5uZWxzOiBnZXRJdGVtcycgKQogICBvME9vT08wMDBvb08wICggb29vME8gKCAnaXRlbScgKSAsIGZhbmFydCApCiBlbHNlIDoKICBvMG8wbzBvTzBvT08gKCBvb28wTyApCiAgaWYgMyAtIDM6IElpSWkxMWlJSWkxSWkKIGlmIGlpaSA9PSAiVGh1bWJuYWlsIiA6CiAgSWkxMUkxICggKQogIGlmIDE0IC0gMTQ6IElpMUkgJSBpSWlpMUkxMUkxSUkxCiAgaWYgNzEgLSA3MTogTzAgLiBPMG9vME9PMCAvIElpSWkxMWlJSWkxSWkKICBpZiA3MyAtIDczOiBpMTFpIC4gaTExaUlpaUlpaSAvIE8wMG9Pb09vTzBvME8gKyBvbzAwMAogIGlmIDEyIC0gMTI6IGkxMWlJaWlJaWkgLSBpMUlJaSAtIE8wTyAuIGkxSUlpIC0gSWkxSSArIE8wCiAgaWYgOTggLSA5ODogSWlJaTExaUlJaTFJaQpkZWYgbzBvMG8wb08wb09PICggZGF0YSApIDoKIE9PT08wb28wID0gZGF0YSAuIHJzdHJpcCAoICkKIE9vME8wME9vMG8wID0gcmUgLiBjb21waWxlICggcicjRVhUSU5GOiguKz8pLCguKj8pW1xuXHJdKyhbXlxuXSspJyApIC4gZmluZGFsbCAoIE9PT08wb28wICkKIEkxMWlpSTFpMSA9IGxlbiAoIE9vME8wME9vMG8wICkKIHByaW50ICd0b3RhbCBtM3UgbGlua3MnICwgSTExaWlJMWkxCiBmb3IgSTFpMUlpaWlpICwgT09vMG9PMDBvb08wMCAsIG9PTzBPMDBvTzBPb28gaW4gT28wTzAwT28wbzAgOgogIGlmICd0dmctbG9nbycgaW4gSTFpMUlpaWlpIDoKICAgSUlpID0gb08wT28wTzBvICggSTFpMUlpaWlpICwgJ3R2Zy1sb2dvPVtcJyJdKC4qPylbXCciXScgKQogICBpZiBJSWkgOgogICAgaWYgSUlpIC4gc3RhcnRzd2l0aCAoICdodHRwJyApIDoKICAgICBJSWkgPSBJSWkKICAgICBpZiA5OSAtIDk5OiBpaWlpSWkxMWkgLiBPMG9vME9PMCArIElJICUgaWlpaUlpMTFpIC4gaTExaUlpaUlpaSAlIE8wCiAgICBlbGlmIG5vdCBpMTEgLiBnZXRTZXR0aW5nICggJ2xvZ28tZm9sZGVyUGF0aCcgKSA9PSAiIiA6CiAgICAgb09PMDBPID0gaTExIC4gZ2V0U2V0dGluZyAoICdsb2dvLWZvbGRlclBhdGgnICkKICAgICBJSWkgPSBvT08wME8gKyBJSWkKICAgICBpZiA3NyAtIDc3OiBJSWlJMUkxMWkxMSAtIGkxSUlpIC0gaWlpMUkxSSAuIG9vMDAwCiAgICBlbHNlIDoKICAgICBJSWkgPSBJSWkKICAgICBpZiAzOSAtIDM5OiBpMTFpIC8gSUkgKyBJMWkxaUkxaSAvIG9vMDAwCiAgICAgaWYgMTMgLSAxMzogT28wb29PMG9vMG9PICsgTzAgKyBPMG9vME9PMCAlIG9Pb29Pb08wT28wTyAvIElpSWkxMWlJSWkxSWkgLiBPbzBvb08wb28wb08KICBlbHNlIDoKICAgSUlpID0gJycKICBpZiAndHlwZScgaW4gSTFpMUlpaWlpIDoKICAgT08wT29vbzBvT08wTyA9IG9PME9vME8wbyAoIEkxaTFJaWlpaSAsICd0eXBlPVtcJyJdKC4qPylbXCciXScgKQogICBpZiBPTzBPb29vMG9PTzBPID09ICd5dC1kbCcgOgogICAgb09PME8wMG9PME9vbyA9IG9PTzBPMDBvTzBPb28gKyAiJm1vZGU9MTgiCiAgIGVsaWYgT08wT29vbzBvT08wTyA9PSAncmVnZXgnIDoKICAgIGlpMWlpMTFJSUlpaUkgPSBvT08wTzAwb08wT29vIC4gc3BsaXQgKCAnJnJlZ2V4cz0nICkKICAgIGlmIDYyIC0gNjI6IG9Pb29Pb08wT28wTwogICAgTzAwbzBPTzAgPSBJSWkxSTFpaWlpaSAoIElpMTFpSUkxICggJycgLCBkYXRhID0gaWkxaWkxMUlJSWlpSSBbIDEgXSApICkKICAgIGlmIDcxIC0gNzE6IE9vMG9vTzBvbzBvTyAqIGkxMWkgKiBpaWlpSWkxMWkKICAgIGkxaSAoIGlpMWlpMTFJSUlpaUkgWyAwIF0gLCBPT28wb08wMG9vTzAwICwgSUlpICwgJycgLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCBPMDBvME9PMCAsIEkxMWlpSTFpMSApCiAgICBjb250aW51ZQogIGkxaSAoIG9PTzBPMDBvTzBPb28gLCBPT28wb08wMG9vTzAwICwgSUlpICwgJycgLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCAnJyAsIEkxMWlpSTFpMSApCiAgaWYgNTYgLSA1Njogb09vb09vTzBPbzBPCiB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwKSIgKQogaWYgNTQgLSA1NDogSTFpMWlJMWkgLyBJaTFJIC4gaWlpaUlpMTFpICUgTzBvbzBPTzAKZGVmIE9vTzBPT09PbzBPICggbmFtZSAsIHVybCAsIGZhbmFydCApIDoKIG9vbzBPID0gSWkxMWlJSTEgKCB1cmwgKQogT29vT08gPSBvb28wTyAuIGZpbmQgKCAnY2hhbm5lbCcgLCBhdHRycyA9IHsgJ25hbWUnIDogbmFtZSAuIGRlY29kZSAoICd1dGYtOCcgKSB9ICkKIEkxMTExID0gT29vT08gKCAnaXRlbScgKQogdHJ5IDoKICBvTzAwT09vTzAwID0gT29vT08gKCAnZmFuYXJ0JyApIFsgMCBdIC4gc3RyaW5nCiAgaWYgb08wME9Pb08wMCA9PSBOb25lIDoKICAgcmFpc2UKIGV4Y2VwdCA6CiAgb08wME9Pb08wMCA9IGZhbmFydAogZm9yIE8wMDBvbyBpbiBPb29PTyAoICdzdWJjaGFubmVsJyApIDoKICBuYW1lID0gTzAwMG9vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcKICB0cnkgOgogICBJSWkgPSBPMDAwb28gKCAndGh1bWJuYWlsJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIElJaSA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgSUlpID0gJycKICB0cnkgOgogICBpZiBub3QgTzAwMG9vICggJ2ZhbmFydCcgKSA6CiAgICBpZiBpMTEgLiBnZXRTZXR0aW5nICggJ3VzZV90aHVtYicgKSA9PSAidHJ1ZSIgOgogICAgIG9PMDBPT29PMDAgPSBJSWkKICAgZWxzZSA6CiAgICBvTzAwT09vTzAwID0gTzAwMG9vICggJ2ZhbmFydCcgKSBbIDAgXSAuIHN0cmluZwogICBpZiBvTzAwT09vTzAwID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBwYXNzCiAgdHJ5IDoKICAgT29PbyA9IE8wMDBvbyAoICdpbmZvJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIE9vT28gPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIE9vT28gPSAnJwogICBpZiAxNCAtIDE0OiBvT29vT29PME9vME8gLSBpMTFpICsgaTFJSWkKICB0cnkgOgogICBvMDBPID0gTzAwMG9vICggJ2dlbnJlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIG8wME8gPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIG8wME8gPSAnJwogICBpZiAxMCAtIDEwOiBpaWlpSWkxMWkgKyBpMUlJaQogIHRyeSA6CiAgIGlJID0gTzAwMG9vICggJ2RhdGUnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgaUkgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIGlJID0gJycKICAgaWYgODcgLSA4Nzogb09vb09vTzBPbzBPCiAgdHJ5IDoKICAgY3JlZGl0cyA9IE8wMDBvbyAoICdjcmVkaXRzJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIGNyZWRpdHMgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIGNyZWRpdHMgPSAnJwogICBpZiA1OCAtIDU4OiBvbzAwMCAlIElpSWkxMWlJSWkxSWkKICB0cnkgOgogICBvbzBvb29vb08wICggbmFtZSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICwgdXJsIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMyAsIElJaSAsIG9PMDBPT29PMDAgLCBPb09vICwgbzAwTyAsIGNyZWRpdHMgLCBpSSApCiAgZXhjZXB0IDoKICAgT08gKCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBhZGRpbmcgZGlyZWN0b3J5IC0gJyArIG5hbWUgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSApCiBvME9vT08wMDBvb08wICggSTExMTEgLCBvTzAwT09vTzAwICkKIGlmIDUwIC0gNTA6IEkxaTFpSTFpIC4gSWlJaTExaUlJaTFJaQogaWYgOTcgLSA5NzogTzAgKyBvbzAwMApkZWYgT08wTzAwMCAoIG5hbWUgLCB1cmwgLCBmYW5hcnQgKSA6CiBvb28wTyA9IElpMTFpSUkxICggdXJsICkKIE9vb09PID0gb29vME8gLiBmaW5kICggJ3N1YmNoYW5uZWwnICwgYXR0cnMgPSB7ICduYW1lJyA6IG5hbWUgLiBkZWNvZGUgKCAndXRmLTgnICkgfSApCiBJMTExMSA9IE9vb09PICggJ3N1Yml0ZW0nICkKIG8wT29PTzAwMG9vTzAgKCBJMTExMSAsIGZhbmFydCApCiBpZiAzNyAtIDM3OiBPb29vb29vb09PIC0gTzAgLSBJaUlpMTFpSUlpMUlpCiBpZiA3NyAtIDc3OiBJaTFJICogaUlpaTFJMTFJMUlJMQogaWYgOTggLSA5ODogb09vb09vTzBPbzBPICUgTzAwb09vT29PMG8wTyAqIE9vb29vb29vT08KZGVmIE9vaUlJaUlpMSAoIG5hbWUgLCB1cmwgLCBpY29uaW1hZ2UgLCBmYW5hcnQgKSA6CiBvME8wbzAgPSBbIF0gOyBJSTExMWlJMTExSTFJID0gWyBdIDsgSTFpMWkxaWlpID0gMAogSTExMTFpID0gaUlJaWkgKCB1cmwgLCAnc3VibGluazonICwgJyMnICkKIGZvciBvMDBPME8gaW4gSTExMTFpIDoKICBpZiAnTElTVFNPVVJDRTonIGluIG8wME8wTyA6CiAgIGlpMWlpaTFpID0gSWlpMUkxMTExaWkgKCBvMDBPME8gLCAnTElTVFNPVVJDRTonICwgJzo6JyApCiAgIG9vT29PMDAgPSBJaWkxSTExMTFpaSAoIG8wME8wTyAsICdMSVNUTkFNRTonICwgJzo6JyApCiAgZWxzZSA6CiAgIGlpMWlpaTFpID0gbzAwTzBPIC4gcmVwbGFjZSAoICdzdWJsaW5rOicgLCAnJyApIC4gcmVwbGFjZSAoICcjJyAsICcnICkKICAgb29Pb08wMCA9IG5hbWUKICBpZiBsZW4gKCBpaTFpaWkxaSApID4gMTAgOgogICBJMWkxaTFpaWkgPSBJMWkxaTFpaWkgKyAxIDsgbzBPMG8wIC4gYXBwZW5kICggb29Pb08wMCApIDsgSUkxMTFpSTExMUkxSSAuIGFwcGVuZCAoIGlpMWlpaTFpICkKICAgaWYgMTQgLSAxNDogaTFJSWkgLSBJaUlpMTFpSUlpMUlpICUgTzAgLSBPME8KIGlmIEkxaTFpMWlpaSA9PSAxIDoKICB0cnkgOgogICBvb08wTzAwT28wbyA9IHhibWNndWkgLiBMaXN0SXRlbSAoIG5hbWUgLCBpY29uSW1hZ2UgPSBpY29uaW1hZ2UgLCB0aHVtYm5haWxJbWFnZSA9IGljb25pbWFnZSApIDsgb29PME8wME9vMG8gLiBzZXRJbmZvICggdHlwZSA9ICJWaWRlbyIgLCBpbmZvTGFiZWxzID0geyAiVGl0bGUiIDogbmFtZSB9ICkKICAgT09PID0geGJtY3BsdWdpbiAuIGFkZERpcmVjdG9yeUl0ZW0gKCBoYW5kbGUgPSBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB1cmwgPSBJSTExMWlJMTExSTFJIFsgMCBdICwgbGlzdGl0ZW0gPSBvb08wTzAwT28wbyApCiAgIHhibWMgLiBQbGF5ZXIgKCApIC4gcGxheSAoIE9vMG8wME9PMDAwMCAoIElJMTExaUkxMTFJMUkgWyAwIF0gKSAsIG9vTzBPMDBPbzBvICkKICBleGNlcHQgOgogICBwYXNzCiBlbHNlIDoKICBvME9PMDAgPSB4Ym1jZ3VpIC4gRGlhbG9nICggKQogIEkxaSA9IG8wT08wMCAuIHNlbGVjdCAoICdGYWxjb24gTW92aWVzIC0gU2VsZWN0IEEgU291cmNlJyAsIG8wTzBvMCApCiAgaWYgSTFpID49IDAgOgogICBPMDBPb29vID0gc3RyICggbzBPMG8wIFsgSTFpIF0gKQogICBpMTFJID0gc3RyICggSUkxMTFpSTExMUkxSSBbIEkxaSBdICkKICAgaWYgNzYgLSA3NjogT28wb29PMG9vMG9PICogTzBvbzBPTzAKICAgdHJ5IDoKICAgIG9vTzBPMDBPbzBvID0geGJtY2d1aSAuIExpc3RJdGVtICggTzAwT29vbyAsIGljb25JbWFnZSA9IGljb25pbWFnZSAsIHRodW1ibmFpbEltYWdlID0gaWNvbmltYWdlICkgOyBvb08wTzAwT28wbyAuIHNldEluZm8gKCB0eXBlID0gIlZpZGVvIiAsIGluZm9MYWJlbHMgPSB7ICJUaXRsZSIgOiBPMDBPb29vIH0gKQogICAgT09PID0geGJtY3BsdWdpbiAuIGFkZERpcmVjdG9yeUl0ZW0gKCBoYW5kbGUgPSBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB1cmwgPSBpMTFJICwgbGlzdGl0ZW0gPSBvb08wTzAwT28wbyApCiAgICB4Ym1jIC4gUGxheWVyICggKSAuIHBsYXkgKCBPbzBvMDBPTzAwMDAgKCBpMTFJICkgLCBvb08wTzAwT28wbyApCiAgIGV4Y2VwdCA6CiAgICBwYXNzCiAgICBpZiA1MiAtIDUyOiBJaTFJCiAgICBpZiAxOSAtIDE5OiBvT29vT29PME9vME8KICAgIGlmIDI1IC0gMjU6IE8wMG9Pb09vTzBvME8gLyBJSQpkZWYgSUlvb08gKCB0ZXh0ICwgcGF0dGVybiApIDoKIE9vbzBvT29vbzAgPSAiIgogdHJ5IDoKICBvT09Pb28wMCA9IHJlIC4gZmluZGFsbCAoIHBhdHRlcm4gLCB0ZXh0ICwgZmxhZ3MgPSByZSAuIERPVEFMTCApCiAgT29vMG9Pb29vMCA9IG9PT09vbzAwIFsgMCBdCiBleGNlcHQgOgogIE9vbzBvT29vbzAgPSAiIgogIGlmIDkgLSA5OiBPMCAlIE8wIC0gSWlJaTExaUlJaTFJaQogcmV0dXJuIE9vbzBvT29vbzAKIGlmIDUxIC0gNTE6IG9Pb29Pb08wT28wTyAuIGlJaWkxSTExSTFJSTEgLSBvME9PTyAvIE8wCmRlZiBpSUlpaSAoIHRleHQgLCBzdGFydF93aXRoICwgZW5kX3dpdGggKSA6CiBPT09vTzAwID0gcmUgLiBmaW5kYWxsICggIig/aSkoIiArIHN0YXJ0X3dpdGggKyAiW1xTXHNdKz8iICsgZW5kX3dpdGggKyAiKSIgLCB0ZXh0ICkKIHJldHVybiBPT09vTzAwCiBpZiA0MCAtIDQwOiBvME9PTyAlIG9Pb29Pb08wT28wTyAuIElJIC4gTzAgKiBJMWkxaUkxaQpkZWYgSWlpMUkxMTExaWkgKCB0ZXh0ICwgZnJvbV9zdHJpbmcgLCB0b19zdHJpbmcgLCBleGNsdWRpbmcgPSBUcnVlICkgOgogaWYgZXhjbHVkaW5nIDoKICB0cnkgOiBPT09vTzAwID0gcmUgLiBzZWFyY2ggKCAiKD9pKSIgKyBmcm9tX3N0cmluZyArICIoW1xTXHNdKz8pIiArIHRvX3N0cmluZyAsIHRleHQgKSAuIGdyb3VwICggMSApCiAgZXhjZXB0IDogT09Pb08wMCA9ICcnCiBlbHNlIDoKICB0cnkgOiBPT09vTzAwID0gcmUgLiBzZWFyY2ggKCAiKD9pKSgiICsgZnJvbV9zdHJpbmcgKyAiW1xTXHNdKz8iICsgdG9fc3RyaW5nICsgIikiICwgdGV4dCApIC4gZ3JvdXAgKCAxICkKICBleGNlcHQgOiBPT09vTzAwID0gJycKIHJldHVybiBPT09vTzAwCiBpZiA0IC0gNDogTzAwb09vT29PMG8wTyAlIGlpaWlJaTExaSAqIE8wTwpkZWYgbzBPb09PMDAwb29PMCAoIGl0ZW1zICwgZmFuYXJ0ICkgOgogSTExaWlJMWkxID0gbGVuICggaXRlbXMgKQogcHJpbnQgJ1NUQVJUIEdFVCBJVEVNUyAqKioqKicKIE9PICggJ1RvdGFsIEl0ZW1zOiAlcycgJSBJMTFpaUkxaTEgKQogZm9yIG8wTzBPT09Pb09PMCBpbiBpdGVtcyA6CiAgaWkgPSBGYWxzZQogIE8wb09vMDBvID0gRmFsc2UKICB0cnkgOgogICBPMDBPMG9PTzAwTzAwID0gbzBPME9PT09vT08wICggJ3RpdGxlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIE8wME8wb09PMDBPMDAgaXMgTm9uZSA6CiAgICBPMDBPMG9PTzAwTzAwID0gJ3Vua25vd24/JwogIGV4Y2VwdCA6CiAgIE9PICggJ05hbWUgRXJyb3InICkKICAgTzAwTzBvT08wME8wMCA9ICcnCiAgIGlmIDgxIC0gODE6IE9vMG9vTzBvbzBvTyAlIGkxSUlpIC4gaUlpaTFJMTFJMUlJMQogICBpZiA0IC0gNDogaTExaUlpaUlpaSAlIE8wTyAlIGkxSUlpIC8gT28wb29PMG9vMG9PCiAgdHJ5IDoKICAgaWYgbzBPME9PT09vT08wICggJ2VwZycgKSA6CiAgICBpZiBvME8wT09PT29PTzAgLiBlcGdfdXJsIDoKICAgICBPTyAoICdHZXQgRVBHIFJlZ2V4JyApCiAgICAgSTExaUkgPSBvME8wT09PT29PTzAgLiBlcGdfdXJsIC4gc3RyaW5nCiAgICAgb29Pb28gPSBvME8wT09PT29PTzAgLiBlcGdfcmVnZXggLiBzdHJpbmcKICAgICBJMUlJSTExMTFpSWkgPSBJMWkxMTFJICggSTExaUkgLCBvb09vbyApCiAgICAgaWYgSTFJSUkxMTExaUlpIDoKICAgICAgTzAwTzBvT08wME8wMCArPSAnIC0gJyArIEkxSUlJMTExMWlJaQogICAgZWxpZiBvME8wT09PT29PTzAgKCAnZXBnJyApIFsgMCBdIC4gc3RyaW5nID4gMSA6CiAgICAgTzAwTzBvT08wME8wMCArPSBPb29PbzBvbzBPMG8wME8gKCBvME8wT09PT29PTzAgKCAnZXBnJyApIFsgMCBdIC4gc3RyaW5nICkKICAgZWxzZSA6CiAgICBwYXNzCiAgZXhjZXB0IDoKICAgT08gKCAnRVBHIEVycm9yJyApCiAgdHJ5IDoKICAgaWkxaWkxMUlJSWlpSSA9IFsgXQogICBpZiBsZW4gKCBvME8wT09PT29PTzAgKCAnbGluaycgKSApID4gMCA6CiAgICBpZiA0OCAtIDQ4OiBJSSAvIEkxaTFpSTFpIC4gaUlpaTFJMTFJMUlJMSAqIG9vMDAwICogaWlpaUlpMTFpIC8gaTFJSWkKICAgIGZvciBPbzBPME9PT29vIGluIG8wTzBPT09Pb09PMCAoICdsaW5rJyApIDoKICAgICBpZiBub3QgT28wTzBPT09vbyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWkxaWkxMUlJSWlpSSAuIGFwcGVuZCAoIE9vME8wT09Pb28gLiBzdHJpbmcgKQogICAgICBpZiA5MiAtIDkyOiBJSWlJMUkxMWkxMSAlIElJaUkxSTExaTExIC0gSWlJaTExaUlJaTFJaSAvIG9vMDAwCiAgIGVsaWYgbGVuICggbzBPME9PT09vT08wICggJ3Nwb3J0c2RldmlsJyApICkgPiAwIDoKICAgIGZvciBPbzBPME9PT29vIGluIG8wTzBPT09Pb09PMCAoICdzcG9ydHNkZXZpbCcgKSA6CiAgICAgaWYgbm90IE9vME8wT09Pb28gLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIEkxMUlJSWkgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLlNwb3J0c0RldmlsLz9tb2RlPTEmYW1wO2l0ZW09Y2F0Y2hlciUzZHN0cmVhbXMlMjZ1cmw9JyArIE9vME8wT09Pb28gLiBzdHJpbmcKICAgICAgaUlJaWlJMUlJMWkxMSA9IG8wTzBPT09Pb09PMCAoICdyZWZlcmVyJyApIFsgMCBdIC4gc3RyaW5nCiAgICAgIGlmIGlJSWlpSTFJSTFpMTEgOgogICAgICAgaWYgNjUgLSA2NTogTzAwb09vT29PMG8wTyAvIGlpaTFJMUkgLyBvbzAwMAogICAgICAgSTExSUlJaSA9IEkxMUlJSWkgKyAnJTI2cmVmZXJlcj0nICsgaUlJaWlJMUlJMWkxMQogICAgICBpaTFpaTExSUlJaWlJIC4gYXBwZW5kICggSTExSUlJaSApCiAgIGVsaWYgbGVuICggbzBPME9PT09vT08wICggJ3AycCcgKSApID4gMCA6CiAgICBmb3IgT28wTzBPT09vbyBpbiBvME8wT09PT29PTzAgKCAncDJwJyApIDoKICAgICBpZiBub3QgT28wTzBPT09vbyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWYgJ3NvcDovLycgaW4gT28wTzBPT09vbyA6CiAgICAgICBPb28wMDAwTzAgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnAycC1zdHJlYW1zLz91cmw9JyArIE9vME8wT09Pb28gLiBzdHJpbmcgKyAnJmFtcDttb2RlPTImYW1wOycgKyAnbmFtZT0nICsgTzAwTzBvT08wME8wMAogICAgICAgaWkxaWkxMUlJSWlpSSAuIGFwcGVuZCAoIE9vbzAwMDBPMCApCiAgICAgIGVsc2UgOgogICAgICAgSUlJSUlJaUlpSWkxID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5wMnAtc3RyZWFtcy8/dXJsPScgKyBPbzBPME9PT29vIC4gc3RyaW5nICsgJyZhbXA7bW9kZT0xJmFtcDsnICsgJ25hbWU9JyArIE8wME8wb09PMDBPMDAKICAgICAgIGlpMWlpMTFJSUlpaUkgLiBhcHBlbmQgKCBJSUlJSUlpSWlJaTEgKQogICBlbGlmIGxlbiAoIG8wTzBPT09Pb09PMCAoICd2YXVnaG4nICkgKSA+IDAgOgogICAgZm9yIE9vME8wT09Pb28gaW4gbzBPME9PT09vT08wICggJ3ZhdWdobicgKSA6CiAgICAgaWYgbm90IE9vME8wT09Pb28gLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIEkxMWlpaWlJMWkgPSAncGx1Z2luOi8vcGx1Z2luLnN0cmVhbS52YXVnaG5saXZlLnR2Lz9tb2RlPVBsYXlMaXZlU3RyZWFtJmFtcDtjaGFubmVsPScgKyBPbzBPME9PT29vIC4gc3RyaW5nCiAgICAgIGlpMWlpMTFJSUlpaUkgLiBhcHBlbmQgKCBJMTFpaWlpSTFpICkKICAgZWxpZiBsZW4gKCBvME8wT09PT29PTzAgKCAnaWxpdmUnICkgKSA+IDAgOgogICAgZm9yIE9vME8wT09Pb28gaW4gbzBPME9PT09vT08wICggJ2lsaXZlJyApIDoKICAgICBpZiBub3QgT28wTzBPT09vbyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWYgbm90ICdodHRwJyBpbiBPbzBPME9PT29vIC4gc3RyaW5nIDoKICAgICAgIGlJMWkxMSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8udGJoLmlsaXZlLz91cmw9aHR0cDovL3d3dy5zdHJlYW1saXZlLnRvL3ZpZXcvJyArIE9vME8wT09Pb28gLiBzdHJpbmcgKyAnJmFtcDtsaW5rPTk5JmFtcDttb2RlPWlMaXZlUGxheScKICAgICAgZWxzZSA6CiAgICAgICBpSTFpMTEgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnRiaC5pbGl2ZS8/dXJsPScgKyBPbzBPME9PT29vIC4gc3RyaW5nICsgJyZhbXA7bGluaz05OSZhbXA7bW9kZT1pTGl2ZVBsYXknCiAgIGVsaWYgbGVuICggbzBPME9PT09vT08wICggJ3l0LWRsJyApICkgPiAwIDoKICAgIGZvciBPbzBPME9PT29vIGluIG8wTzBPT09Pb09PMCAoICd5dC1kbCcgKSA6CiAgICAgaWYgbm90IE9vME8wT09Pb28gLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIE9vT09vb29PTzBPID0gT28wTzBPT09vbyAuIHN0cmluZyArICcmbW9kZT0xOCcKICAgICAgaWkxaWkxMUlJSWlpSSAuIGFwcGVuZCAoIE9vT09vb29PTzBPICkKICAgZWxpZiBsZW4gKCBvME8wT09PT29PTzAgKCAndXR1YmUnICkgKSA+IDAgOgogICAgZm9yIE9vME8wT09Pb28gaW4gbzBPME9PT09vT08wICggJ3V0dWJlJyApIDoKICAgICBpZiBub3QgT28wTzBPT09vbyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWYgbGVuICggT28wTzBPT09vbyAuIHN0cmluZyApID09IDExIDoKICAgICAgIG9vbzAwT29vID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvP3ZpZGVvX2lkPScgKyBPbzBPME9PT29vIC4gc3RyaW5nCiAgICAgIGVsaWYgT28wTzBPT09vbyAuIHN0cmluZyAuIHN0YXJ0c3dpdGggKCAnUEwnICkgYW5kIG5vdCAnJm9yZGVyPScgaW4gT28wTzBPT09vbyAuIHN0cmluZyA6CiAgICAgICBvb28wME9vbyA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS9wbGF5Lz8mb3JkZXI9ZGVmYXVsdCZwbGF5bGlzdF9pZD0nICsgT28wTzBPT09vbyAuIHN0cmluZwogICAgICBlbHNlIDoKICAgICAgIG9vbzAwT29vID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvP3BsYXlsaXN0X2lkPScgKyBPbzBPME9PT29vIC4gc3RyaW5nCiAgICBpaTFpaTExSUlJaWlJIC4gYXBwZW5kICggb29vMDBPb28gKQogICBlbGlmIGxlbiAoIG8wTzBPT09Pb09PMCAoICdpbWRiJyApICkgPiAwIDoKICAgIGZvciBPbzBPME9PT29vIGluIG8wTzBPT09Pb09PMCAoICdpbWRiJyApIDoKICAgICBpZiBub3QgT28wTzBPT09vbyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWYgaTExIC4gZ2V0U2V0dGluZyAoICdnZW5lc2lzb3JwdWxzYXInICkgPT0gJzAnIDoKICAgICAgIE9vMG8wTzAwID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5nZW5lc2lzLz9hY3Rpb249cGxheSZpbWRiPScgKyBPbzBPME9PT29vIC4gc3RyaW5nCiAgICAgIGVsc2UgOgogICAgICAgT28wbzBPMDAgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnB1bHNhci9tb3ZpZS90dCcgKyBPbzBPME9PT29vIC4gc3RyaW5nICsgJy9wbGF5JwogICAgICBpaTFpaTExSUlJaWlJIC4gYXBwZW5kICggT28wbzBPMDAgKQogICBlbGlmIGxlbiAoIG8wTzBPT09Pb09PMCAoICdmNG0nICkgKSA+IDAgOgogICAgZm9yIE9vME8wT09Pb28gaW4gbzBPME9PT09vT08wICggJ2Y0bScgKSA6CiAgICAgaWYgbm90IE9vME8wT09Pb28gLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIGlmICcuZjRtJyBpbiBPbzBPME9PT29vIC4gc3RyaW5nIDoKICAgICAgIGlpMSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uZjRtVGVzdGVyLz91cmw9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBPbzBPME9PT29vIC4gc3RyaW5nICkKICAgICAgZWxpZiAnLm0zdTgnIGluIE9vME8wT09Pb28gLiBzdHJpbmcgOgogICAgICAgaWkxID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5mNG1UZXN0ZXIvP3VybD0nICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIE9vME8wT09Pb28gLiBzdHJpbmcgKSArICcmYW1wO3N0cmVhbXR5cGU9SExTJwogICAgICAgaWYgMzkgLSAzOTogTzAwb09vT29PMG8wTyAvIElJIC4gSWlJaTExaUlJaTFJaSAlIE8wICogTzBvbzBPTzAgKyBvT29vT29PME9vME8KICAgICAgZWxzZSA6CiAgICAgICBpaTEgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLmY0bVRlc3Rlci8/dXJsPScgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggT28wTzBPT09vbyAuIHN0cmluZyApICsgJyZhbXA7c3RyZWFtdHlwZT1TSU1QTEUnCiAgICBpaTFpaTExSUlJaWlJIC4gYXBwZW5kICggaWkxICkKICAgZWxpZiBsZW4gKCBvME8wT09PT29PTzAgKCAnZnR2JyApICkgPiAwIDoKICAgIGZvciBPbzBPME9PT29vIGluIG8wTzBPT09Pb09PMCAoICdmdHYnICkgOgogICAgIGlmIG5vdCBPbzBPME9PT29vIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBPMG9vME8gPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLkYuVC5WLz9uYW1lPScgKyB1cmxsaWIgLiBxdW90ZSAoIE8wME8wb09PMDBPMDAgKSArICcmdXJsPScgKyBPbzBPME9PT29vIC4gc3RyaW5nICsgJyZtb2RlPTEyNSZjaF9mYW5hcnQ9bmEnCiAgICAgaWkxaWkxMUlJSWlpSSAuIGFwcGVuZCAoIE8wb28wTyApCiAgIGlmIGxlbiAoIGlpMWlpMTFJSUlpaUkgKSA8IDEgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBPTyAoICdFcnJvciA8bGluaz4gZWxlbWVudCwgUGFzc2luZzonICsgTzAwTzBvT08wME8wMCAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkKICAgY29udGludWUKICAgaWYgMzYgLSAzNjogSWkxSSArIE8wIC0gTzAwb09vT29PMG8wTyAtIE8wICUgaWlpMUkxSSAuIGlpaWlJaTExaQogIGlpID0gRmFsc2UKICBpZiA3NCAtIDc0OiBpMTFpSWlpSWlpIC4gb09vb09vTzBPbzBPCiAgdHJ5IDoKICAgaWkgPSBvME8wT09PT29PTzAgKCAnZXh0ZXJuYWxsaW5rJyApIFsgMCBdIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIGlmIDM2IC0gMzY6IE9vb29vb29vT08gLiBPME8KICBpZiBpaSA6CiAgIG9PID0gWyBpaSBdCiAgIGlpID0gVHJ1ZQogIGVsc2UgOgogICBpaSA9IEZhbHNlCiAgdHJ5IDoKICAgTzBvT28wMG8gPSBvME8wT09PT29PTzAgKCAnanNvbnJwYycgKSBbIDAgXSAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICBpZiBPMG9PbzAwbyA6CiAgIG9PID0gWyBPMG9PbzAwbyBdCiAgIE8wb09vMDBvID0gVHJ1ZQogIGVsc2UgOgogICBPMG9PbzAwbyA9IEZhbHNlCiAgdHJ5IDoKICAgSUlpID0gbzBPME9PT09vT08wICggJ3RodW1ibmFpbCcgKSBbIDAgXSAuIHN0cmluZwogICBpZiBJSWkgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIElJaSA9ICcnCiAgdHJ5IDoKICAgaWYgbm90IG8wTzBPT09Pb09PMCAoICdmYW5hcnQnICkgOgogICAgaWYgaTExIC4gZ2V0U2V0dGluZyAoICd1c2VfdGh1bWInICkgPT0gInRydWUiIDoKICAgICBvTzAwT09vTzAwID0gSUlpCiAgICBlbHNlIDoKICAgICBvTzAwT09vTzAwID0gZmFuYXJ0CiAgIGVsc2UgOgogICAgb08wME9Pb08wMCA9IG8wTzBPT09Pb09PMCAoICdmYW5hcnQnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgb08wME9Pb08wMCA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgb08wME9Pb08wMCA9IGZhbmFydAogIHRyeSA6CiAgIE9vT28gPSBvME8wT09PT29PTzAgKCAnaW5mbycgKSBbIDAgXSAuIHN0cmluZwogICBpZiBPb09vID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBPb09vID0gJycKICAgaWYgMTAgLSAxMDogSUlpSTFJMTFpMTEgLyBJSWlJMUkxMWkxMSAvIEkxaTFpSTFpIC4gSTFpMWlJMWkKICB0cnkgOgogICBvMDBPID0gbzBPME9PT09vT08wICggJ2dlbnJlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIG8wME8gPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIG8wME8gPSAnJwogICBpZiA5OCAtIDk4OiBJSWlJMUkxMWkxMSAvIG9Pb29Pb08wT28wTyAuIE8wICsgTzBPCiAgdHJ5IDoKICAgaUkgPSBvME8wT09PT29PTzAgKCAnZGF0ZScgKSBbIDAgXSAuIHN0cmluZwogICBpZiBpSSA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgaUkgPSAnJwogICBpZiA0MyAtIDQzOiBpMTFpIC4gaWlpaUlpMTFpIC8gbzBPT08KICBPMDBvME9PMCA9IE5vbmUKICBpZiBvME8wT09PT29PTzAgKCAncmVnZXgnICkgOgogICB0cnkgOgogICAgaTFpSTEgPSBvME8wT09PT29PTzAgKCAncmVnZXgnICkKICAgIE8wMG8wT08wID0gSUlpMUkxaWlpaWkgKCBpMWlJMSApCiAgIGV4Y2VwdCA6CiAgICBwYXNzCiAgICBpZiAzMyAtIDMzOiBPbzBvb08wb28wb08gJSBpSWlpMUkxMUkxSUkxICogb09vb09vTzBPbzBPCiAgdHJ5IDoKICAgaWYgbGVuICggaWkxaWkxMUlJSWlpSSApID4gMSA6CiAgICBpZiA5NSAtIDk1OiBJSSAvIElJCiAgICBJSWlJMUlpID0gMAogICAgTzBPME8wT28gPSBbIF0KICAgIGZvciBPbzBPME9PT29vIGluIGlpMWlpMTFJSUlpaUkgOgogICAgIGlmIGkxMSAuIGdldFNldHRpbmcgKCAnYXNrX3BsYXlsaXN0X2l0ZW1zJyApID09ICd0cnVlJyA6CiAgICAgIGlmIE8wMG8wT08wIDoKICAgICAgIE8wTzBPME9vIC4gYXBwZW5kICggT28wTzBPT09vbyArICcmcmVnZXhzPScgKyBPMDBvME9PMCApCiAgICAgIGVsaWYgYW55ICggeCBpbiBPbzBPME9PT29vIGZvciB4IGluIElpaUlJSTExMWlJICkgYW5kIE9vME8wT09Pb28gLiBzdGFydHN3aXRoICggJ2h0dHAnICkgOgogICAgICAgTzBPME8wT28gLiBhcHBlbmQgKCBPbzBPME9PT29vICsgJyZtb2RlPTE5JyApCiAgICAgZWxzZSA6CiAgICAgIE8wTzBPME9vIC4gYXBwZW5kICggT28wTzBPT09vbyApCiAgICBpZiBpMTEgLiBnZXRTZXR0aW5nICggJ2FkZF9wbGF5bGlzdCcgKSA9PSAiZmFsc2UiIDoKICAgICBmb3IgT28wTzBPT09vbyBpbiBpaTFpaTExSUlJaWlJIDoKICAgICAgSUlpSTFJaSArPSAxCiAgICAgIHByaW50ICdBRERMSU5LIDEnCiAgICAgIGkxaSAoIE9vME8wT09Pb28gLCAnJXMpICVzJyAlICggSUlpSTFJaSAsIE8wME8wb09PMDBPMDAgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSApICwgSUlpICwgb08wME9Pb08wMCAsIE9vT28gLCBvMDBPICwgaUkgLCBUcnVlICwgTzBPME8wT28gLCBPMDBvME9PMCAsIEkxMWlpSTFpMSApCiAgICBlbHNlIDoKICAgICBpMWkgKCAnJyAsIE8wME8wb09PMDBPMDAgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSAsIElJaSAsIG9PMDBPT29PMDAgLCBPb09vICwgbzAwTyAsIGlJICwgVHJ1ZSAsIE8wTzBPME9vICwgTzAwbzBPTzAgLCBJMTFpaUkxaTEgKQogICBlbHNlIDoKICAgIGlmIGlpIDoKICAgICBvbzBvb29vb08wICggTzAwTzBvT08wME8wMCAuIGVuY29kZSAoICd1dGYtOCcgKSAsIG9PIFsgMCBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMSAsIElJaSAsIGZhbmFydCAsIE9vT28gLCBvMDBPICwgaUkgLCBOb25lICwgJ3NvdXJjZScgKQogICAgZWxpZiBPMG9PbzAwbyA6CiAgICAgb28wb29vb29PMCAoIE8wME8wb09PMDBPMDAgLiBlbmNvZGUgKCAndXRmLTgnICkgLCBvTyBbIDAgXSAsIDUzICwgSUlpICwgZmFuYXJ0ICwgT29PbyAsIG8wME8gLCBpSSAsIE5vbmUgLCAnc291cmNlJyApCiAgICBlbGlmIGlpMWlpMTFJSUlpaUkgWyAwIF0gLiBmaW5kICggJ3N1YmxpbmsnICkgPiAwIDoKICAgICBvbzBvb29vb08wICggTzAwTzBvT08wME8wMCAuIGVuY29kZSAoICd1dGYtOCcgKSAsIGlpMWlpMTFJSUlpaUkgWyAwIF0gLCAzMCAsIElJaSAsIG9PMDBPT29PMDAgLCBPb09vICwgTzAwbzBPTzAgLCAnJyAsICcnICwgJycgKQogICAgIGlmIDcwIC0gNzA6IE8wTyAlIGlpaWlJaTExaSArIElpMUkgLyBPMDBvT29Pb08wbzBPICUgTzAKICAgIGVsc2UgOgogICAgIGkxaSAoIGlpMWlpMTFJSUlpaUkgWyAwIF0gLCBPMDBPMG9PTzAwTzAwIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgLCBJSWkgLCBvTzAwT09vTzAwICwgT29PbyAsIG8wME8gLCBpSSAsIFRydWUgLCBOb25lICwgTzAwbzBPTzAgLCBJMTFpaUkxaTEgKQogICAgIGlmIDEwMCAtIDEwMDogSWlJaTExaUlJaTFJaSArIElpMUkgKiBJaUlpMTFpSUlpMUlpCiAgICAgaWYgODAgLSA4MDogSWlJaTExaUlJaTFJaSAqIE8wIC0gTzAwb09vT29PMG8wTwogIGV4Y2VwdCA6CiAgIE9PICggJ1RoZXJlIHdhcyBhIHByb2JsZW0gYWRkaW5nIGl0ZW0gLSAnICsgTzAwTzBvT08wME8wMCAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkKIHByaW50ICdGSU5JU0ggR0VUIElURU1TICoqKioqJwogaWYgNjYgLSA2NjogaTExaUlpaUlpaSAtIElpMUkgKiBJSWlJMUkxMWkxMQpkZWYgSUlpMUkxaWlpaWkgKCByZWdfaXRlbSApIDoKIHRyeSA6CiAgTzAwbzBPTzAgPSB7IH0KICBmb3IgT28wTzBPT09vbyBpbiByZWdfaXRlbSA6CiAgIE8wMG8wT08wIFsgT28wTzBPT09vbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gPSB7IH0KICAgaWYgNzYgLSA3NjogaTExaUlpaUlpaSArIElpSWkxMWlJSWkxSWkgLyBvME9PTyAtIE8wTyAtIE8wMG9Pb09vTzBvME8gKyBvME9PTwogICB0cnkgOgogICAgTzAwbzBPTzAgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdleHByZScgXSA9IE9vME8wT09Pb28gKCAnZXhwcmVzJyApIFsgMCBdIC4gc3RyaW5nCiAgICBpZiBub3QgTzAwbzBPTzAgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdleHByZScgXSA6CiAgICAgTzAwbzBPTzAgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdleHByZScgXSA9ICcnCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gTm8gUmVmZXJlciAtLSIgKQogICBPMDBvME9PMCBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3BhZ2UnIF0gPSBPbzBPME9PT29vICggJ3BhZ2UnICkgWyAwIF0gLiBzdHJpbmcKICAgdHJ5IDoKICAgIE8wMG8wT08wIFsgT28wTzBPT09vbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAncmVmZXInIF0gPSBPbzBPME9PT29vICggJ3JlZmVyZXInICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIE9PICggIlJlZ2V4OiAtLSBObyBSZWZlcmVyIC0tIiApCiAgIHRyeSA6CiAgICBPMDBvME9PMCBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2Nvbm5lY3Rpb24nIF0gPSBPbzBPME9PT29vICggJ2Nvbm5lY3Rpb24nICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIE9PICggIlJlZ2V4OiAtLSBObyBjb25uZWN0aW9uIC0tIiApCiAgICBpZiA1MSAtIDUxOiBpSWlpMUkxMUkxSUkxIC4gSUkgKyBpSWlpMUkxMUkxSUkxCiAgIHRyeSA6CiAgICBPMDBvME9PMCBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ25vdHBsYXlhYmxlJyBdID0gT28wTzBPT09vbyAoICdub3RwbGF5YWJsZScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgT08gKCAiUmVnZXg6IC0tIE5vIG5vdHBsYXlhYmxlIC0tIiApCiAgICBpZiA5NSAtIDk1OiBvT29vT29PME9vME8KICAgdHJ5IDoKICAgIE8wMG8wT08wIFsgT28wTzBPT09vbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnbm9yZWRpcmVjdCcgXSA9IE9vME8wT09Pb28gKCAnbm9yZWRpcmVjdCcgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgT08gKCAiUmVnZXg6IC0tIE5vIG5vcmVkaXJlY3QgLS0iICkKICAgdHJ5IDoKICAgIE8wMG8wT08wIFsgT28wTzBPT09vbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnb3JpZ2luJyBdID0gT28wTzBPT09vbyAoICdvcmlnaW4nICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIE9PICggIlJlZ2V4OiAtLSBObyBvcmlnaW4gLS0iICkKICAgdHJ5IDoKICAgIE8wMG8wT08wIFsgT28wTzBPT09vbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnaW5jbHVkZWhlYWRlcnMnIF0gPSBPbzBPME9PT29vICggJ2luY2x1ZGVoZWFkZXJzJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gTm8gaW5jbHVkZWhlYWRlcnMgLS0iICkKICAgIGlmIDQ2IC0gNDY6IG9vMDAwICsgTzBPCiAgIHRyeSA6CiAgICBPMDBvME9PMCBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3gtcmVxJyBdID0gT28wTzBPT09vbyAoICd4LXJlcScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgT08gKCAiUmVnZXg6IC0tIE5vIHgtcmVxIC0tIiApCiAgIHRyeSA6CiAgICBPMDBvME9PMCBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3gtZm9yd2FyZCcgXSA9IE9vME8wT09Pb28gKCAneC1mb3J3YXJkJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gTm8geC1mb3J3YXJkIC0tIiApCiAgICBpZiA3MCAtIDcwOiBPMG9vME9PMCAvIGlJaWkxSTExSTFJSTEKICAgdHJ5IDoKICAgIE8wMG8wT08wIFsgT28wTzBPT09vbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnYWdlbnQnIF0gPSBPbzBPME9PT29vICggJ2FnZW50JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gTm8gVXNlciBBZ2VudCAtLSIgKQogICB0cnkgOgogICAgTzAwbzBPTzAgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdwb3N0JyBdID0gT28wTzBPT09vbyAoICdwb3N0JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gTm90IGEgcG9zdCIgKQogICB0cnkgOgogICAgTzAwbzBPTzAgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdyYXdwb3N0JyBdID0gT28wTzBPT09vbyAoICdyYXdwb3N0JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gTm90IGEgcmF3cG9zdCIgKQogICB0cnkgOgogICAgTzAwbzBPTzAgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdodG1sdW5lc2NhcGUnIF0gPSBPbzBPME9PT29vICggJ2h0bWx1bmVzY2FwZScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgT08gKCAiUmVnZXg6IC0tIE5vdCBhIGh0bWx1bmVzY2FwZSIgKQogICAgaWYgODUgLSA4NTogT29vb29vb29PTyAlIGkxSUlpICogT29vb29vb29PTyAvIG8wT09PCiAgICBpZiA5NiAtIDk2OiBPb29vb29vb09PICsgaWlpaUlpMTFpCiAgIHRyeSA6CiAgICBPMDBvME9PMCBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3JlYWRjb29raWVvbmx5JyBdID0gT28wTzBPT09vbyAoICdyZWFkY29va2llb25seScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgT08gKCAiUmVnZXg6IC0tIE5vdCBhIHJlYWRDb29raWVPbmx5IiApCiAgICBpZiA0NCAtIDQ0OiBpaWlpSWkxMWkKICAgdHJ5IDoKICAgIE8wMG8wT08wIFsgT28wTzBPT09vbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnY29va2llamFyJyBdID0gT28wTzBPT09vbyAoICdjb29raWVqYXInICkgWyAwIF0gLiBzdHJpbmcKICAgIGlmIG5vdCBPMDBvME9PMCBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2Nvb2tpZWphcicgXSA6CiAgICAgTzAwbzBPTzAgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdjb29raWVqYXInIF0gPSAnJwogICBleGNlcHQgOgogICAgT08gKCAiUmVnZXg6IC0tIE5vdCBhIGNvb2tpZUphciIgKQogICB0cnkgOgogICAgTzAwbzBPTzAgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdzZXRjb29raWUnIF0gPSBPbzBPME9PT29vICggJ3NldGNvb2tpZScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgT08gKCAiUmVnZXg6IC0tIE5vdCBhIHNldGNvb2tpZSIgKQogICB0cnkgOgogICAgTzAwbzBPTzAgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdhcHBlbmRjb29raWUnIF0gPSBPbzBPME9PT29vICggJ2FwcGVuZGNvb2tpZScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgT08gKCAiUmVnZXg6IC0tIE5vdCBhIGFwcGVuZGNvb2tpZSIgKQogICAgaWYgMjAgLSAyMDogaWlpMUkxSSArIE8wMG9Pb09vTzBvME8gLyBPMCAlIGlJaWkxSTExSTFJSTEKICAgdHJ5IDoKICAgIE8wMG8wT08wIFsgT28wTzBPT09vbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnaWdub3JlY2FjaGUnIF0gPSBPbzBPME9PT29vICggJ2lnbm9yZWNhY2hlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gbm8gaWdub3JlY2FjaGUiICkKICAgIGlmIDg4IC0gODg6IG9vMDAwIC8gaTExaQogICAgaWYgODcgLSA4NzogbzBPT08gLSBvME9PTyAtIE8wb28wT08wICsgaWlpaUlpMTFpCiAgICBpZiA4MiAtIDgyOiBpaWlpSWkxMWkgLyBpSWlpMUkxMUkxSUkxIC4gb09vb09vTzBPbzBPIC4gSWkxSSAvIElpSWkxMWlJSWkxSWkKICAgIGlmIDQyIC0gNDI6IElJaUkxSTExaTExCiAgICBpZiAxOSAtIDE5OiBpaWlpSWkxMWkgJSBvME9PTyAqIGlJaWkxSTExSTFJSTEgKyBvT29vT29PME9vME8KICBPMDBvME9PMCA9IHVybGxpYiAuIHF1b3RlICggcmVwciAoIE8wMG8wT08wICkgKQogIHJldHVybiBPMDBvME9PMAogIGlmIDQ2IC0gNDY6IElJaUkxSTExaTExCiBleGNlcHQgOgogIE8wMG8wT08wID0gTm9uZQogIE9PICggJ3JlZ2V4IEVycm9yOiAnICsgTzAwTzBvT08wME8wMCAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkKICBpZiAxIC0gMTogTzBvbzBPTzAKZGVmIE8wTzBPb28gKCB1cmwgKSA6CiB0cnkgOgogIGZvciBPbzBPME9PT29vIGluIHJhbmdlICggMSAsIDUxICkgOgogICBPb28wb09vb28wID0gb09vTzAgKCB1cmwgKQogICBpZiAiRVhULVgtU1RSRUFNLUlORiIgaW4gT29vMG9Pb29vMCA6IHJldHVybiB1cmwKICAgaWYgbm90ICJFWFRNM1UiIGluIE9vbzBvT29vbzAgOiByZXR1cm4KICAgeGJtYyAuIHNsZWVwICggMjAwMCApCiAgcmV0dXJuCiBleGNlcHQgOgogIHJldHVybgogIGlmIDc3IC0gNzc6IGlJaWkxSTExSTFJSTEgLiBPMG9vME9PMCAlIE8wb28wT08wICsgaTExaUlpaUlpaQogIGlmIDcyIC0gNzI6IGlJaWkxSTExSTFJSTEgKiBPMDBvT29Pb08wbzBPICUgSUkgLyBPME8KZGVmIEkxMWkxSUkgKCByZWdleHMgLCB1cmwgLCBjb29raWVKYXIgPSBOb25lICwgZm9yQ29va2llSmFyT25seSA9IEZhbHNlICwgcmVjdXJzaXZlQ2FsbCA9IEZhbHNlICwgY2FjaGVkUGFnZXMgPSB7IH0gLCByYXdQb3N0ID0gRmFsc2UgLCBjb29raWVfamFyX2ZpbGUgPSBOb25lICkgOgogaWYgbm90IHJlY3Vyc2l2ZUNhbGwgOgogIHJlZ2V4cyA9IGV2YWwgKCB1cmxsaWIgLiB1bnF1b3RlICggcmVnZXhzICkgKQogIGlmIDcyIC0gNzI6IGlJaWkxSTExSTFJSTEgLiBpMUlJaSAvIElJaUkxSTExaTExIC4gaTExaQogIGlmIDU0IC0gNTQ6IGkxMWkgJSBpMTFpCiBPbzAwMDAwbzBvID0gcmUgLiBjb21waWxlICggJ1wkZG9yZWdleFxbKFteXF1dKilcXScgKSAuIGZpbmRhbGwgKCB1cmwgKQogaWYgNzIgLSA3MjogSWkxSSAlIG8wT09PICsgTzBPIC8gaWlpaUlpMTFpICsgT28wb29PMG9vMG9PCiBJMUkxaSA9IFRydWUKIGlmIDEgLSAxOiBpaWkxSTFJICUgSWkxSSArIE8wICsgaTFJSWkgLSBPME8KIGlmIDIyIC0gMjI6IG9Pb29Pb08wT28wTyAlIG8wT09PCiBpZiA1NyAtIDU3OiBJaTFJICsgTzAgLiBPMDBvT29Pb08wbzBPCiBpZiA0NiAtIDQ2OiBPbzBvb08wb28wb08KIGZvciBpaTFpSWkxaUlpSTFpIGluIE9vMDAwMDBvMG8gOgogIGlmIGlpMWlJaTFpSWlJMWkgaW4gcmVnZXhzIDoKICAgaWYgNDAgLSA0MDogaTFJSWkgJSBJaTFJCiAgIG9vbzBvMDAgPSByZWdleHMgWyBpaTFpSWkxaUlpSTFpIF0KICAgaWYgOTkgLSA5OTogTzAgLiBpaWkxSTFJICsgaUlpaTFJMTFJMUlJMQogICBJMTFJSWkgPSBGYWxzZQogICBpZiA2NiAtIDY2OiBpaWlpSWkxMWkgJSBPME8gLiBJaTFJCiAgIGlmIDg2IC0gODY6IGlJaWkxSTExSTFJSTEKICAgaWYgJ2Nvb2tpZWphcicgaW4gb29vMG8wMCA6CiAgICBpZiA3NiAtIDc2OiBJSSArIGlJaWkxSTExSTFJSTEgLyBPMCAvIG8wT09PCiAgICBJMTFJSWkgPSBvb28wbzAwIFsgJ2Nvb2tpZWphcicgXQogICAgaWYgJyRkb3JlZ2V4JyBpbiBJMTFJSWkgOgogICAgIGNvb2tpZUphciA9IEkxMWkxSUkgKCByZWdleHMgLCBvb28wbzAwIFsgJ2Nvb2tpZWphcicgXSAsIGNvb2tpZUphciAsIFRydWUgLCBUcnVlICwgY2FjaGVkUGFnZXMgKQogICAgIEkxMUlJaSA9IFRydWUKICAgIGVsc2UgOgogICAgIEkxMUlJaSA9IFRydWUKICAgICBpZiA2MSAtIDYxOiBJaTFJICUgSWkxSSAqIElpSWkxMWlJSWkxSWkgLyBJaUlpMTFpSUlpMUlpCiAgIGlmIEkxMUlJaSA6CiAgICBpZiBjb29raWVKYXIgPT0gTm9uZSA6CiAgICAgaWYgNzUgLSA3NTogT28wb29PMG9vMG9PIC4gSUkKICAgICBjb29raWVfamFyX2ZpbGUgPSBOb25lCiAgICAgaWYgJ29wZW5bJyBpbiBvb28wbzAwIFsgJ2Nvb2tpZWphcicgXSA6CiAgICAgIGNvb2tpZV9qYXJfZmlsZSA9IG9vbzBvMDAgWyAnY29va2llamFyJyBdIC4gc3BsaXQgKCAnb3BlblsnICkgWyAxIF0gLiBzcGxpdCAoICddJyApIFsgMCBdCiAgICAgIGlmIDUwIC0gNTA6IG9vMDAwCiAgICAgY29va2llSmFyID0gTzAwbzBPTzAwMDBvbyAoIGNvb2tpZV9qYXJfZmlsZSApCiAgICAgaWYgY29va2llX2phcl9maWxlIDoKICAgICAgaTFPTzBvT09vbyAoIGNvb2tpZUphciAsIGNvb2tpZV9qYXJfZmlsZSApCiAgICAgIGlmIDUyIC0gNTI6IElpSWkxMWlJSWkxSWkgJSBJSWlJMUkxMWkxMQogICAgICBpZiA2NCAtIDY0OiBPMCAlIGlpaTFJMUkgJSBPMCAqIE8wTyAuIGlpaWlJaTExaSArIG9Pb29Pb08wT28wTwogICAgICBpZiA3NSAtIDc1OiBpaWkxSTFJIC4gT29vb29vb29PTyAlIElpSWkxMWlJSWkxSWkgKiBpaWkxSTFJICUgT29vb29vb29PTwogICAgZWxpZiAnc2F2ZVsnIGluIG9vbzBvMDAgWyAnY29va2llamFyJyBdIDoKICAgICBjb29raWVfamFyX2ZpbGUgPSBvb28wbzAwIFsgJ2Nvb2tpZWphcicgXSAuIHNwbGl0ICggJ3NhdmVbJyApIFsgMSBdIC4gc3BsaXQgKCAnXScgKSBbIDAgXQogICAgIEkxMWkxID0gb3MgLiBwYXRoIC4gam9pbiAoIE9vMG8wMDAwbzBvMCAsIGNvb2tpZV9qYXJfZmlsZSApCiAgICAgcHJpbnQgJ2NvbXBsZXRlX3BhdGgnICwgSTExaTEKICAgICBpMU9PMG9PT29vICggY29va2llSmFyICwgY29va2llX2phcl9maWxlICkKICAgICBpZiAyOCAtIDI4OiBpaWkxSTFJCiAgICAgaWYgNTggLSA1ODogb28wMDAKICAgaWYgb29vMG8wMCBbICdwYWdlJyBdIGFuZCAnJGRvcmVnZXgnIGluIG9vbzBvMDAgWyAncGFnZScgXSA6CiAgICBvb28wbzAwIFsgJ3BhZ2UnIF0gPSBJMTFpMUlJICggcmVnZXhzICwgb29vMG8wMCBbICdwYWdlJyBdICwgY29va2llSmFyICwgcmVjdXJzaXZlQ2FsbCA9IFRydWUgLCBjYWNoZWRQYWdlcyA9IGNhY2hlZFBhZ2VzICkKICAgIGlmIDM3IC0gMzc6IElJaUkxSTExaTExIC0gaUlpaTFJMTFJMUlJMSAvIG8wT09PCiAgIGlmICdzZXRjb29raWUnIGluIG9vbzBvMDAgYW5kIG9vbzBvMDAgWyAnc2V0Y29va2llJyBdIGFuZCAnJGRvcmVnZXgnIGluIG9vbzBvMDAgWyAnc2V0Y29va2llJyBdIDoKICAgIG9vbzBvMDAgWyAnc2V0Y29va2llJyBdID0gSTExaTFJSSAoIHJlZ2V4cyAsIG9vbzBvMDAgWyAnc2V0Y29va2llJyBdICwgY29va2llSmFyICwgcmVjdXJzaXZlQ2FsbCA9IFRydWUgLCBjYWNoZWRQYWdlcyA9IGNhY2hlZFBhZ2VzICkKICAgaWYgJ2FwcGVuZGNvb2tpZScgaW4gb29vMG8wMCBhbmQgb29vMG8wMCBbICdhcHBlbmRjb29raWUnIF0gYW5kICckZG9yZWdleCcgaW4gb29vMG8wMCBbICdhcHBlbmRjb29raWUnIF0gOgogICAgb29vMG8wMCBbICdhcHBlbmRjb29raWUnIF0gPSBJMTFpMUlJICggcmVnZXhzICwgb29vMG8wMCBbICdhcHBlbmRjb29raWUnIF0gLCBjb29raWVKYXIgLCByZWN1cnNpdmVDYWxsID0gVHJ1ZSAsIGNhY2hlZFBhZ2VzID0gY2FjaGVkUGFnZXMgKQogICAgaWYgNzMgLSA3MzogaTExaUlpaUlpaSAtIE9vMG9vTzBvbzBvTwogICAgaWYgMjUgLSAyNTogT29vb29vb29PTyArIE9vMG9vTzBvbzBvTyAqIG8wT09PCiAgIGlmICdwb3N0JyBpbiBvb28wbzAwIGFuZCAnJGRvcmVnZXgnIGluIG9vbzBvMDAgWyAncG9zdCcgXSA6CiAgICBvb28wbzAwIFsgJ3Bvc3QnIF0gPSBJMTFpMUlJICggcmVnZXhzICwgb29vMG8wMCBbICdwb3N0JyBdICwgY29va2llSmFyICwgcmVjdXJzaXZlQ2FsbCA9IFRydWUgLCBjYWNoZWRQYWdlcyA9IGNhY2hlZFBhZ2VzICkKICAgIHByaW50ICdwb3N0IGlzIG5vdycgLCBvb28wbzAwIFsgJ3Bvc3QnIF0KICAgIGlmIDkyIC0gOTI6IG9Pb29Pb08wT28wTyArIGlpaTFJMUkgKyBPMCAvIElpSWkxMWlJSWkxSWkgKyBJMWkxaUkxaQogICBpZiAncmF3cG9zdCcgaW4gb29vMG8wMCBhbmQgJyRkb3JlZ2V4JyBpbiBvb28wbzAwIFsgJ3Jhd3Bvc3QnIF0gOgogICAgb29vMG8wMCBbICdyYXdwb3N0JyBdID0gSTExaTFJSSAoIHJlZ2V4cyAsIG9vbzBvMDAgWyAncmF3cG9zdCcgXSAsIGNvb2tpZUphciAsIHJlY3Vyc2l2ZUNhbGwgPSBUcnVlICwgY2FjaGVkUGFnZXMgPSBjYWNoZWRQYWdlcyAsIHJhd1Bvc3QgPSBUcnVlICkKICAgIGlmIDE4IC0gMTg6IElJICogb28wMDAgLiBPMG9vME9PMCAvIG8wT09PIC8gaTExaUlpaUlpaQogICAgaWYgMjEgLSAyMTogaWlpaUlpMTFpIC8gbzBPT08gKyBPMDBvT29Pb08wbzBPICsgT29vb29vb29PTwogICBpZiAncmF3cG9zdCcgaW4gb29vMG8wMCBhbmQgJyRlcG9jdGltZSQnIGluIG9vbzBvMDAgWyAncmF3cG9zdCcgXSA6CiAgICBvb28wbzAwIFsgJ3Jhd3Bvc3QnIF0gPSBvb28wbzAwIFsgJ3Jhd3Bvc3QnIF0gLiByZXBsYWNlICggJyRlcG9jdGltZSQnICwgT29Pb0kxaUkxMWlJaUlpMSAoICkgKQogICAgaWYgNzIgLSA3MjogSTFpMWlJMWkKICAgaWYgJ3Jhd3Bvc3QnIGluIG9vbzBvMDAgYW5kICckZXBvY3RpbWUyJCcgaW4gb29vMG8wMCBbICdyYXdwb3N0JyBdIDoKICAgIG9vbzBvMDAgWyAncmF3cG9zdCcgXSA9IG9vbzBvMDAgWyAncmF3cG9zdCcgXSAuIHJlcGxhY2UgKCAnJGVwb2N0aW1lMiQnICwgT08wb29vMG9PTyAoICkgKQogICAgaWYgOTcgLSA5Nzogb09vb09vTzBPbzBPIC8gTzBvbzBPTzAKICAgIGlmIDcxIC0gNzE6IGkxMWkgLyBpMUlJaSAuIG8wT09PICUgT29vb29vb29PTyAuIG9vMDAwCiAgIGlpMTFpMWlJSUkgPSAnJwogICBpZiBvb28wbzAwIFsgJ3BhZ2UnIF0gYW5kIG9vbzBvMDAgWyAncGFnZScgXSBpbiBjYWNoZWRQYWdlcyBhbmQgbm90ICdpZ25vcmVjYWNoZScgaW4gb29vMG8wMCBhbmQgZm9yQ29va2llSmFyT25seSA9PSBGYWxzZSA6CiAgICBpaTExaTFpSUlJID0gY2FjaGVkUGFnZXMgWyBvb28wbzAwIFsgJ3BhZ2UnIF0gXQogICBlbHNlIDoKICAgIGlmIG9vbzBvMDAgWyAncGFnZScgXSBhbmQgbm90IG9vbzBvMDAgWyAncGFnZScgXSA9PSAnJyBhbmQgb29vMG8wMCBbICdwYWdlJyBdIC4gc3RhcnRzd2l0aCAoICdodHRwJyApIDoKICAgICBpZiAnJGVwb2N0aW1lJCcgaW4gb29vMG8wMCBbICdwYWdlJyBdIDoKICAgICAgb29vMG8wMCBbICdwYWdlJyBdID0gb29vMG8wMCBbICdwYWdlJyBdIC4gcmVwbGFjZSAoICckZXBvY3RpbWUkJyAsIE9vT29JMWlJMTFpSWlJaTEgKCApICkKICAgICBpZiAnJGVwb2N0aW1lMiQnIGluIG9vbzBvMDAgWyAncGFnZScgXSA6CiAgICAgIG9vbzBvMDAgWyAncGFnZScgXSA9IG9vbzBvMDAgWyAncGFnZScgXSAuIHJlcGxhY2UgKCAnJGVwb2N0aW1lMiQnICwgT08wb29vMG9PTyAoICkgKQogICAgICBpZiA0MSAtIDQxOiBpMUlJaSAqIGkxMWkgLyBPb29vb29vb09PIC4gSWkxSQogICAgICBpZiA4MyAtIDgzOiBPMG9vME9PMCAuIE8wIC8gSUlpSTFJMTFpMTEgLyBJaTFJIC0gaTExaQogICAgIG9PMG9PMCA9IG9vbzBvMDAgWyAncGFnZScgXSAuIHNwbGl0ICggJ3wnICkKICAgICBpMWkxSUlJSWkxaSA9IG9PMG9PMCBbIDAgXQogICAgIElpMTFpaUkgPSBOb25lCiAgICAgaWYgbGVuICggb08wb08wICkgPiAxIDoKICAgICAgSWkxMWlpSSA9IG9PMG9PMCBbIDEgXQogICAgIG9PbyA9IHVybGxpYjIgLiBSZXF1ZXN0ICggaTFpMUlJSUlpMWkgKQogICAgIG9PbyAuIGFkZF9oZWFkZXIgKCAnVXNlci1BZ2VudCcgLCAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4xOyBydjoxNC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzE0LjAuMScgKQogICAgIGlmICdyZWZlcicgaW4gb29vMG8wMCA6CiAgICAgIG9PbyAuIGFkZF9oZWFkZXIgKCAnUmVmZXJlcicgLCBvb28wbzAwIFsgJ3JlZmVyJyBdICkKICAgICBpZiAnYWdlbnQnIGluIG9vbzBvMDAgOgogICAgICBvT28gLiBhZGRfaGVhZGVyICggJ1VzZXItYWdlbnQnICwgb29vMG8wMCBbICdhZ2VudCcgXSApCiAgICAgaWYgJ3gtcmVxJyBpbiBvb28wbzAwIDoKICAgICAgb09vIC4gYWRkX2hlYWRlciAoICdYLVJlcXVlc3RlZC1XaXRoJyAsIG9vbzBvMDAgWyAneC1yZXEnIF0gKQogICAgIGlmICd4LWZvcndhcmQnIGluIG9vbzBvMDAgOgogICAgICBvT28gLiBhZGRfaGVhZGVyICggJ1gtRm9yd2FyZGVkLUZvcicgLCBvb28wbzAwIFsgJ3gtZm9yd2FyZCcgXSApCiAgICAgaWYgJ3NldGNvb2tpZScgaW4gb29vMG8wMCA6CiAgICAgIHByaW50ICdhZGRpbmcgY29va2llJyAsIG9vbzBvMDAgWyAnc2V0Y29va2llJyBdCiAgICAgIG9PbyAuIGFkZF9oZWFkZXIgKCAnQ29va2llJyAsIG9vbzBvMDAgWyAnc2V0Y29va2llJyBdICkKICAgICBpZiAnYXBwZW5kY29va2llJyBpbiBvb28wbzAwIDoKICAgICAgcHJpbnQgJ2FwcGVuZGluZyBjb29raWUgdG8gY29va2llamFyJyAsIG9vbzBvMDAgWyAnYXBwZW5kY29va2llJyBdCiAgICAgIElJaTFpaWlpMWlJID0gb29vMG8wMCBbICdhcHBlbmRjb29raWUnIF0KICAgICAgSUlpMWlpaWkxaUkgPSBJSWkxaWlpaTFpSSAuIHNwbGl0ICggJzsnICkKICAgICAgZm9yIGlJaWlpaSBpbiBJSWkxaWlpaTFpSSA6CiAgICAgICBPMDAwME9PTzAgLCBvb28wID0gaUlpaWlpIC4gc3BsaXQgKCAnPScgKQogICAgICAgb08wMDBvT28wMG8wbyAsIE8wMDAwT09PMCA9IE8wMDAwT09PMCAuIHNwbGl0ICggJzonICkKICAgICAgIE8wMG9PMCA9IGNvb2tpZWxpYiAuIENvb2tpZSAoIHZlcnNpb24gPSAwICwgbmFtZSA9IE8wMDAwT09PMCAsIHZhbHVlID0gb29vMCAsIHBvcnQgPSBOb25lICwgcG9ydF9zcGVjaWZpZWQgPSBGYWxzZSAsIGRvbWFpbiA9IG9PMDAwb09vMDBvMG8gLCBkb21haW5fc3BlY2lmaWVkID0gRmFsc2UgLCBkb21haW5faW5pdGlhbF9kb3QgPSBGYWxzZSAsIHBhdGggPSAnLycgLCBwYXRoX3NwZWNpZmllZCA9IFRydWUgLCBzZWN1cmUgPSBGYWxzZSAsIGV4cGlyZXMgPSBOb25lICwgZGlzY2FyZCA9IFRydWUgLCBjb21tZW50ID0gTm9uZSAsIGNvbW1lbnRfdXJsID0gTm9uZSAsIHJlc3QgPSB7ICdIdHRwT25seScgOiBOb25lIH0gLCByZmMyMTA5ID0gRmFsc2UgKQogICAgICAgY29va2llSmFyIC4gc2V0X2Nvb2tpZSAoIE8wMG9PMCApCiAgICAgICBpZiA3MCAtIDcwOiBpaWkxSTFJIC4gbzBPT08gKiBPb29vb29vb09PIC0gT28wb29PMG9vMG9PICogb09vb09vTzBPbzBPICsgb28wMDAKICAgICAgIGlmIDEwIC0gMTA6IElpSWkxMWlJSWkxSWkgLyBpMTFpSWlpSWlpCiAgICAgICBpZiA5MiAtIDkyOiBpaWkxSTFJIC4gSTFpMWlJMWkKICAgICAgIGlmIDg1IC0gODU6IG8wT09PIC4gSTFpMWlJMWkKICAgICBpZiAnb3JpZ2luJyBpbiBvb28wbzAwIDoKICAgICAgb09vIC4gYWRkX2hlYWRlciAoICdPcmlnaW4nICwgb29vMG8wMCBbICdvcmlnaW4nIF0gKQogICAgIGlmIElpMTFpaUkgOgogICAgICBJaTExaWlJID0gSWkxMWlpSSAuIHNwbGl0ICggJyYnICkKICAgICAgZm9yIGlJaWlpaSBpbiBJaTExaWlJIDoKICAgICAgIE8wMDAwT09PMCAsIG9vbzAgPSBpSWlpaWkgLiBzcGxpdCAoICc9JyApCiAgICAgICBvT28gLiBhZGRfaGVhZGVyICggTzAwMDBPT08wICwgb29vMCApCiAgICAgICBpZiA3OCAtIDc4OiBJSSAqIEkxaTFpSTFpICsgaUlpaTFJMTFJMUlJMSArIGlJaWkxSTExSTFJSTEgLyBJMWkxaUkxaSAuIE8wMG9Pb09vTzBvME8KICAgICAgIGlmIDk3IC0gOTc6IElJIC8gSTFpMWlJMWkgJSBpMUlJaSAlIG8wT09PCiAgICAgaWYgbm90IGNvb2tpZUphciA9PSBOb25lIDoKICAgICAgaWYgMTggLSAxODogaUlpaTFJMTFJMUlJMSAlIGlpaTFJMUkKICAgICAgTzAwb08wbzBvMG8wbzAgPSB1cmxsaWIyIC4gSFRUUENvb2tpZVByb2Nlc3NvciAoIGNvb2tpZUphciApCiAgICAgIEkxSWlpaWlpaSA9IHVybGxpYjIgLiBidWlsZF9vcGVuZXIgKCBPMDBvTzBvMG8wbzBvMCAsIHVybGxpYjIgLiBIVFRQQmFzaWNBdXRoSGFuZGxlciAoICkgLCB1cmxsaWIyIC4gSFRUUEhhbmRsZXIgKCApICkKICAgICAgSTFJaWlpaWlpID0gdXJsbGliMiAuIGluc3RhbGxfb3BlbmVyICggSTFJaWlpaWlpICkKICAgICAgaWYgJ25vcmVkaXJlY3QnIGluIG9vbzBvMDAgOgogICAgICAgSTFJSUlpSTFJMWlpMSA9IHVybGxpYjIgLiBidWlsZF9vcGVuZXIgKCBJaWlpSWlJMWlJaUkxICkKICAgICAgIEkxSWlpaWlpaSA9IHVybGxpYjIgLiBpbnN0YWxsX29wZW5lciAoIEkxSUlJaUkxSTFpaTEgKQogICAgICAgaWYgMzAgLSAzMDogTzAgKiBPb29vb29vb09PCiAgICAgaWYgJ2Nvbm5lY3Rpb24nIGluIG9vbzBvMDAgOgogICAgICBwcmludCAnLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5jb25uZWN0aW9uLy8vLy8vLicgLCBvb28wbzAwIFsgJ2Nvbm5lY3Rpb24nIF0KICAgICAgZnJvbSBrZWVwYWxpdmUgaW1wb3J0IEhUVFBIYW5kbGVyCiAgICAgIEkxaUlJSWkxID0gSFRUUEhhbmRsZXIgKCApCiAgICAgIEkxSWlpaWlpaSA9IHVybGxpYjIgLiBidWlsZF9vcGVuZXIgKCBJMWlJSUlpMSApCiAgICAgIHVybGxpYjIgLiBpbnN0YWxsX29wZW5lciAoIEkxSWlpaWlpaSApCiAgICAgIGlmIDE3IC0gMTc6IGlJaWkxSTExSTFJSTEgLiBPb29vb29vb09PIC8gaWlpMUkxSSAlIGkxMWkgJSBpMUlJaSAvIGkxMWlJaWlJaWkKICAgICAgaWYgNTggLSA1ODogSUlpSTFJMTFpMTEgLiBpMTFpICsgaWlpaUlpMTFpIC0gaTExaUlpaUlpaSAvIGkxMWkgLyBPMAogICAgIG9PT29PbyA9IE5vbmUKICAgICBpZiA4OSAtIDg5OiBpMTFpICsgaTFJSWkgKyBpMTFpCiAgICAgaWYgJ3Bvc3QnIGluIG9vbzBvMDAgOgogICAgICBJaUlJMUlJMTFJID0gb29vMG8wMCBbICdwb3N0JyBdCiAgICAgIGlmICckTGl2ZVN0cmVhbVJlY2FwdGNoYScgaW4gSWlJSTFJSTExSSA6CiAgICAgICAoIE8wT28wME8gLCBPT28wbzAwMG9PICkgPSBvTzBvMDBvT09vb08wICggb29vMG8wMCBbICdwYWdlJyBdICkKICAgICAgIGlmIE8wT28wME8gOgogICAgICAgIElpSUkxSUkxMUkgKz0gJ3JlY2FwdGNoYV9jaGFsbGVuZ2VfZmllbGQ6JyArIE8wT28wME8gKyAnLHJlY2FwdGNoYV9yZXNwb25zZV9maWVsZDonICsgT09vMG8wMDBvTwogICAgICBPT09vTzAwMCA9IElpSUkxSUkxMUkgLiBzcGxpdCAoICcsJyApIDsKICAgICAgb09Pb09vID0geyB9CiAgICAgIGZvciBvT09PTyBpbiBPT09vTzAwMCA6CiAgICAgICBPMDAwME9PTzAgPSBvT09PTyAuIHNwbGl0ICggJzonICkgWyAwIF0gOwogICAgICAgb29vMCA9IG9PT09PIC4gc3BsaXQgKCAnOicgKSBbIDEgXSA7CiAgICAgICBvT09vT28gWyBPMDAwME9PTzAgXSA9IG9vbzAKICAgICAgb09Pb09vID0gdXJsbGliIC4gdXJsZW5jb2RlICggb09Pb09vICkKICAgICAgaWYgNDkgLSA0OTogaTExaSAuIGlpaWlJaTExaSAuIGkxMWlJaWlJaWkgJSBPbzBvb08wb28wb08KICAgICBpZiAncmF3cG9zdCcgaW4gb29vMG8wMCA6CiAgICAgIG9PT29PbyA9IG9vbzBvMDAgWyAncmF3cG9zdCcgXQogICAgICBpZiAnJExpdmVTdHJlYW1SZWNhcHRjaGEnIGluIG9PT29PbyA6CiAgICAgICAoIE8wT28wME8gLCBPT28wbzAwMG9PICkgPSBvTzBvMDBvT09vb08wICggb29vMG8wMCBbICdwYWdlJyBdICkKICAgICAgIGlmIE8wT28wME8gOgogICAgICAgIG9PT29PbyArPSAnJnJlY2FwdGNoYV9jaGFsbGVuZ2VfZmllbGQ9JyArIE8wT28wME8gKyAnJnJlY2FwdGNoYV9yZXNwb25zZV9maWVsZD0nICsgT09vMG8wMDBvTwogICAgICAgIGlmIDM0IC0gMzQ6IEkxaTFpSTFpICUgT28wb29PMG9vMG9PCiAgICAgICAgaWYgMyAtIDM6IGkxMWkgLyBJaTFJICsgT28wb29PMG9vMG9PIC4gSUkgLiBPME8KICAgICAgICBpZiA4MyAtIDgzOiBpaWlpSWkxMWkgKyBPb29vb29vb09PCiAgICAgICAgaWYgMjIgLSAyMjogTzAwb09vT29PMG8wTyAlIE8wb28wT08wICogT29vb29vb29PTyAtIElpSWkxMWlJSWkxSWkgLyBpSWlpMUkxMUkxSUkxCiAgICAgaWYgb09Pb09vIDoKICAgICAgb09vT29PID0gdXJsbGliMiAuIHVybG9wZW4gKCBvT28gLCBvT09vT28gKQogICAgIGVsc2UgOgogICAgICBvT29Pb08gPSB1cmxsaWIyIC4gdXJsb3BlbiAoIG9PbyApCiAgICAgIGlmIDg2IC0gODY6IE9vb29vb29vT08gLiBPMG9vME9PMCAlIG9vMDAwIC8gaWlpMUkxSSAqIE8wb28wT08wIC8gSWlJaTExaUlJaTFJaQogICAgIGlpMTFpMWlJSUkgPSBvT29Pb08gLiByZWFkICggKQogICAgIGlpMTFpMWlJSUkgPSBvT29PT28wMDBvT29PMCAoIGlpMTFpMWlJSUkgKQogICAgIGlmIDg2IC0gODY6IGkxMWkgJSBpMTFpSWlpSWlpICsgTzAwb09vT29PMG8wTyAlIGkxMWlJaWlJaWkKICAgICBpZiAnaW5jbHVkZWhlYWRlcnMnIGluIG9vbzBvMDAgOgogICAgICBpaTExaTFpSUlJICs9IHN0ciAoIG9Pb09vTyAuIGhlYWRlcnMgLiBnZXQgKCAnU2V0LUNvb2tpZScgKSApCiAgICAgIGlmIDkyIC0gOTI6IGkxMWlJaWlJaWkgLSBPMG9vME9PMCAvIElJIC8gaWlpaUlpMTFpCiAgICAgb09vT29PIC4gY2xvc2UgKCApCiAgICAgY2FjaGVkUGFnZXMgWyBvb28wbzAwIFsgJ3BhZ2UnIF0gXSA9IGlpMTFpMWlJSUkKICAgICBpZiA0MyAtIDQzOiBpMTFpICsgSWkxSSArIE8wb28wT08wCiAgICAgaWYgNDAgLSA0MDogSWlJaTExaUlJaTFJaQogICAgIGlmIDY3IC0gNjc6IGlpaWlJaTExaSArIGkxMWkgLSBPMCAuIGlpaWlJaTExaSAqIGkxMWkgKiBpaWkxSTFJCiAgICAgaWYgZm9yQ29va2llSmFyT25seSA6CiAgICAgIHJldHVybiBjb29raWVKYXIKICAgIGVsaWYgb29vMG8wMCBbICdwYWdlJyBdIGFuZCBub3Qgb29vMG8wMCBbICdwYWdlJyBdIC4gc3RhcnRzd2l0aCAoICdodHRwJyApIDoKICAgICBpZiBvb28wbzAwIFsgJ3BhZ2UnIF0gLiBzdGFydHN3aXRoICggJyRweUZ1bmN0aW9uOicgKSA6CiAgICAgIG8wMCA9IE9PMDBPMG9PTyAoIG9vbzBvMDAgWyAncGFnZScgXSAuIHNwbGl0ICggJyRweUZ1bmN0aW9uOicgKSBbIDEgXSAsICcnICwgY29va2llSmFyICkKICAgICAgaWYgZm9yQ29va2llSmFyT25seSA6CiAgICAgICByZXR1cm4gY29va2llSmFyCiAgICAgIGlpMTFpMWlJSUkgPSBvMDAKICAgICBlbHNlIDoKICAgICAgaWkxMWkxaUlJSSA9IG9vbzBvMDAgWyAncGFnZScgXQogICBpZiAnJHB5RnVuY3Rpb246cGxheW1lZGlhKCcgaW4gb29vMG8wMCBbICdleHByZScgXSBvciAnQWN0aXZhdGVXaW5kb3cnIGluIG9vbzBvMDAgWyAnZXhwcmUnIF0gb3IgYW55ICggeCBpbiB1cmwgZm9yIHggaW4gT28gKSA6CiAgICBJMUkxaSA9IEZhbHNlCiAgIGlmICckZG9yZWdleCcgaW4gb29vMG8wMCBbICdleHByZScgXSA6CiAgICBvb28wbzAwIFsgJ2V4cHJlJyBdID0gSTExaTFJSSAoIHJlZ2V4cyAsIG9vbzBvMDAgWyAnZXhwcmUnIF0gLCBjb29raWVKYXIgLCByZWN1cnNpdmVDYWxsID0gVHJ1ZSAsIGNhY2hlZFBhZ2VzID0gY2FjaGVkUGFnZXMgKQogICAgaWYgNCAtIDQ6IE9vb29vb29vT08gLSBpMUlJaSAlIE8wMG9Pb09vTzBvME8gLSBJaTFJICogSWlJaTExaUlJaTFJaQogICAgaWYgODUgLSA4NTogT29vb29vb29PTyAqIGlJaWkxSTExSTFJSTEgLiBPMG9vME9PMCAvIE9vb29vb29vT08gJSBvT29vT29PME9vME8gJSBPMAogICBpZiBub3Qgb29vMG8wMCBbICdleHByZScgXSA9PSAnJyA6CiAgICBwcmludCAnZG9pbmcgaXQgJyAsIG9vbzBvMDAgWyAnZXhwcmUnIF0KICAgIGlmICckTGl2ZVN0cmVhbUNhcHRjaGEnIGluIG9vbzBvMDAgWyAnZXhwcmUnIF0gOgogICAgIG8wMCA9IEkxaWlpICggb29vMG8wMCAsIGlpMTFpMWlJSUkgLCBjb29raWVKYXIgKQogICAgIGlmIDg2IC0gODY6IG8wT09PICogTzAgKiBPbzBvb08wb28wb08KICAgICB1cmwgPSB1cmwgLiByZXBsYWNlICggIiRkb3JlZ2V4WyIgKyBpaTFpSWkxaUlpSTFpICsgIl0iICwgbzAwICkKICAgIGVsaWYgb29vMG8wMCBbICdleHByZScgXSAuIHN0YXJ0c3dpdGggKCAnJHB5RnVuY3Rpb246JyApIDoKICAgICBpZiA1MSAtIDUxOiBpMTFpICsgT28wb29PMG9vMG9PIC4gaTFJSWkgLiBvME9PTyArIG9vMDAwICogb09vb09vTzBPbzBPCiAgICAgbzAwID0gT08wME8wb09PICggb29vMG8wMCBbICdleHByZScgXSAuIHNwbGl0ICggJyRweUZ1bmN0aW9uOicgKSBbIDEgXSAsIGlpMTFpMWlJSUkgLCBjb29raWVKYXIgKQogICAgIGlmICdBY3RpdmF0ZVdpbmRvdycgaW4gb29vMG8wMCBbICdleHByZScgXSA6IHJldHVybgogICAgIHByaW50ICdzdGlsbCBocmUnCiAgICAgcHJpbnQgJ3VybCBrIHZhbCcgLCB1cmwgLCBpaTFpSWkxaUlpSTFpICwgbzAwCiAgICAgaWYgNzIgLSA3MjogaWlpaUlpMTFpICsgaWlpaUlpMTFpIC8gaTExaSAuIE9vb29vb29vT08gJSBPMDBvT29Pb08wbzBPCiAgICAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICIkZG9yZWdleFsiICsgaWkxaUlpMWlJaUkxaSArICJdIiAsIG8wMCApCiAgICBlbHNlIDoKICAgICBpZiBub3QgaWkxMWkxaUlJSSA9PSAnJyA6CiAgICAgIElJSSA9IHJlIC4gY29tcGlsZSAoIG9vbzBvMDAgWyAnZXhwcmUnIF0gKSAuIHNlYXJjaCAoIGlpMTFpMWlJSUkgKQogICAgICBvMDAgPSAnJwogICAgICB0cnkgOgogICAgICAgbzAwID0gSUlJIC4gZ3JvdXAgKCAxICkgLiBzdHJpcCAoICkKICAgICAgZXhjZXB0IDogdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggKQogICAgIGVsc2UgOgogICAgICBvMDAgPSBvb28wbzAwIFsgJ2V4cHJlJyBdCiAgICAgaWYgcmF3UG9zdCA6CiAgICAgIHByaW50ICdyYXdwb3N0JwogICAgICBvMDAgPSB1cmxsaWIgLiBxdW90ZV9wbHVzICggbzAwICkKICAgICBpZiAnaHRtbHVuZXNjYXBlJyBpbiBvb28wbzAwIDoKICAgICAgaWYgNDEgLSA0MTogaTExaUlpaUlpaSArIElJaUkxSTExaTExIC8gb09vb09vTzBPbzBPIC4gT29vb29vb29PTyAlIGlpaWlJaTExaSAlIGkxSUlpCiAgICAgIGltcG9ydCBIVE1MUGFyc2VyCiAgICAgIG8wMCA9IEhUTUxQYXJzZXIgLiBIVE1MUGFyc2VyICggKSAuIHVuZXNjYXBlICggbzAwICkKICAgICB1cmwgPSB1cmwgLiByZXBsYWNlICggIiRkb3JlZ2V4WyIgKyBpaTFpSWkxaUlpSTFpICsgIl0iICwgbzAwICkKICAgICBpZiA3MCAtIDcwOiBJSWlJMUkxMWkxMSAuIE9vb29vb29vT08gLSBPMG9vME9PMAogICBlbHNlIDoKICAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJGRvcmVnZXhbIiArIGlpMWlJaTFpSWlJMWkgKyAiXSIgLCAnJyApCiBpZiAnJGVwb2N0aW1lJCcgaW4gdXJsIDoKICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyRlcG9jdGltZSQnICwgT29Pb0kxaUkxMWlJaUlpMSAoICkgKQogaWYgJyRlcG9jdGltZTIkJyBpbiB1cmwgOgogIHVybCA9IHVybCAuIHJlcGxhY2UgKCAnJGVwb2N0aW1lMiQnICwgT08wb29vMG9PTyAoICkgKQogIGlmIDMwIC0gMzA6IG8wT09PICUgb09vb09vTzBPbzBPCiBpZiAnJEdVSUQkJyBpbiB1cmwgOgogIGltcG9ydCB1dWlkCiAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICckR1VJRCQnICwgc3RyICggdXVpZCAuIHV1aWQxICggKSApIC4gdXBwZXIgKCApICkKIGlmICckZ2V0X2Nvb2tpZXMkJyBpbiB1cmwgOgogIHVybCA9IHVybCAuIHJlcGxhY2UgKCAnJGdldF9jb29raWVzJCcgLCBPME9vMDAgKCBjb29raWVKYXIgKSApCiAgaWYgNDEgLSA0MTogaUlpaTFJMTFJMUlJMSAlIGlpaTFJMUkKIGlmIHJlY3Vyc2l2ZUNhbGwgOiByZXR1cm4gdXJsCiBwcmludCAnZmluYWwgdXJsJyAsIHVybAogaWYgdXJsID09ICIiIDoKICByZXR1cm4KIGVsc2UgOgogIHJldHVybiB1cmwgLCBJMUkxaQogIGlmIDU5IC0gNTk6IElpMUkgKyBpMTFpSWlpSWlpCiAgaWYgODggLSA4ODogaTExaUlpaUlpaSAtIElJCiAgaWYgNjcgLSA2NzogSWkxSSAuIElJaUkxSTExaTExICsgb28wMDAgLSBPb29vb29vb09PCmRlZiBPT09vTyAoIHQgKSA6CiBpbXBvcnQgaGFzaGxpYgogaUlpaWlpID0gaGFzaGxpYiAuIG1kNSAoICkKIGlJaWlpaSAuIHVwZGF0ZSAoIHQgKQogcmV0dXJuIGlJaWlpaSAuIGhleGRpZ2VzdCAoICkKIGlmIDE0IC0gMTQ6IGlpaTFJMUkgLiBpSWlpMUkxMUkxSUkxIC4gT29vb29vb29PTyAuIGkxMWkgLyBJaUlpMTFpSUlpMUlpCmRlZiBJaUlpMSAoIGVuY3J5cHRlZCApIDoKIGkxMTFpaUkxaWkgPSAiIgogZm9yIG8wMCBpbiBlbmNyeXB0ZWQgLiBzcGxpdCAoICc6JyApIDoKICBpMTExaWlJMWlpICs9IGNociAoIGludCAoIG8wMCAuIHJlcGxhY2UgKCAiMG0wIiAsICIiICkgKSAvIDg0IC8gNSApCiByZXR1cm4gaTExMWlpSTFpaQogaWYgMjQgLSAyNDogb28wMDAgLyBPb29vb29vb09PIC4gaTExaSAuIG9Pb29Pb08wT28wTyAlIE8wICUgTzAwb09vT29PMG8wTwpkZWYgSWlJSUkxaTFpICggbWVkaWFfdXJsICkgOgogdHJ5IDoKICBpbXBvcnQgQ3VzdG9tUGxheWVyCiAgSUkxMUkgPSBDdXN0b21QbGF5ZXIgLiBNeVhCTUNQbGF5ZXIgKCApCiAgb28wb09PMDBvTyA9IHhibWNndWkgLiBMaXN0SXRlbSAoIGxhYmVsID0gc3RyICggTzAwTzBvT08wME8wMCApICwgaWNvbkltYWdlID0gIkRlZmF1bHRWaWRlby5wbmciICwgdGh1bWJuYWlsSW1hZ2UgPSB4Ym1jIC4gZ2V0SW5mb0ltYWdlICggIkxpc3RJdGVtLlRodW1iIiApICwgcGF0aCA9IG1lZGlhX3VybCApCiAgSUkxMUkgLiBwbGF5ICggbWVkaWFfdXJsICwgb28wb09PMDBvTyApCiAgeGJtYyAuIHNsZWVwICggMTAwMCApCiAgd2hpbGUgSUkxMUkgLiBpc19hY3RpdmUgOgogICB4Ym1jIC4gc2xlZXAgKCAyMDAgKQogZXhjZXB0IDoKICB0cmFjZWJhY2sgLiBwcmludF9leGMgKCApCiByZXR1cm4gJycKIGlmIDM2IC0gMzY6IElpMUkKIGlmIDg0IC0gODQ6IEkxaTFpSTFpIC4gTzBPIC4gaTExaSAuIGlpaTFJMUkgLyBPMDBvT29Pb08wbzBPICUgbzBPT08KZGVmIE9PTzBvT29PME8gKCBwYWdlX3ZhbHVlICwgcmVmZXJlciA9IE5vbmUgKSA6CiBpZiByZWZlcmVyIDoKICByZWZlcmVyID0gWyAoICdSZWZlcmVyJyAsIHJlZmVyZXIgKSBdCiBpZiBwYWdlX3ZhbHVlIC4gc3RhcnRzd2l0aCAoICJodHRwIiApIDoKICBPb09vMDAwb09vMG9vID0gcGFnZV92YWx1ZQogIHBhZ2VfdmFsdWUgPSBvT29PMCAoIHBhZ2VfdmFsdWUgLCBoZWFkZXJzID0gcmVmZXJlciApCiAgaWYgNjUgLSA2NTogb28wMDAgLyBPME8gJSBPbzBvb08wb28wb08KIGlJaUlJaWkgPSAiKGV2YWxcKGZ1bmN0aW9uXChwLGEsYyxrLGUsKD86cnxkKS4qKSIKIGlmIDYxIC0gNjE6IElpSWkxMWlJSWkxSWkgLyBJaTFJIC8gSUlpSTFJMTFpMTEgKiBPMAogaUlJSTFpMWkgPSByZSAuIGNvbXBpbGUgKCBpSWlJSWlpICkgLiBmaW5kYWxsICggcGFnZV92YWx1ZSApCiBPT09vTzAwID0gIiIKIGlmIGlJSUkxaTFpIGFuZCBsZW4gKCBpSUlJMWkxaSApID4gMCA6CiAgZm9yIG9vbzAgaW4gaUlJSTFpMWkgOgogICBJaUkxaWlpMTFpSWkxID0gaTFpSTExSTFJSTEgKCBvb28wICkKICAgaWkxMUlJMWkgPSBvTzBPbzBPMG8gKCBJaUkxaWlpMTFpSWkxICwgJ1wnKC4qPylcJycgKQogICBpZiAndW5lc2NhcGUnIGluIElpSTFpaWkxMWlJaTEgOgogICAgSWlJMWlpaTExaUlpMSA9IHVybGxpYiAuIHVucXVvdGUgKCBpaTExSUkxaSApCiAgIE9PT29PMDAgKz0gSWlJMWlpaTExaUlpMSArICdcbicKICBwcmludCAnZmluYWwgdmFsdWUgaXMgJyAsIE9PT29PMDAKICBpZiA1OCAtIDU4OiBJSWlJMUkxMWkxMSAuIE9vMG9vTzBvbzBvTyAtIElJaUkxSTExaTExIC0gSTFpMWlJMWkgKiBPMDBvT29Pb08wbzBPCiAgT29PbzAwMG9PbzBvbyA9IG9PME9vME8wbyAoIE9PT29PMDAgLCAnc3JjPSIoLio/KSInICkKICBpZiAyOCAtIDI4OiBvbzAwMCAqIE8wTyAuIGlpaTFJMUkgJSBpaWkxSTFJIC8gaWlpMUkxSSAqIEkxaTFpSTFpCiAgcGFnZV92YWx1ZSA9IG9Pb08wICggT29PbzAwMG9PbzBvbyAsIGhlYWRlcnMgPSByZWZlcmVyICkKICBpZiA2NCAtIDY0OiBpMTFpIC0gb09vb09vTzBPbzBPCiAgaWYgNjggLSA2ODogSUkgLSBJaTFJIC0gaUlpaTFJMTFJMUlJMSAvIG9vMDAwICsgSWkxSSAtIE8wTwogIGlmIDc1IC0gNzU6IE8wb28wT08wIC8gSWlJaTExaUlJaTFJaSAlIGlJaWkxSTExSTFJSTEgLiBPb29vb29vb09PICUgT29vb29vb29PTyAlIGkxMWkKIElpMWkxaTExMTEgPSBvTzBPbzBPMG8gKCBwYWdlX3ZhbHVlICwgJ3N0cmVhbWVyXCcuKj9cJyguKj8pXCdcKScgKQogbzBvTzBPMDBvT28gPSBvTzBPbzBPMG8gKCBwYWdlX3ZhbHVlICwgJ2ZpbGVcJyxcc1wnKC4qPylcJycgKQogaWYgMjYgLSAyNjogT28wb29PMG9vMG9PICUgSTFpMWlJMWkgJSBpaWlpSWkxMWkgJSBPMDBvT29Pb08wbzBPCiBpZiA1NSAtIDU1OiBJSSAlIE9vb29vb29vT08gLyBPb29vb29vb09PICUgT29vb29vb29PTwogcmV0dXJuIElpMWkxaTExMTEgKyAnIHBsYXlwYXRoPScgKyBvMG9PME8wMG9PbyArICcgcGFnZVVybD0nICsgT29PbzAwMG9PbzBvbwogaWYgNTIgLSA1MjogbzBPT08gKyBvME9PTyAuIGkxMWkKZGVmIElpaSAoIHBhZ2VfdmFsdWUgLCByZWZlcmVyID0gTm9uZSApIDoKIGlmIHJlZmVyZXIgOgogIHJlZmVyZXIgPSBbICggJ1JlZmVyZXInICwgcmVmZXJlciApIF0KIGlmIHBhZ2VfdmFsdWUgLiBzdGFydHN3aXRoICggImh0dHAiICkgOgogIHBhZ2VfdmFsdWUgPSBvT29PMCAoIHBhZ2VfdmFsdWUgLCBoZWFkZXJzID0gcmVmZXJlciApCiBpSWlJSWlpID0gInZhciBhID0gKC4qPyk7XHMqdmFyIGIgPSAoLio/KTtccyp2YXIgYyA9ICguKj8pO1xzKnZhciBkID0gKC4qPyk7XHMqdmFyIGYgPSAoLio/KTtccyp2YXIgdl9wYXJ0ID0gJyguKj8pJzsiCiBpSUlJMWkxaSA9IHJlIC4gY29tcGlsZSAoIGlJaUlJaWkgKSAuIGZpbmRhbGwgKCBwYWdlX3ZhbHVlICkgWyAwIF0KIGlmIDYgLSA2OiBJaTFJIC0gbzBPT08gKyBPMDBvT29Pb08wbzBPICsgaTFJSWkgLyBPMCAvIElpSWkxMWlJSWkxSWkKIG8wME8wTyAsIG8wMDBvICwgSTFpMWkxaWlpICwgSWlpaTFJMSAsIE8wSUkxMWkxMUlJICwgb29vMCA9ICggaUlJSTFpMWkgKQogTzBJSTExaTExSUkgPSBpbnQgKCBPMElJMTFpMTFJSSApCiBvMDBPME8gPSBpbnQgKCBvMDBPME8gKSAvIE8wSUkxMWkxMUlJCiBvMDAwbyA9IGludCAoIG8wMDBvICkgLyBPMElJMTFpMTFJSQogSTFpMWkxaWlpID0gaW50ICggSTFpMWkxaWlpICkgLyBPMElJMTFpMTFJSQogSWlpaTFJMSA9IGludCAoIElpaWkxSTEgKSAvIE8wSUkxMWkxMUlJCiBpZiAyOSAtIDI5OiBJSWlJMUkxMWkxMSAlIE8wTyAlIE9vMG9vTzBvbzBvTyAuIElpSWkxMWlJSWkxSWkgLyBPb29vb29vb09PICogSUkKIG8wID0gJ3J0bXA6Ly8nICsgc3RyICggbzAwTzBPICkgKyAnLicgKyBzdHIgKCBvMDAwbyApICsgJy4nICsgc3RyICggSTFpMWkxaWlpICkgKyAnLicgKyBzdHIgKCBJaWlpMUkxICkgKyBvb28wIDsKIHJldHVybiBvMAogaWYgNzggLSA3ODogaUlpaTFJMTFJMUlJMSArIGlpaTFJMUkgLSBPMDBvT29Pb08wbzBPICogSTFpMWlJMWkgLSBPb29vb29vb09PICUgb28wMDAKZGVmIGkxT29PTyAoIHVybCAsIHVzZXJhZ2VudCA9IE5vbmUgKSA6CiBzdHIgPSAnI0VYVE0zVScKIHN0ciArPSAnXG4jRVhULVgtU1RSRUFNLUlORjpQUk9HUkFNLUlEPTEsQkFORFdJRFRIPTM2MTgxNicKIHN0ciArPSAnXG4nICsgdXJsICsgJyZieXRlcz0wLTIwMDAwMCcKIGlJSTExMWlpID0gb3MgLiBwYXRoIC4gam9pbiAoIE9vMG8wMDAwbzBvMCAsICd0ZXN0ZmlsZS5tM3UnICkKIHN0ciArPSAnXG4nCiBpSUlJMUkxaTFpICggaUlJMTExaWkgLCBzdHIgKQogaWYgNzkgLSA3OTogTzAwb09vT29PMG8wTyAuIE8wTwogcmV0dXJuIGlJSTExMWlpCiBpZiA0MCAtIDQwOiBJaUlpMTFpSUlpMUlpICsgSUlpSTFJMTFpMTEgLiBJaUlpMTFpSUlpMUlpICUgSUkKZGVmIGlJSUkxSTFpMWkgKCBmaWxlX25hbWUgLCBwYWdlX2RhdGEgLCBhcHBlbmQgPSBGYWxzZSApIDoKIGlmIGFwcGVuZCA6CiAgTzBJSTExaTExSUkgPSBvcGVuICggZmlsZV9uYW1lICwgJ2EnICkKICBPMElJMTFpMTFJSSAuIHdyaXRlICggcGFnZV9kYXRhICkKICBPMElJMTFpMTFJSSAuIGNsb3NlICggKQogZWxzZSA6CiAgTzBJSTExaTExSUkgPSBvcGVuICggZmlsZV9uYW1lICwgJ3diJyApCiAgTzBJSTExaTExSUkgLiB3cml0ZSAoIHBhZ2VfZGF0YSApCiAgTzBJSTExaTExSUkgLiBjbG9zZSAoICkKICByZXR1cm4gJycKICBpZiAxNSAtIDE1OiBPMDBvT29Pb08wbzBPICogSUlpSTFJMTFpMTEgJSBvME9PTyAqIGlJaWkxSTExSTFJSTEgLSBpMTFpSWlpSWlpCmRlZiBPbzAwT09PT29vMG9vICggZmlsZV9uYW1lICkgOgogTzBJSTExaTExSUkgPSBvcGVuICggZmlsZV9uYW1lICwgJ3JiJyApCiBJaWlpMUkxID0gTzBJSTExaTExSUkgLiByZWFkICggKQogTzBJSTExaTExSUkgLiBjbG9zZSAoICkKIHJldHVybiBJaWlpMUkxCiBpZiA4MCAtIDgwOiBJMWkxaUkxaSAqIG9vMDAwICogaTExaSAtIE8wIC4gb28wMDAgJSBvT29vT29PME9vME8KZGVmIElJMSAoIHBhZ2VfZGF0YSApIDoKIGltcG9ydCByZSAsIGJhc2U2NCAsIHVybGxpYiA7CiBpaUlJSWlJaWkgPSBwYWdlX2RhdGEKIHdoaWxlICdnZWgoJyBpbiBpaUlJSWlJaWkgOgogIGlmIGlpSUlJaUlpaSAuIHN0YXJ0c3dpdGggKCAnbG9sKCcgKSA6IGlpSUlJaUlpaSA9IGlpSUlJaUlpaSBbIDUgOiAtIDEgXQogIGlmIDIzIC0gMjM6IE8wb28wT08wICsgaWlpMUkxSSAuIG9vMDAwICogb09vb09vTzBPbzBPICsgbzBPT08KICBpaUlJSWlJaWkgPSByZSAuIGNvbXBpbGUgKCAnIiguKj8pIicgKSAuIGZpbmRhbGwgKCBpaUlJSWlJaWkgKSBbIDAgXSA7CiAgaWlJSUlpSWlpID0gYmFzZTY0IC4gYjY0ZGVjb2RlICggaWlJSUlpSWlpICkgOwogIGlpSUlJaUlpaSA9IHVybGxpYiAuIHVucXVvdGUgKCBpaUlJSWlJaWkgKSA7CiBwcmludCBpaUlJSWlJaWkKIHJldHVybiBpaUlJSWlJaWkKIGlmIDE4IC0gMTg6IE9vMG9vTzBvbzBvTyAqIElpSWkxMWlJSWkxSWkgLiBPbzBvb08wb28wb08gLyBPMApkZWYgaWlJSUkxSUkgKCBwYWdlX2RhdGEgKSA6CiBwcmludCAnZ2V0X2RhZ191cmwyJyAsIHBhZ2VfZGF0YQogb09vMDBvT09PT08gPSBvT29PMCAoIHBhZ2VfZGF0YSApIDsKIE9vT09vME8wMCA9ICcoaHR0cC4qKScKIGltcG9ydCB1dWlkCiBpSWlJID0gc3RyICggdXVpZCAuIHV1aWQxICggKSApIC4gdXBwZXIgKCApCiBpSUlJaTFpMUkxMWkgPSByZSAuIGNvbXBpbGUgKCBPb09PbzBPMDAgKSAuIGZpbmRhbGwgKCBvT28wMG9PT09PTyApCiBvb09PMDBvT28gPSBbICggJ1gtUGxheWJhY2stU2Vzc2lvbi1JZCcgLCBpSWlJICkgXQogZm9yIG9PTzBPTzBPTyBpbiBpSUlJaTFpMUkxMWkgOgogIHRyeSA6CiAgIG9PT29vb08gPSBvT29PMCAoIG9PTzBPTzBPTyAsIGhlYWRlcnMgPSBvb09PMDBvT28gKSA7CiAgIGlmIDIyIC0gMjI6IGlpaTFJMUkgKyBpSWlpMUkxMUkxSUkxCiAgZXhjZXB0IDogcGFzcwogIGlmIDI0IC0gMjQ6IG9vMDAwICUgaTFJSWkgKyBPMG9vME9PMCAuIGkxMWlJaWlJaWkgLiBvME9PTwogcmV0dXJuIHBhZ2VfZGF0YSArICd8JlgtUGxheWJhY2stU2Vzc2lvbi1JZD0nICsgaUlpSQogaWYgMTcgLSAxNzogbzBPT08gLiBpMTFpIC4gSUkgLyBvME9PTwogaWYgNTcgLSA1NzogaWlpMUkxSQpkZWYgb08wICggcGFnZV9kYXRhICkgOgogcHJpbnQgJ2dldF9kYWdfdXJsJyAsIHBhZ2VfZGF0YQogaWYgcGFnZV9kYXRhIC4gc3RhcnRzd2l0aCAoICdodHRwOi8vZGFnLnRvdGFsLXN0cmVhbS5uZXQnICkgOgogIG9vT08wMG9PbyA9IFsgKCAnVXNlci1BZ2VudCcgLCAnVmVyaXNtby1CbGFja1VJXygyLjQuNy41LjguMC4zNCknICkgXQogIHBhZ2VfZGF0YSA9IG9Pb08wICggcGFnZV9kYXRhICwgaGVhZGVycyA9IG9vT08wMG9PbyApIDsKICBpZiA4NyAtIDg3OiBpaWlpSWkxMWkgJSBPMDBvT29Pb08wbzBPCiBpZiAnMTI3LjAuMC4xJyBpbiBwYWdlX2RhdGEgOgogIHJldHVybiBvbzBPT09vT28gKCBwYWdlX2RhdGEgKQogZWxpZiBvTzBPbzBPMG8gKCBwYWdlX2RhdGEgLCAnd21zQXV0aFNpZ24lM0QoW14lJl0rKScgKSAhPSAnJyA6CiAgSUlpaUlJaTEgPSBvTzBPbzBPMG8gKCBwYWdlX2RhdGEgLCAnJnZlcl90PShbXiZdKykmJyApICsgJz93bXNBdXRoU2lnbj0nICsgb08wT28wTzBvICggcGFnZV9kYXRhICwgJ3dtc0F1dGhTaWduJTNEKFteJSZdKyknICkgKyAnPT0vbXA0OicgKyBvTzBPbzBPMG8gKCBwYWdlX2RhdGEgLCAnXFw/eT0oW14mXSspJicgKQogZWxzZSA6CiAgSUlpaUlJaTEgPSBvTzBPbzBPMG8gKCBwYWdlX2RhdGEgLCAnaHJlZj0iKFteIl0rKSJbXiJdKyQnICkKICBpZiBsZW4gKCBJSWlpSUlpMSApID09IDAgOgogICBJSWlpSUlpMSA9IHBhZ2VfZGF0YQogSUlpaUlJaTEgPSBJSWlpSUlpMSAuIHJlcGxhY2UgKCAnICcgLCAnJTIwJyApCiByZXR1cm4gSUlpaUlJaTEKIGlmIDUxIC0gNTE6IG9vMDAwCmRlZiBvTzBPbzBPMG8gKCBkYXRhICwgcmVfcGF0dGVuICkgOgogT28wTzAwT28wbzAgPSAnJwogb29vMG8wMCA9IHJlIC4gc2VhcmNoICggcmVfcGF0dGVuICwgZGF0YSApCiBpZiBvb28wbzAwICE9IE5vbmUgOgogIE9vME8wME9vMG8wID0gb29vMG8wMCAuIGdyb3VwICggMSApCiBlbHNlIDoKICBPbzBPMDBPbzBvMCA9ICcnCiByZXR1cm4gT28wTzAwT28wbzAKIGlmIDE0IC0gMTQ6IE9vMG9vTzBvbzBvTyAlIGlpaWlJaTExaSAlIElJaUkxSTExaTExIC0gaTExaUlpaUlpaQpkZWYgb28wT09Pb09vICggcGFnZV9kYXRhICkgOgogSUlpaUlJaTEgPSAnJwogaWYgJzEyNy4wLjAuMScgaW4gcGFnZV9kYXRhIDoKICBJSWlpSUlpMSA9IG9PME9vME8wbyAoIHBhZ2VfZGF0YSAsICcmdmVyX3Q9KFteJl0rKSYnICkgKyAnIGxpdmU9dHJ1ZSB0aW1lb3V0PTE1IHBsYXlwYXRoPScgKyBvTzBPbzBPMG8gKCBwYWdlX2RhdGEgLCAnXFw/eT0oW2EtekEtWjAtOS1fXFwuQF0rKScgKQogIGlmIDUzIC0gNTM6IE8wMG9Pb09vTzBvME8gJSBJSWlJMUkxMWkxMQogaWYgb08wT28wTzBvICggcGFnZV9kYXRhICwgJ3Rva2VuPShbXiZdKykmJyApICE9ICcnIDoKICBJSWlpSUlpMSA9IElJaWlJSWkxICsgJz90b2tlbj0nICsgb08wT28wTzBvICggcGFnZV9kYXRhICwgJ3Rva2VuPShbXiZdKykmJyApCiBlbGlmIG9PME9vME8wbyAoIHBhZ2VfZGF0YSAsICd3bXNBdXRoU2lnbiUzRChbXiUmXSspJyApICE9ICcnIDoKICBJSWlpSUlpMSA9IG9PME9vME8wbyAoIHBhZ2VfZGF0YSAsICcmdmVyX3Q9KFteJl0rKSYnICkgKyAnP3dtc0F1dGhTaWduPScgKyBvTzBPbzBPMG8gKCBwYWdlX2RhdGEgLCAnd21zQXV0aFNpZ24lM0QoW14lJl0rKScgKSArICc9PS9tcDQ6JyArIG9PME9vME8wbyAoIHBhZ2VfZGF0YSAsICdcXD95PShbXiZdKykmJyApCiBlbHNlIDoKICBJSWlpSUlpMSA9IG9PME9vME8wbyAoIHBhZ2VfZGF0YSAsICdIUkVGPSIoW14iXSspIicgKQogIGlmIDU5IC0gNTk6IElpMUkgJSBpSWlpMUkxMUkxSUkxIC4gaTFJSWkgKyBpMTFpICogT28wb29PMG9vMG9PCiBpZiAnZGFnMS5hc3gnIGluIElJaWlJSWkxIDoKICByZXR1cm4gb08wICggSUlpaUlJaTEgKQogIGlmIDQxIC0gNDE6IE8wMG9Pb09vTzBvME8gJSBvME9PTwogaWYgJ2RldmlubGl2ZWZzLmZwbGl2ZS5uZXQnIG5vdCBpbiBJSWlpSUlpMSA6CiAgSUlpaUlJaTEgPSBJSWlpSUlpMSAuIHJlcGxhY2UgKCAnZGV2aW5saXZlJyAsICdmbGl2ZScgKQogaWYgJ3Blcm1saXZlZnMuZnBsaXZlLm5ldCcgbm90IGluIElJaWlJSWkxIDoKICBJSWlpSUlpMSA9IElJaWlJSWkxIC4gcmVwbGFjZSAoICdwZXJtbGl2ZScgLCAnZmxpdmUnICkKIHJldHVybiBJSWlpSUlpMQogaWYgMTIgLSAxMjogSWkxSQogaWYgNjkgLSA2OTogT29vb29vb29PTyArIElpMUkKZGVmIElJaTExSTEgKCBzdHJfZXZhbCApIDoKIGlpaUkxMTFJID0gIiIKIHRyeSA6CiAgb29vT09PMDBvMCA9ICJ3LGkscyxlPSgiICsgc3RyX2V2YWwgKyAnKScKICBleGVjICggb29vT09PMDBvMCApCiAgaWlpSTExMUkgPSBpMUkgKCB3ICwgaSAsIHMgLCBlICkKIGV4Y2VwdCA6IHRyYWNlYmFjayAuIHByaW50X2V4YyAoIGZpbGUgPSBzeXMgLiBzdGRvdXQgKQogaWYgNyAtIDc6IGkxMWlJaWlJaWkgLiBJSWlJMUkxMWkxMQogcmV0dXJuIGlpaUkxMTFJCiBpZiA5OSAtIDk5OiBpaWkxSTFJIC0gSTFpMWlJMWkgLSBpaWlpSWkxMWkgJSBPME8KZGVmIGkxSSAoIHcgLCBpICwgcyAsIGUgKSA6CiBJaWlJSWlpaWlpaSA9IDAgOwogT09PTzBvID0gMCA7CiBpMUkxaUlpMUlpSSA9IDAgOwogaTExMTEgPSBbIF0gOwogTzBPMDAwT09PbyA9IFsgXSA7CiB3aGlsZSBUcnVlIDoKICBpZiAoIElpaUlJaWlpaWlpIDwgNSApIDoKICAgTzBPMDAwT09PbyAuIGFwcGVuZCAoIHcgWyBJaWlJSWlpaWlpaSBdICkKICBlbGlmICggSWlpSUlpaWlpaWkgPCBsZW4gKCB3ICkgKSA6CiAgIGkxMTExIC4gYXBwZW5kICggdyBbIElpaUlJaWlpaWlpIF0gKSA7CiAgSWlpSUlpaWlpaWkgKz0gMSA7CiAgaWYgKCBPT09PMG8gPCA1ICkgOgogICBPME8wMDBPT09vIC4gYXBwZW5kICggaSBbIE9PT08wbyBdICkKICBlbGlmICggT09PTzBvIDwgbGVuICggaSApICkgOgogICBpMTExMSAuIGFwcGVuZCAoIGkgWyBPT09PMG8gXSApCiAgT09PTzBvICs9IDEgOwogIGlmICggaTFJMWlJaTFJaUkgPCA1ICkgOgogICBPME8wMDBPT09vIC4gYXBwZW5kICggcyBbIGkxSTFpSWkxSWlJIF0gKQogIGVsaWYgKCBpMUkxaUlpMUlpSSA8IGxlbiAoIHMgKSApIDoKICAgaTExMTEgLiBhcHBlbmQgKCBzIFsgaTFJMWlJaTFJaUkgXSApIDsKICBpMUkxaUlpMUlpSSArPSAxIDsKICBpZiAoIGxlbiAoIHcgKSArIGxlbiAoIGkgKSArIGxlbiAoIHMgKSArIGxlbiAoIGUgKSA9PSBsZW4gKCBpMTExMSApICsgbGVuICggTzBPMDAwT09PbyApICsgbGVuICggZSApICkgOgogICBicmVhayA7CiAgIGlmIDEyIC0gMTI6IGlpaWlJaTExaQogT28wTyA9ICcnIC4gam9pbiAoIGkxMTExICkKIElpMTEgPSAnJyAuIGpvaW4gKCBPME8wMDBPT09vICkKIE9PT08wbyA9IDAgOwogSUkxaTExMSA9IFsgXSA7CiBmb3IgSWlpSUlpaWlpaWkgaW4gcmFuZ2UgKCAwICwgbGVuICggaTExMTEgKSAsIDIgKSA6CiAgaWYgNTAgLSA1MDogT28wb29PMG9vMG9PICUgaTFJSWkKICBpaWkxMUlJMUkgPSAtIDEgOwogIGlmICggb3JkICggSWkxMSBbIE9PT08wbyBdICkgJSAyICkgOgogICBpaWkxMUlJMUkgPSAxIDsKICAgaWYgNSAtIDU6IG9vMDAwIC0gT28wb29PMG9vMG9PICogT28wb29PMG9vMG9PCiAgSUkxaTExMSAuIGFwcGVuZCAoIGNociAoIGludCAoIE9vME8gWyBJaWlJSWlpaWlpaSA6IElpaUlJaWlpaWlpICsgMiBdICwgMzYgKSAtIGlpaTExSUkxSSApICkgOwogIE9PT08wbyArPSAxIDsKICBpZiAoIE9PT08wbyA+PSBsZW4gKCBPME8wMDBPT09vICkgKSA6CiAgIE9PT08wbyA9IDAgOwogbzAgPSAnJyAuIGpvaW4gKCBJSTFpMTExICkKIGlmICdldmFsKGZ1bmN0aW9uKHcsaSxzLGUpJyBpbiBvMCA6CiAgcHJpbnQgJ1NUSUxMIEdPaW5nJwogIG8wID0gcmUgLiBjb21waWxlICggJ2V2YWxcKGZ1bmN0aW9uXCh3LGkscyxlXCkuKn1cKCguKj8pXCknICkgLiBmaW5kYWxsICggbzAgKSBbIDAgXQogIHJldHVybiBJSWkxMUkxICggbzAgKQogZWxzZSA6CiAgcHJpbnQgJ0ZJTklTSEVEJwogIHJldHVybiBvMAogIGlmIDUwIC0gNTA6IGkxMWkgKiBvME9PTyAvIE8wMG9Pb09vTzBvME8gLiBJaUlpMTFpSUlpMUlpICsgSUlpSTFJMTFpMTEgLSBJaTFJCmRlZiBpMWlJMTFJMUlJMSAoIHBhZ2VfdmFsdWUgLCByZWdleF9mb3JfdGV4dCA9ICcnICwgaXRlcmF0aW9ucyA9IDEgLCB0b3RhbF9pdGVyYXRpb24gPSAxICkgOgogdHJ5IDoKICBJSTFpaUlpSWlJID0gTm9uZQogIGlmIHBhZ2VfdmFsdWUgLiBzdGFydHN3aXRoICggImh0dHAiICkgOgogICBwYWdlX3ZhbHVlID0gb09vTzAgKCBwYWdlX3ZhbHVlICkKICBwcmludCAncGFnZV92YWx1ZScgLCBwYWdlX3ZhbHVlCiAgaWYgcmVnZXhfZm9yX3RleHQgYW5kIGxlbiAoIHJlZ2V4X2Zvcl90ZXh0ICkgPiAwIDoKICAgcGFnZV92YWx1ZSA9IHJlIC4gY29tcGlsZSAoIHJlZ2V4X2Zvcl90ZXh0ICkgLiBmaW5kYWxsICggcGFnZV92YWx1ZSApIFsgMCBdCiAgIGlmIDI0IC0gMjQ6IElJaUkxSTExaTExIC0gaTFJSWkgKyBpaWkxSTFJCiAgcGFnZV92YWx1ZSA9IElpaUlpICggcGFnZV92YWx1ZSAsIGl0ZXJhdGlvbnMgLCB0b3RhbF9pdGVyYXRpb24gKQogZXhjZXB0IDogdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggZmlsZSA9IHN5cyAuIHN0ZG91dCApCiBwcmludCAndW5wYWNrZWQnICwgcGFnZV92YWx1ZQogaWYgJ3NhdjFsaXZlLnR2JyBpbiBwYWdlX3ZhbHVlIDoKICBwYWdlX3ZhbHVlID0gcGFnZV92YWx1ZSAuIHJlcGxhY2UgKCAnc2F2MWxpdmUudHYnICwgJ3Nhd2xpdmUudHYnICkKICBwcmludCAnc2F2MSB1bnBhY2tlZCcgLCBwYWdlX3ZhbHVlCiByZXR1cm4gcGFnZV92YWx1ZQogaWYgMTAgLSAxMDogTzBPIC8gSUlpSTFJMTFpMTEKZGVmIElpaUlpICggc0phdmFzY3JpcHQgLCBpdGVyYXRpb24gPSAxICwgdG90YWxpdGVyYXRpb25zID0gMiApIDoKIHByaW50ICdpdGVyYXRpb24nICwgaXRlcmF0aW9uCiBpZiBzSmF2YXNjcmlwdCAuIHN0YXJ0c3dpdGggKCAndmFyIF8weGNiOGE9JyApIDoKICBJMWlJSTExaUlJSTFpMUkgPSBzSmF2YXNjcmlwdCAuIHNwbGl0ICggJ3ZhciBfMHhjYjhhPScgKQogIG9vb09PTzAwbzAgPSAibXlhcnJheT0iICsgSTFpSUkxMWlJSUkxaTFJIFsgMSBdIC4gc3BsaXQgKCAiZXZhbCgiICkgWyAwIF0KICBleGVjICggb29vT09PMDBvMCApCiAgb09PMG9vID0gNjIKICBJaUlJaTFJMUkxMUlpID0gaW50ICggSTFpSUkxMWlJSUkxaTFJIFsgMSBdIC4gc3BsaXQgKCAiLDYyLCIgKSBbIDEgXSAuIHNwbGl0ICggJywnICkgWyAwIF0gKQogIG8wT08gPSBteWFycmF5IFsgMCBdCiAgT29paUlpSSA9IG15YXJyYXkgWyAzIF0KICB3aXRoIG9wZW4gKCAndGVtcCBmaWxlJyArIHN0ciAoIGl0ZXJhdGlvbiApICsgJy5qcycgLCAid2IiICkgYXMgbzBPb28wTzAwIDoKICAgbzBPb28wTzAwIC4gd3JpdGUgKCBzdHIgKCBPb2lpSWlJICkgKQogICBpZiA5IC0gOTogTzAgLiBPbzBvb08wb28wb08KIGVsc2UgOgogIGlmIDU1IC0gNTU6IElJaUkxSTExaTExCiAgSTFpSUkxMWlJSUkxaTFJID0gc0phdmFzY3JpcHQgLiBzcGxpdCAoICJybiBwfSgnIiApCiAgcHJpbnQgSTFpSUkxMWlJSUkxaTFJCiAgaWYgNzcgLSA3NzogaTExaQogIG8wT08gLCBvT08wb28gLCBJaUlJaTFJMUkxMUlpICwgT29paUlpSSA9ICggJycgLCAnMCcgLCAnMCcgLCAnJyApCiAgaWYgMTYgLSAxNjogb09vb09vTzBPbzBPICogaTExaSAvIGlJaWkxSTExSTFJSTEgLSBPMG9vME9PMAogIG9vb09PTzAwbzAgPSAicDEsYTEsYzEsazE9KCciICsgSTFpSUkxMWlJSUkxaTFJIFsgMSBdIC4gc3BsaXQgKCAiLnNwbGkiICkgWyAwIF0gKyAnKScKICBleGVjICggb29vT09PMDBvMCApCiBPb2lpSWlJID0gT29paUlpSSAuIHNwbGl0ICggJ3wnICkKIEkxaUlJMTFpSUlJMWkxSSA9IEkxaUlJMTFpSUlJMWkxSSBbIDEgXSAuIHNwbGl0ICggIikpJyIgKQogaWYgMyAtIDM6IG9Pb29Pb08wT28wTyAqIElJICsgaTExaSAtIE8wTwogaWYgOTcgLSA5NzogbzBPT08gLyBpaWlpSWkxMWkgLSBJaUlpMTFpSUlpMUlpIC0gb09vb09vTzBPbzBPIC0gb09vb09vTzBPbzBPCiBpZiA1NCAtIDU0OiBJSWlJMUkxMWkxMSArIG9Pb29Pb08wT28wTyAvIE8wb28wT08wIC4gb09vb09vTzBPbzBPICogb28wMDAKIGlmIDEgLSAxOiBvbzAwMCAqIE8wTyAuIGkxSUlpIC8gSUlpSTFJMTFpMTEgLiBvME9PTyArIElJaUkxSTExaTExCiBpZiAxNyAtIDE3OiBJSWlJMUkxMWkxMSArIE8wTyAvIE8wMG9Pb09vTzBvME8gLyBPMG9vME9PMCAqIElpMUkKIGlmIDI5IC0gMjk6IE8wTyAlIE9vb29vb29vT08gKiBpaWlpSWkxMWkgLyBpMTFpIC0gaWlpaUlpMTFpCiBpZiAxOSAtIDE5OiBpMTFpSWlpSWlpCiBpZiA1NCAtIDU0OiBpMTFpIC4gaWlpMUkxSQogaWYgNzMgLSA3Mzogb28wMDAgLiBvT29vT29PME9vME8KIGlmIDMyIC0gMzI6IG9vMDAwICogb09vb09vTzBPbzBPICUgSUkgKiBPMDBvT29Pb08wbzBPIC4gTzAKIGlmIDQ4IC0gNDg6IE8wb28wT08wICogTzBvbzBPTzAKIGlmIDEzIC0gMTM6IE8wMG9Pb09vTzBvME8gLyBpaWkxSTFJICsgb28wMDAgLiBJaUlpMTFpSUlpMUlpICUgSUkKIGlmIDQ4IC0gNDg6IG9Pb29Pb08wT28wTyAvIGkxMWlJaWlJaWkgLSBJaUlpMTFpSUlpMUlpICogaWlpaUlpMTFpIC8gT29vb29vb29PTwogaWYgODkgLSA4OTogaUlpaTFJMTFJMUlJMSAvIG9Pb29Pb08wT28wTyAtIGkxMWkgLyBPMDBvT29Pb08wbzBPIC4gaTExaUlpaUlpaSAuIE8wMG9Pb09vTzBvME8KIGlmIDQ4IC0gNDg6IE8wICsgTzAgLiBJMWkxaUkxaSAtIElJCiBpZiA2MyAtIDYzOiBpaWlpSWkxMWkKIGlmIDcxIC0gNzE6IGkxSUlpIC4gTzAwb09vT29PMG8wTyAqIE8wb28wT08wICUgT29vb29vb29PTyArIElpMUkKIGlmIDM2IC0gMzY6IE9vMG9vTzBvbzBvTwogaWYgNDkgLSA0OTogSWkxSSAvIE9vb29vb29vT08gLyBvT29vT29PME9vME8KIGlmIDc0IC0gNzQ6IEkxaTFpSTFpICUgbzBPT08KIGlmIDcgLSA3OiBpMTFpCiBpZiAyNyAtIDI3OiBpaWlpSWkxMWkgLiBPb29vb29vb09PICsgaTExaUlpaUlpaQogT29vTzAgPSAnJwogSWlpaTFJMSA9ICcnCiBpZiA4NiAtIDg2OiBpaWkxSTFJIC8gSWlJaTExaUlJaTFJaSAtIElpSWkxMWlJSWkxSWkgKyBvME9PTyArIGlpaWlJaTExaQogaWYgMzMgLSAzMzogSWlJaTExaUlJaTFJaSAuIE8wb28wT08wIC4gT28wb29PMG9vMG9PIC4gaTFJSWkKIGkxSUkxaUlJID0gc3RyICggSUkxaSAoIG8wT08gLCBvT08wb28gLCBJaUlJaTFJMUkxMUlpICwgT29paUlpSSAsIE9vb08wICwgSWlpaTFJMSAsIGl0ZXJhdGlvbiApICkKIGlmIDgxIC0gODE6IG8wT09PCiBpZiA5NCAtIDk0OiBpaWkxSTFJICsgaTExaSAlIGkxMWlJaWlJaWkKIGlmIDggLSA4OiBJSSAqIE8wCiBpZiA3MyAtIDczOiBJaUlpMTFpSUlpMUlpIC8gaWlpaUlpMTFpIC8gaWlpMUkxSSAvIE8wTwogaWYgMTEgLSAxMTogb28wMDAgKyBPbzBvb08wb28wb08gLSBPb29vb29vb09PIC8gTzBPCiBpZiBpdGVyYXRpb24gPj0gdG90YWxpdGVyYXRpb25zIDoKICBpZiAzNCAtIDM0OiBJSQogIHJldHVybiBpMUlJMWlJSQogZWxzZSA6CiAgaWYgNDUgLSA0NTogSUkgLyBJSWlJMUkxMWkxMSAvIE8wMG9Pb09vTzBvME8KICByZXR1cm4gSWlpSWkgKCBpMUlJMWlJSSAsIGl0ZXJhdGlvbiArIDEgKQogIGlmIDQ0IC0gNDQ6IG8wT09PIC0gTzAwb09vT29PMG8wTyAvIGkxMWkgKiBPME8gKiBJSWlJMUkxMWkxMQpkZWYgSUkxaSAoIHAgLCBhICwgYyAsIGsgLCBlICwgZCAsIGl0ZXJhdGlvbiAsIHYgPSAxICkgOgogaWYgNzMgLSA3MzogSWlJaTExaUlJaTFJaSAtIG9Pb29Pb08wT28wTyAqIGkxSUlpIC8gaTExaUlpaUlpaSAqIElpMUkgJSBpMTFpCiBpZiA1NiAtIDU2OiBPb29vb29vb09PICogSUlpSTFJMTFpMTEgLiBJSWlJMUkxMWkxMSAuIG8wT09PCiBpZiAyNCAtIDI0OiBJSWlJMUkxMWkxMSAuIGlpaTFJMUkgKiBPMDBvT29Pb08wbzBPICUgTzBvbzBPTzAgLyBJaTFJCiB3aGlsZSAoIGMgPj0gMSApIDoKICBjID0gYyAtIDEKICBpZiAoIGsgWyBjIF0gKSA6CiAgIE9vME9vbzBPMCA9IHN0ciAoIElpSUlpMUlpaUlpSSAoIGMgLCBhICkgKQogICBpZiB2ID09IDEgOgogICAgcCA9IHJlIC4gc3ViICggJ1xcYicgKyBPbzBPb28wTzAgKyAnXFxiJyAsIGsgWyBjIF0gLCBwICkKICAgZWxzZSA6CiAgICBwID0gaUlJSUlpaUlpaSAoIHAgLCBPbzBPb28wTzAgLCBrIFsgYyBdICkKICAgIGlmIDU4IC0gNTg6IElJaUkxSTExaTExCiAgICBpZiA5IC0gOTogaUlpaTFJMTFJMUlJMSAlIG8wT09PIC4gSWkxSSArIE9vb29vb29vT08KICAgIGlmIDYyIC0gNjI6IE8wIC8gb09vb09vTzBPbzBPICUgTzAgKiBPME8gJSBvT29vT29PME9vME8KICAgIGlmIDMzIC0gMzM6IG9Pb29Pb08wT28wTyAuIGlpaWlJaTExaSAqIE8wTyAqIGlJaWkxSTExSTFJSTEKICAgIGlmIDUgLSA1OiBJSWlJMUkxMWkxMSAvIE9vMG9vTzBvbzBvTyAlIE8wIC4gSTFpMWlJMWkgKiBPbzBvb08wb28wb08KICAgIGlmIDgzIC0gODM6IElpMUkKIHJldHVybiBwCiBpZiAxMiAtIDEyOiBpMUlJaSAuIGkxSUlpIC0gSWlJaTExaUlJaTFJaQogaWYgMjYgLSAyNjogaUlpaTFJMTFJMUlJMSAlIGkxMWlJaWlJaWkgJSBvME9PTwogaWYgNjcgLSA2NzogT29vb29vb29PTwpkZWYgaUlJSUlpaUlpaSAoIHNvdXJjZV9zdHIgLCB3b3JkX3RvX2ZpbmQgLCByZXBsYWNlX3dpdGggKSA6CiBJaUlpSWkxSTEgPSBOb25lCiBJaUlpSWkxSTEgPSBzb3VyY2Vfc3RyIC4gc3BsaXQgKCB3b3JkX3RvX2ZpbmQgKQogaWYgbGVuICggSWlJaUlpMUkxICkgPiAxIDoKICBJaUkxaWkxSWkgPSBbIF0KICBvb29PT09vT09PbzBPID0gMAogIGZvciBPMDBvT29vME9vTzAgaW4gSWlJaUlpMUkxIDoKICAgaWYgNjIgLSA2MjogaTFJSWkgLyBJSSAuIG9Pb29Pb08wT28wTyAqIElpSWkxMWlJSWkxSWkKICAgSWlJMWlpMUlpIC4gYXBwZW5kICggTzAwb09vbzBPb08wICkKICAgbzAwID0gd29yZF90b19maW5kCiAgIGlmIDIxIC0gMjE6IElpSWkxMWlJSWkxSWkKICAgaWYgODEgLSA4MTogaWlpMUkxSSAvIGlJaWkxSTExSTFJSTEgLSBJSSAqIEkxaTFpSTFpIC4gb09vb09vTzBPbzBPICogbzBPT08KICAgaWYgb29vT09Pb09PT28wTyA9PSBsZW4gKCBJaUlpSWkxSTEgKSAtIDEgOgogICAgbzAwID0gJycKICAgZWxzZSA6CiAgICBpZiBsZW4gKCBPMDBvT29vME9vTzAgKSA9PSAwIDoKICAgICBpZiAoIGxlbiAoIElpSWlJaTFJMSBbIG9vb09PT29PT09vME8gKyAxIF0gKSA9PSAwIGFuZCB3b3JkX3RvX2ZpbmQgWyAwIF0gLiBsb3dlciAoICkgbm90IGluICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejEyMzQ1Njc4OTBfJyApIG9yICggbGVuICggSWlJaUlpMUkxIFsgb29vT09Pb09PT28wTyArIDEgXSApID4gMCBhbmQgSWlJaUlpMUkxIFsgb29vT09Pb09PT28wTyArIDEgXSBbIDAgXSAuIGxvd2VyICggKSBub3QgaW4gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MTIzNDU2Nzg5MF8nICkgOgogICAgICBvMDAgPSByZXBsYWNlX3dpdGgKICAgICAgaWYgOTUgLSA5NTogb09vb09vTzBPbzBPCiAgICBlbHNlIDoKICAgICBpZiAoIElpSWlJaTFJMSBbIG9vb09PT29PT09vME8gXSBbIC0gMSBdIC4gbG93ZXIgKCApIG5vdCBpbiAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoxMjM0NTY3ODkwXycgKSBhbmQgKCAoIGxlbiAoIElpSWlJaTFJMSBbIG9vb09PT29PT09vME8gKyAxIF0gKSA9PSAwIGFuZCB3b3JkX3RvX2ZpbmQgWyAwIF0gLiBsb3dlciAoICkgbm90IGluICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejEyMzQ1Njc4OTBfJyApIG9yICggbGVuICggSWlJaUlpMUkxIFsgb29vT09Pb09PT28wTyArIDEgXSApID4gMCBhbmQgSWlJaUlpMUkxIFsgb29vT09Pb09PT28wTyArIDEgXSBbIDAgXSAuIGxvd2VyICggKSBub3QgaW4gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MTIzNDU2Nzg5MF8nICkgKSA6CiAgICAgIG8wMCA9IHJlcGxhY2Vfd2l0aAogICAgICBpZiA4OCAtIDg4OiBPbzBvb08wb28wb08gJSBPME8gKyBJMWkxaUkxaSArIEkxaTFpSTFpICogaTExaQogICBJaUkxaWkxSWkgLiBhcHBlbmQgKCBvMDAgKQogICBvb29PT09vT09PbzBPICs9IDEKICAgaWYgNzggLSA3ODogT29vb29vb29PTwogIHNvdXJjZV9zdHIgPSAnJyAuIGpvaW4gKCBJaUkxaWkxSWkgKQogcmV0dXJuIHNvdXJjZV9zdHIKIGlmIDc3IC0gNzc6IG8wT09PIC8gaTFJSWkgLyBJSWlJMUkxMWkxMSAlIElpMUkKZGVmIEkxSTFJaWlpMSAoIG51bSAsIHJhZGl4ICkgOgogaWYgMiAtIDI6IGlpaTFJMUkgKyBJSQogT29vMG9Pb29vMCA9ICIiCiBpZiBudW0gPT0gMCA6IHJldHVybiAnMCcKIHdoaWxlIG51bSA+IDAgOgogIE9vbzBvT29vbzAgPSAiMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6IiBbIG51bSAlIHJhZGl4IF0gKyBPb28wb09vb28wCiAgbnVtIC89IHJhZGl4CiByZXR1cm4gT29vMG9Pb29vMAogaWYgNzYgLSA3NjogSTFpMWlJMWkKZGVmIElpSUlpMUlpaUlpSSAoIGNjICwgYSApIDoKIE9vME9vbzBPMCA9ICIiIGlmIGNjIDwgYSBlbHNlIElpSUlpMUlpaUlpSSAoIGludCAoIGNjIC8gYSApICwgYSApCiBjYyA9ICggY2MgJSBhICkKIE9vT29PbzAgPSBjaHIgKCBjYyArIDI5ICkgaWYgY2MgPiAzNSBlbHNlIHN0ciAoIEkxSTFJaWlpMSAoIGNjICwgMzYgKSApCiByZXR1cm4gT28wT29vME8wICsgT29Pb09vMAogaWYgMzkgLSAzOTogaWlpMUkxSSAtIG8wT09PCiBpZiA1MyAtIDUzOiBJaUlpMTFpSUlpMUlpICUgTzBvbzBPTzAgKyBJSSAuIElJaUkxSTExaTExIC0gbzBPT08gJSBJaUlpMTFpSUlpMUlpCmRlZiBPME9vMDAgKCBjb29raWVKYXIgKSA6CiB0cnkgOgogIG9PbzBPID0gIiIKICBmb3Igb08wMG8wICwgSUlJMWkxMTFpIGluIGVudW1lcmF0ZSAoIGNvb2tpZUphciApIDoKICAgb09vME8gKz0gSUlJMWkxMTFpIC4gbmFtZSArICI9IiArIElJSTFpMTExaSAuIHZhbHVlICsgIjsiCiBleGNlcHQgOiBwYXNzCiBpZiA0MiAtIDQyOiBvME9PTyAvIGkxSUlpICUgb28wMDAKIHJldHVybiBvT28wTwogaWYgMjYgLSAyNjogTzAwb09vT29PMG8wTyAqIGlJaWkxSTExSTFJSTEgJSBPME8gLiBJaUlpMTFpSUlpMUlpICsgSUlpSTFJMTFpMTEKIGlmIDgwIC0gODA6IElJaUkxSTExaTExICogTzAwb09vT29PMG8wTyArIG8wT09PICogSWkxSQpkZWYgaTFPTzBvT09vbyAoIGNvb2tpZUphciAsIENPT0tJRUZJTEUgKSA6CiB0cnkgOgogIEkxMWkxID0gb3MgLiBwYXRoIC4gam9pbiAoIE9vMG8wMDAwbzBvMCAsIENPT0tJRUZJTEUgKQogIGNvb2tpZUphciAuIHNhdmUgKCBJMTFpMSAsIGlnbm9yZV9kaXNjYXJkID0gVHJ1ZSApCiBleGNlcHQgOiBwYXNzCiBpZiAxNiAtIDE2OiBpaWkxSTFJIC8gb09vb09vTzBPbzBPICsgTzBPICUgaUlpaTFJMTFJMUlJMSAtIGkxSUlpIC4gaWlpaUlpMTFpCmRlZiBPMDBvME9PMDAwMG9vICggQ09PS0lFRklMRSApIDoKIGlmIDI2IC0gMjY6IElpSWkxMWlJSWkxSWkgKiBPbzBvb08wb28wb08gLiBpMUlJaQogb29Pb09PID0gTm9uZQogaWYgQ09PS0lFRklMRSA6CiAgdHJ5IDoKICAgSTExaTEgPSBvcyAuIHBhdGggLiBqb2luICggT28wbzAwMDBvMG8wICwgQ09PS0lFRklMRSApCiAgIG9vT29PTyA9IGNvb2tpZWxpYiAuIExXUENvb2tpZUphciAoICkKICAgb29Pb09PIC4gbG9hZCAoIEkxMWkxICwgaWdub3JlX2Rpc2NhcmQgPSBUcnVlICkKICBleGNlcHQgOgogICBvb09vT08gPSBOb25lCiAgIGlmIDU2IC0gNTY6IGlJaWkxSTExSTFJSTEgLiBpMTFpSWlpSWlpIC0gSWkxSSAqIGkxMWkgKiBJMWkxaUkxaQogaWYgbm90IG9vT29PTyA6CiAgb29Pb09PID0gY29va2llbGliIC4gTFdQQ29va2llSmFyICggKQogIGlmIDUgLSA1OiBJaTFJIC8gSWkxSSAtIG8wT09PCiByZXR1cm4gb29Pb09PCiBpZiA3OSAtIDc5OiBvME9PTyArIEkxaTFpSTFpCmRlZiBPTzAwTzBvT08gKCBmdW5fY2FsbCAsIHBhZ2VfZGF0YSAsIENvb2tpZV9KYXIgKSA6CiBpSWlJSWkgPSAnJwogaWYgaTFpSUlpMSBub3QgaW4gc3lzIC4gcGF0aCA6CiAgc3lzIC4gcGF0aCAuIGFwcGVuZCAoIGkxaUlJaTEgKQogIGlmIDE0IC0gMTQ6IElpSWkxMWlJSWkxSWkgLyBJaTFJIC0gaUlpaTFJMTFJMUlJMSAtIGlpaWlJaTExaSAlIElJCiBwcmludCBmdW5fY2FsbAogdHJ5IDoKICBJMWlJaUkxSWlJSUlJID0gJ2ltcG9ydCAnICsgZnVuX2NhbGwgLiBzcGxpdCAoICcuJyApIFsgMCBdCiAgcHJpbnQgSTFpSWlJMUlpSUlJSSAsIHN5cyAuIHBhdGgKICBleGVjICggSTFpSWlJMUlpSUlJSSApCiAgcHJpbnQgJ2RvbmUnCiBleGNlcHQgOgogIHByaW50ICdlcnJvciBpbiBpbXBvcnQnCiAgdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggZmlsZSA9IHN5cyAuIHN0ZG91dCApCiBwcmludCAncmV0X3ZhbD0nICsgZnVuX2NhbGwKIGV4ZWMgKCAncmV0X3ZhbD0nICsgZnVuX2NhbGwgKQogcHJpbnQgaUlpSUlpCiBpZiAxOCAtIDE4OiBJSSAlIGkxMWlJaWlJaWkgLiBpSWlpMUkxMUkxSUkxIC0gTzBvbzBPTzAKIHJldHVybiBzdHIgKCBpSWlJSWkgKQogaWYgODAgLSA4MDogb09vb09vTzBPbzBPICsgaWlpaUlpMTFpIC0gaTFJSWkgLiBPMDBvT29Pb08wbzBPIC8gSWlJaTExaUlJaTFJaSAvIG9Pb29Pb08wT28wTwpkZWYgb08wbzAwb09Pb29PMCAoIHVybCApIDoKIEkxSWlpaSA9IG9Pb08wICggdXJsICkKIEkxSUlJMUlJMUkxMSA9ICIiCiBJSWkxMSA9ICIiCiBvb28wTzBPT08wMDBvID0gIjxzY3JpcHQuKj9zcmM9XCIoLio/cmVjYXAuKj8pXCIiCiBPbzBPMDBPbzBvMCA9IHJlIC4gZmluZGFsbCAoIG9vbzBPME9PTzAwMG8gLCBJMUlpaWkgKQogaWlJMWlpaSA9IEZhbHNlCiBPT29PT28wME8wbzAgPSBOb25lCiBJSWkxMSA9IE5vbmUKIGlmIDgzIC0gODM6IGlJaWkxSTExSTFJSTEgJSBvbzAwMCAlIElpSWkxMWlJSWkxSWkgJSBJMWkxaUkxaSAuIG8wT09PICUgTzAKIGlmIE9vME8wME9vMG8wIGFuZCBsZW4gKCBPbzBPMDBPbzBvMCApID4gMCA6CiAgaUlpSWkxaWkgPSBPbzBPMDBPbzBvMCBbIDAgXQogIGlpSTFpaWkgPSBUcnVlCiAgaWYgMjggLSAyODogaUlpaTFJMTFJMUlJMSArIGlJaWkxSTExSTFJSTEKICBpSWlJaWkxaWkgPSAnY2hhbGxlbmdlLio/XCcoLio/KVwnJwogIElJaUkxaSA9ICdcJyguKj8pXCcnCiAgaUlJMSA9IG9Pb08wICggaUlpSWkxaWkgKQogIEkxSUlJMUlJMUkxMSA9IHJlIC4gZmluZGFsbCAoIGlJaUlpaTFpaSAsIGlJSTEgKSBbIDAgXQogIE8wMDBPID0gJ2h0dHA6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpL3JlbG9hZD9jPScgOwogIE9vMDBPTzAgPSBpSWlJaTFpaSAuIHNwbGl0ICggJ2s9JyApIFsgMSBdCiAgTzAwME8gKz0gSTFJSUkxSUkxSTExICsgJyZrPScgKyBPbzAwT08wICsgJyZjYXB0Y2hhX2s9MSZ0eXBlPWltYWdlJmxhbmc9ZW4tR0InCiAgb28wTyA9IG9Pb08wICggTzAwME8gKQogIE9Pb09PbzAwTzBvMCA9IHJlIC4gZmluZGFsbCAoIElJaUkxaSAsIG9vME8gKSBbIDAgXQogIG9PMDBPb09PT28gPSAnaHR0cDovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkvaW1hZ2U/Yz0nICsgT09vT09vMDBPMG8wCiAgaWYgbm90IG9PMDBPb09PT28gLiBzdGFydHN3aXRoICggImh0dHAiICkgOgogICBvTzAwT29PT09vID0gJ2h0dHA6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpLycgKyBvTzAwT29PT09vCiAgaW1wb3J0IHJhbmRvbQogIE8wMDAwT09PMCA9IHJhbmRvbSAuIHJhbmRyYW5nZSAoIDEwMCAsIDEwMDAgLCA1ICkKICBPbzAgPSBvcyAuIHBhdGggLiBqb2luICggT28wbzAwMDBvMG8wICwgc3RyICggTzAwMDBPT08wICkgKyAiY2FwdGNoYS5pbWciICkKICBvME9PT09PME8gPSBvcGVuICggT28wICwgIndiIiApCiAgbzBPT09PTzBPIC4gd3JpdGUgKCBvT29PMCAoIG9PMDBPb09PT28gKSApCiAgbzBPT09PTzBPIC4gY2xvc2UgKCApCiAgSTFJMUlpSWkxID0gb09PMG8wb28wICggY2FwdGNoYSA9IE9vMCApCiAgSUlpMTEgPSBJMUkxSWlJaTEgLiBnZXQgKCApCiAgb3MgLiByZW1vdmUgKCBPbzAgKQogcmV0dXJuIE9Pb09PbzAwTzBvMCAsIElJaTExCiBpZiA3OCAtIDc4OiBJaTFJICsgTzBvbzBPTzAgLiBPbzBvb08wb28wb08KZGVmIG9Pb08wICggdXJsICwgY29va2llSmFyID0gTm9uZSAsIHBvc3QgPSBOb25lICwgdGltZW91dCA9IDIwICwgaGVhZGVycyA9IE5vbmUgKSA6CiBpZiA5MSAtIDkxOiBpSWlpMUkxMUkxSUkxIC4gSWlJaTExaUlJaTFJaSAuIG8wT09PICsgT29vb29vb29PTwogaWYgNjkgLSA2OTogSTFpMWlJMWkgLSBvT29vT29PME9vME8KIE8wMG9PMG8wbzBvMG8wID0gdXJsbGliMiAuIEhUVFBDb29raWVQcm9jZXNzb3IgKCBjb29raWVKYXIgKQogSTFJaWlpaWlpID0gdXJsbGliMiAuIGJ1aWxkX29wZW5lciAoIE8wMG9PMG8wbzBvMG8wICwgdXJsbGliMiAuIEhUVFBCYXNpY0F1dGhIYW5kbGVyICggKSAsIHVybGxpYjIgLiBIVFRQSGFuZGxlciAoICkgKQogaWYgOTUgLSA5NTogb09vb09vTzBPbzBPICogaTExaUlpaUlpaSAuIElJCiBvT28gPSB1cmxsaWIyIC4gUmVxdWVzdCAoIHVybCApCiBvT28gLiBhZGRfaGVhZGVyID0geyAnVXNlci1hZ2VudCcgOiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4xOyBXT1c2NDsgcnY6MTkuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xOS4wJyB9CiBpZiBoZWFkZXJzIDoKICBmb3IgaUlpaWlpICwgaUlJaTEgaW4gaGVhZGVycyA6CiAgIG9PbyAuIGFkZF9oZWFkZXIgKCBpSWlpaWkgLCBpSUlpMSApCiAgIGlmIDgzIC0gODM6IE9vMG9vTzBvbzBvTyAqIGlpaTFJMUkgLyBJSWlJMUkxMWkxMQogb09vT29PID0gSTFJaWlpaWlpIC4gb3BlbiAoIG9PbyAsIHBvc3QgLCB0aW1lb3V0ID0gdGltZW91dCApCiBpaTExaTFpSUlJID0gb09vT29PIC4gcmVhZCAoICkKIG9Pb09vTyAuIGNsb3NlICggKQogcmV0dXJuIGlpMTFpMWlJSUkgOwogaWYgMzIgLSAzMjogSWlJaTExaUlJaTFJaSArIG9vMDAwIC0gT29vb29vb29PTwpkZWYgSWkxMWlpaTFJSTFpICggc3RyICwgcmVnID0gTm9uZSApIDoKIGlmIHJlZyA6CiAgc3RyID0gcmUgLiBmaW5kYWxsICggcmVnICwgc3RyICkgWyAwIF0KIG8wT09vT08gPSB1cmxsaWIgLiB1bnF1b3RlICggc3RyIFsgMCA6IGxlbiAoIHN0ciApIC0gMSBdICkgOwogaUlJMUlJSTFJMSA9ICcnIDsKIGZvciBPbzBPME9PT29vIGluIHJhbmdlICggbGVuICggbzBPT29PTyApICkgOgogIGlJSTFJSUkxSTEgKz0gY2hyICggb3JkICggbzBPT29PTyBbIE9vME8wT09Pb28gXSApIC0gbzBPT29PTyBbIGxlbiAoIG8wT09vT08gKSAtIDEgXSApIDsKIGlJSTFJSUkxSTEgPSB1cmxsaWIgLiB1bnF1b3RlICggaUlJMUlJSTFJMSApCiBwcmludCBpSUkxSUlJMUkxCiByZXR1cm4gaUlJMUlJSTFJMQogaWYgMTIgLSAxMjogaUlpaTFJMTFJMUlJMSAlIElJICUgSUkKZGVmIG9Pb09PbzAwMG9Pb08wICggc3RyICkgOgogbzBpMWlJMWlpSTFJID0gcmUgLiBmaW5kYWxsICggJ3VuZXNjYXBlXChcJyguKj8pXCcnICwgc3RyICkKIHByaW50ICdqcycgLCBvMGkxaUkxaWlJMUkKIGlmICggbm90IG8waTFpSTFpaUkxSSA9PSBOb25lICkgYW5kIGxlbiAoIG8waTFpSTFpaUkxSSApID4gMCA6CiAgZm9yIG9PMDBvbzAwME8gaW4gbzBpMWlJMWlpSTFJIDoKICAgaWYgNyAtIDc6IE8wIC8gTzBvbzBPTzAgKiBpaWlpSWkxMWkKICAgc3RyID0gc3RyIC4gcmVwbGFjZSAoIG9PMDBvbzAwME8gLCB1cmxsaWIgLiB1bnF1b3RlICggb08wMG9vMDAwTyApICkKIHJldHVybiBzdHIKIGlmIDI5IC0gMjk6IElpSWkxMWlJSWkxSWkKb28wID0gMApkZWYgSTFpaWkgKCBtICwgaHRtbF9wYWdlICwgY29va2llSmFyICkgOgogZ2xvYmFsIG9vMAogb28wICs9IDEKIGlJaUlvTzAwT29vMG9PID0gbSBbICdleHByZScgXQogT29PbzAwMG9PbzBvbyA9IG0gWyAncGFnZScgXQogT09PbyA9IHJlIC4gY29tcGlsZSAoICdcJExpdmVTdHJlYW1DYXB0Y2hhXFsoW15cXV0qKVxdJyApIC4gZmluZGFsbCAoIGlJaUlvTzAwT29vMG9PICkgWyAwIF0KIGlmIDc0IC0gNzQ6IE8wMG9Pb09vTzBvME8gLSBPb29vb29vb09PIC4gSUlpSTFJMTFpMTEKIGlJaUlpMWlpID0gcmUgLiBjb21waWxlICggT09PbyApIC4gZmluZGFsbCAoIGh0bWxfcGFnZSApIFsgMCBdCiBwcmludCBpSWlJb08wME9vbzBvTyAsIE9PT28gLCBpSWlJaTFpaQogaWYgbm90IGlJaUlpMWlpIC4gc3RhcnRzd2l0aCAoICJodHRwIiApIDoKICBJSUkxSWkxaTFJMSA9ICdodHRwOi8vJyArICIiIC4gam9pbiAoIE9vT28wMDBvT28wb28gLiBzcGxpdCAoICcvJyApIFsgMiA6IDMgXSApCiAgaWYgaUlpSWkxaWkgLiBzdGFydHN3aXRoICggIi8iICkgOgogICBpSWlJaTFpaSA9IElJSTFJaTFpMUkxICsgaUlpSWkxaWkKICBlbHNlIDoKICAgaUlpSWkxaWkgPSBJSUkxSWkxaTFJMSArICcvJyArIGlJaUlpMWlpCiAgIGlmIDk3IC0gOTc6IEkxaTFpSTFpIC4gSUkgLSBJMWkxaUkxaSArIG9Pb29Pb08wT28wTyAqIGkxMWkKIE9vMCA9IG9zIC4gcGF0aCAuIGpvaW4gKCBPbzBvMDAwMG8wbzAgLCBzdHIgKCBvbzAgKSArICJjYXB0Y2hhLmpwZyIgKQogbzBPT09PTzBPID0gb3BlbiAoIE9vMCAsICJ3YiIgKQogcHJpbnQgJyBjIGNhcHVybCcgLCBpSWlJaTFpaQogb09vID0gdXJsbGliMiAuIFJlcXVlc3QgKCBpSWlJaTFpaSApCiBvT28gLiBhZGRfaGVhZGVyID0geyAnVXNlci1hZ2VudCcgOiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4xOyBXT1c2NDsgcnY6MTkuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xOS4wJyB9CiBpZiAncmVmZXInIGluIG0gOgogIG9PbyAuIGFkZF9oZWFkZXIgKCAnUmVmZXJlcicgLCBtIFsgJ3JlZmVyJyBdICkKIGlmICdhZ2VudCcgaW4gbSA6CiAgb09vIC4gYWRkX2hlYWRlciAoICdVc2VyLWFnZW50JyAsIG0gWyAnYWdlbnQnIF0gKQogaWYgJ3NldGNvb2tpZScgaW4gbSA6CiAgcHJpbnQgJ2FkZGluZyBjb29raWUnICwgbSBbICdzZXRjb29raWUnIF0KICBvT28gLiBhZGRfaGVhZGVyICggJ0Nvb2tpZScgLCBtIFsgJ3NldGNvb2tpZScgXSApCiAgaWYgMTAgLSAxMDogTzAwb09vT29PMG8wTyArIGlpaTFJMUkgJSBPb29vb29vb09PIC0gb09vb09vTzBPbzBPCiAgaWYgNzAgLSA3MDogSWkxSSAtIE8wb28wT08wCiAgaWYgMiAtIDI6IGlJaWkxSTExSTFJSTEKICBpZiA0NSAtIDQ1OiBPb29vb29vb09PIC8gaTExaUlpaUlpaQogdXJsbGliMiAuIHVybG9wZW4gKCBvT28gKQogb09vT29PID0gdXJsbGliMiAuIHVybG9wZW4gKCBvT28gKQogaWYgMTAgLSAxMDogTzBvbzBPTzAgLSBpaWlpSWkxMWkgKiBpSWlpMUkxMUkxSUkxICUgaUlpaTFJMTFJMUlJMSAqIE9vMG9vTzBvbzBvTyAtIG8wT09PCiBvME9PT09PME8gLiB3cml0ZSAoIG9Pb09vTyAuIHJlYWQgKCApICkKIG9Pb09vTyAuIGNsb3NlICggKQogbzBPT09PTzBPIC4gY2xvc2UgKCApCiBJMUkxSWlJaTEgPSBvT08wbzBvbzAgKCBjYXB0Y2hhID0gT28wICkKIElJaTExID0gSTFJMUlpSWkxIC4gZ2V0ICggKQogcmV0dXJuIElJaTExCiBpZiA5NyAtIDk3OiBpMTFpICUgSTFpMWlJMWkgKyBJMWkxaUkxaSAtIE8wTyAvIE8wMG9Pb09vTzBvME8gKiBvT29vT29PME9vME8KY2xhc3Mgb09PMG8wb28wICggeGJtY2d1aSAuIFdpbmRvd0RpYWxvZyApIDoKIGRlZiBfX2luaXRfXyAoIHNlbGYgLCAqIGFyZ3MgLCAqKiBrd2FyZ3MgKSA6CiAgc2VsZiAuIGNwdGxvYyA9IGt3YXJncyAuIGdldCAoICdjYXB0Y2hhJyApCiAgc2VsZiAuIGltZyA9IHhibWNndWkgLiBDb250cm9sSW1hZ2UgKCAzMzUgLCAzMCAsIDYyNCAsIDYwICwgc2VsZiAuIGNwdGxvYyApCiAgc2VsZiAuIGFkZENvbnRyb2wgKCBzZWxmIC4gaW1nICkKICBzZWxmIC4ga2JkID0geGJtYyAuIEtleWJvYXJkICggKQogIGlmIDE3IC0gMTc6IE8wMG9Pb09vTzBvME8KIGRlZiBnZXQgKCBzZWxmICkgOgogIHNlbGYgLiBzaG93ICggKQogIHRpbWUgLiBzbGVlcCAoIDIgKQogIHNlbGYgLiBrYmQgLiBkb01vZGFsICggKQogIGlmICggc2VsZiAuIGtiZCAuIGlzQ29uZmlybWVkICggKSApIDoKICAgaTFpMUlpSWkxID0gc2VsZiAuIGtiZCAuIGdldFRleHQgKCApCiAgIHNlbGYgLiBjbG9zZSAoICkKICAgcmV0dXJuIGkxaTFJaUlpMQogIHNlbGYgLiBjbG9zZSAoICkKICByZXR1cm4gRmFsc2UKICBpZiAyMiAtIDIyOiBpaWkxSTFJICogTzAgLiBpMTFpIC0gTzBPCmRlZiBPb09vSTFpSTExaUlpSWkxICggKSA6CiBpbXBvcnQgdGltZQogcmV0dXJuIHN0ciAoIGludCAoIHRpbWUgLiB0aW1lICggKSAqIDEwMDAgKSApCiBpZiA5MCAtIDkwOiBpaWlpSWkxMWkKZGVmIE9PMG9vbzBvT08gKCApIDoKIGltcG9ydCB0aW1lCiByZXR1cm4gc3RyICggaW50ICggdGltZSAuIHRpbWUgKCApICkgKQogaWYgOTQgLSA5NDogaWlpMUkxSSAvIG8wT09PICogSTFpMWlJMWkgLSBvbzAwMApkZWYgSTFJaTExSUkxSTEgKCApIDoKIElpSTFpSTFJaWlJaTEgPSBbIF0KIE9vTzBvbyA9IHN5cyAuIGFyZ3YgWyAyIF0KIGlmIGxlbiAoIE9vTzBvbyApID49IDIgOgogIE9vT29PME8gPSBzeXMgLiBhcmd2IFsgMiBdCiAgbzBpMUkxMWlJMWlpSSA9IE9vT29PME8gLiByZXBsYWNlICggJz8nICwgJycgKQogIGlmICggT29Pb08wTyBbIGxlbiAoIE9vT29PME8gKSAtIDEgXSA9PSAnLycgKSA6CiAgIE9vT29PME8gPSBPb09vTzBPIFsgMCA6IGxlbiAoIE9vT29PME8gKSAtIDIgXQogIEkxID0gbzBpMUkxMWlJMWlpSSAuIHNwbGl0ICggJyYnICkKICBJaUkxaUkxSWlpSWkxID0geyB9CiAgZm9yIE9vME8wT09Pb28gaW4gcmFuZ2UgKCBsZW4gKCBJMSApICkgOgogICBpaW9PMG8gPSB7IH0KICAgaWlvTzBvID0gSTEgWyBPbzBPME9PT29vIF0gLiBzcGxpdCAoICc9JyApCiAgIGlmICggbGVuICggaWlvTzBvICkgKSA9PSAyIDoKICAgIElpSTFpSTFJaWlJaTEgWyBpaW9PMG8gWyAwIF0gXSA9IGlpb08wbyBbIDEgXQogcmV0dXJuIElpSTFpSTFJaWlJaTEKIGlmIDUwIC0gNTA6IE8wb28wT08wIC8gTzBvbzBPTzAgKyBJaTFJICogSUkgLyBvME9PTwogaWYgMTQgLSAxNDogTzAwb09vT29PMG8wTyAlIG9Pb29Pb08wT28wTyAtIGlJaWkxSTExSTFJSTEgLiBJaTFJICsgTzBPIC0gSTFpMWlJMWkKZGVmIGlJMWlJaWlpSTFJMSAoICkgOgogSTExMTEgPSBqc29uIC4gbG9hZHMgKCBvcGVuICggb08wbzBvMG9vTzBvTyApIC4gcmVhZCAoICkgKQogSTExaWlJMWkxID0gbGVuICggSTExMTEgKQogZm9yIE9vME8wT09Pb28gaW4gSTExMTEgOgogIE8wME8wb09PMDBPMDAgPSBPbzBPME9PT29vIFsgMCBdCiAgaWkxaWkxMUlJSWlpSSA9IE9vME8wT09Pb28gWyAxIF0KICBPT09PID0gT28wTzBPT09vbyBbIDIgXQogIHRyeSA6CiAgIG9PMDBPT29PMDAgPSBPbzBPME9PT29vIFsgMyBdCiAgIGlmIG9PMDBPT29PMDAgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIGlmIGkxMSAuIGdldFNldHRpbmcgKCAndXNlX3RodW1iJyApID09ICJ0cnVlIiA6CiAgICBvTzAwT09vTzAwID0gT09PTwogICBlbHNlIDoKICAgIG9PMDBPT29PMDAgPSBvT08wMG9PTwogIHRyeSA6IE8wTzBPME9vID0gT28wTzBPT09vbyBbIDUgXQogIGV4Y2VwdCA6IE8wTzBPME9vID0gTm9uZQogIHRyeSA6IE8wMG8wT08wID0gT28wTzBPT09vbyBbIDYgXQogIGV4Y2VwdCA6IE8wMG8wT08wID0gTm9uZQogIGlmIDk0IC0gOTQ6IE9vb29vb29vT08gLiBJSSArIE8wMG9Pb09vTzBvME8gLSBvT29vT29PME9vME8KICBpZiBPbzBPME9PT29vIFsgNCBdID09IDAgOgogICBpMWkgKCBpaTFpaTExSUlJaWlJICwgTzAwTzBvT08wME8wMCAsIE9PT08gLCBvTzAwT09vTzAwICwgJycgLCAnJyAsICcnICwgJ2ZhdicgLCBPME8wTzBPbyAsIE8wMG8wT08wICwgSTExaWlJMWkxICkKICBlbHNlIDoKICAgb28wb29vb29PMCAoIE8wME8wb09PMDBPMDAgLCBpaTFpaTExSUlJaWlJICwgT28wTzBPT09vbyBbIDQgXSAsIE9PT08gLCBvT08wMG9PTyAsICcnICwgJycgLCAnJyAsICcnICwgJ2ZhdicgKQogICBpZiAxIC0gMTogSWlJaTExaUlJaTFJaSAuIE8wCiAgIGlmIDM3IC0gMzc6IGkxSUlpIC0gSWkxSSAlIE9vb29vb29vT08gLyBJaTFJICUgSUkKZGVmIGlpSWlJSTExaTEgKCBuYW1lICwgdXJsICwgaWNvbmltYWdlICwgZmFuYXJ0ICwgbW9kZSAsIHBsYXlsaXN0ID0gTm9uZSAsIHJlZ2V4cyA9IE5vbmUgKSA6CiBvT28wME9vbzBvMCA9IFsgXQogdHJ5IDoKICBpZiAzMyAtIDMzOiBpaWkxSTFJCiAgbmFtZSA9IG5hbWUgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKQogZXhjZXB0IDoKICBwYXNzCiBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBvTzBvMG8wb29PMG9PICkgPT0gRmFsc2UgOgogIE9PICggJ01ha2luZyBGYXZvcml0ZXMgRmlsZScgKQogIG9PbzAwT29vMG8wIC4gYXBwZW5kICggKCBuYW1lICwgdXJsICwgaWNvbmltYWdlICwgZmFuYXJ0ICwgbW9kZSAsIHBsYXlsaXN0ICwgcmVnZXhzICkgKQogIG8wME8wTyA9IG9wZW4gKCBvTzBvMG8wb29PMG9PICwgInciICkKICBvMDBPME8gLiB3cml0ZSAoIGpzb24gLiBkdW1wcyAoIG9PbzAwT29vMG8wICkgKQogIG8wME8wTyAuIGNsb3NlICggKQogZWxzZSA6CiAgT08gKCAnQXBwZW5kaW5nIEZhdm9yaXRlcycgKQogIG8wME8wTyA9IG9wZW4gKCBvTzBvMG8wb29PMG9PICkgLiByZWFkICggKQogIGlpMUkgPSBqc29uIC4gbG9hZHMgKCBvMDBPME8gKQogIGlpMUkgLiBhcHBlbmQgKCAoIG5hbWUgLCB1cmwgLCBpY29uaW1hZ2UgLCBmYW5hcnQgLCBtb2RlICkgKQogIG8wMDBvID0gb3BlbiAoIG9PMG8wbzBvb08wb08gLCAidyIgKQogIG8wMDBvIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBpaTFJICkgKQogIG8wMDBvIC4gY2xvc2UgKCApCiAgaWYgODcgLSA4Nzogb28wMDAgLyBPbzBvb08wb28wb08gKyBpSWlpMUkxMUkxSUkxCiAgaWYgOTMgLSA5MzogaUlpaTFJMTFJMUlJMSArIGlpaWlJaTExaSAlIElJCmRlZiBpaWkxSWlJMUkxICggbmFtZSApIDoKIGlpMUkgPSBqc29uIC4gbG9hZHMgKCBvcGVuICggb08wbzBvMG9vTzBvTyApIC4gcmVhZCAoICkgKQogZm9yIG9PMDBvMCBpbiByYW5nZSAoIGxlbiAoIGlpMUkgKSApIDoKICBpZiBpaTFJIFsgb08wMG8wIF0gWyAwIF0gPT0gbmFtZSA6CiAgIGRlbCBpaTFJIFsgb08wMG8wIF0KICAgbzAwMG8gPSBvcGVuICggb08wbzBvMG9vTzBvTyAsICJ3IiApCiAgIG8wMDBvIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBpaTFJICkgKQogICBvMDAwbyAuIGNsb3NlICggKQogICBicmVhawogeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuQ29udGFpbmVyLlJlZnJlc2giICkKIGlmIDY0IC0gNjQ6IElJIC8gTzAgKiBvbzAwMCAqIElJCmRlZiBPbzBvMDBPTzAwMDAgKCB1cmwgKSA6CiBpZiBpMTEgLiBnZXRTZXR0aW5nICggJ1VwZGF0ZWNvbW1vbnJlc29sdmVycycgKSA9PSAndHJ1ZScgOgogIG9PTzBPTzBPTyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvT28wb29vbzAwbyAsICdnZW5lc2lzcmVzb2x2ZXJzLnB5JyApCiAgaWYgeGJtY3ZmcyAuIGV4aXN0cyAoIG9PTzBPTzBPTyApIDoKICAgb3MgLiByZW1vdmUgKCBvT08wT08wT08gKQogICBpZiA2MCAtIDYwOiBpaWkxSTFJIC8gaTFJSWkgJSBvME9PTyAvIG8wT09PICogbzBPT08gLiBpMTFpSWlpSWlpCiAgbzBvT08wMCA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbGFtYmRhODEvbGFtYmRhLWFkZG9ucy9tYXN0ZXIvcGx1Z2luLnZpZGVvLmdlbmVzaXMvY29tbW9ucmVzb2x2ZXJzLnB5JwogIGlpMTFpaUlpID0gdXJsbGliIC4gdXJscmV0cmlldmUgKCBvMG9PTzAwICwgb09PME9PME9PICkKICBpMTEgLiBzZXRTZXR0aW5nICggJ1VwZGF0ZWNvbW1vbnJlc29sdmVycycgLCAnZmFsc2UnICkKIHRyeSA6CiAgaW1wb3J0IGdlbmVzaXNyZXNvbHZlcnMKIGV4Y2VwdCBFeGNlcHRpb24gOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihGYWxjb24gTW92aWVzLFBsZWFzZSBlbmFibGUgVXBkYXRlIENvbW1vbnJlc29sdmVycyB0byBQbGF5IGluIFNldHRpbmdzLiAtICwxMDAwMCkiICkKICBpZiA0OCAtIDQ4OiBPbzBvb08wb28wb08gJSBpaWkxSTFJCiBpMUkxSUlJMWkxaSA9IGdlbmVzaXNyZXNvbHZlcnMgLiBnZXQgKCB1cmwgKSAuIHJlc3VsdAogaWYgdXJsID09IGkxSTFJSUkxaTFpIG9yIGkxSTFJSUkxaTFpIGlzIE5vbmUgOgogIGlmIDQgLSA0OiBJMWkxaUkxaSAvIE8wMG9Pb09vTzBvME8gLSBPMDBvT29Pb08wbzBPCiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKEZhbGNvbiBNb3ZpZXMsIExvYWRpbmcgU3RyZWFtLi4gLSAsNTAwMCkiICkKICBpbXBvcnQgdXJscmVzb2x2ZXIKICBJaTExMWlJSUlpID0gdXJscmVzb2x2ZXIgLiBIb3N0ZWRNZWRpYUZpbGUgKCB1cmwgKQogIGlmIElpMTExaUlJSWkgOgogICBvbzBvb08wTzBvID0gdXJscmVzb2x2ZXIgLiByZXNvbHZlICggdXJsICkKICAgaTFJMUlJSTFpMWkgPSBvbzBvb08wTzBvCiBpZiBpMUkxSUlJMWkxaSA6CiAgaWYgaXNpbnN0YW5jZSAoIGkxSTFJSUkxaTFpICwgbGlzdCApIDoKICAgZm9yIGlpMWlJaTFpSWlJMWkgaW4gaTFJMUlJSTFpMWkgOgogICAgb28wb29PID0gaTExIC4gZ2V0U2V0dGluZyAoICdxdWFsaXR5JyApCiAgICBpZiBpaTFpSWkxaUlpSTFpIFsgJ3F1YWxpdHknIF0gPT0gJ0hEJyA6CiAgICAgb28wb29PME8wbyA9IGlpMWlJaTFpSWlJMWkgWyAndXJsJyBdCiAgICAgYnJlYWsKICAgIGVsaWYgaWkxaUlpMWlJaUkxaSBbICdxdWFsaXR5JyBdID09ICdTRCcgOgogICAgIG9vMG9vTzBPMG8gPSBpaTFpSWkxaUlpSTFpIFsgJ3VybCcgXQogICAgZWxpZiBpaTFpSWkxaUlpSTFpIFsgJ3F1YWxpdHknIF0gPT0gJzEwODBwJyBhbmQgaTExIC4gZ2V0U2V0dGluZyAoICcxMDgwcHF1YWxpdHknICkgPT0gJ3RydWUnIDoKICAgICBvbzBvb08wTzBvID0gaWkxaUlpMWlJaUkxaSBbICd1cmwnIF0KICAgICBicmVhawogIGVsc2UgOgogICBvbzBvb08wTzBvID0gaTFJMUlJSTFpMWkKIHJldHVybiBvbzBvb08wTzBvCmRlZiBJMTFvMDAwMG8wT28gKCBuYW1lICwgbXVfcGxheWxpc3QgKSA6CiBpbXBvcnQgdXJscGFyc2UKIGlmIGkxMSAuIGdldFNldHRpbmcgKCAnYXNrX3BsYXlsaXN0X2l0ZW1zJyApID09ICd0cnVlJyA6CiAgb29vME8wT09vME9vTyA9IFsgXQogIGZvciBPbzBPME9PT29vIGluIG11X3BsYXlsaXN0IDoKICAgSWkxaTEgPSB1cmxwYXJzZSAuIHVybHBhcnNlICggT28wTzBPT09vbyApIC4gbmV0bG9jCiAgIGlmIElpMWkxID09ICcnIDoKICAgIG9vbzBPME9PbzBPb08gLiBhcHBlbmQgKCBuYW1lICkKICAgZWxzZSA6CiAgICBvb28wTzBPT28wT29PIC4gYXBwZW5kICggSWkxaTEgKQogIG8wT08wMCA9IHhibWNndWkgLiBEaWFsb2cgKCApCiAgb08wMG8wID0gbzBPTzAwIC4gc2VsZWN0ICggJ0Nob29zZSBhIHZpZGVvIHNvdXJjZScgLCBvb28wTzBPT28wT29PICkKICBpZiBvTzAwbzAgPj0gMCA6CiAgIGlmICImbW9kZT0xOSIgaW4gbXVfcGxheWxpc3QgWyBvTzAwbzAgXSA6CiAgICB4Ym1jIC4gUGxheWVyICggKSAuIHBsYXkgKCBPbzBvMDBPTzAwMDAgKCBtdV9wbGF5bGlzdCBbIG9PMDBvMCBdIC4gcmVwbGFjZSAoICcmbW9kZT0xOScgLCAnJyApICkgKQogICBlbGlmICIkZG9yZWdleCIgaW4gbXVfcGxheWxpc3QgWyBvTzAwbzAgXSA6CiAgICBpZiA2NSAtIDY1OiBpaWlpSWkxMWkgKyBvME9PTyAvIElpMUkKICAgIG9vMG9vID0gbXVfcGxheWxpc3QgWyBvTzAwbzAgXSAuIHNwbGl0ICggJyZyZWdleHM9JyApCiAgICBpZiA0OSAtIDQ5OiBpMTFpSWlpSWlpICUgb28wMDAgKyBJMWkxaUkxaSAuIGkxMWkgJSBPMG9vME9PMCAqIElpMUkKICAgIGlpMWlpMTFJSUlpaUkgLCBJMUkxaSA9IEkxMWkxSUkgKCBvbzBvbyBbIDEgXSAsIG9vMG9vIFsgMCBdICkKICAgIHhibWMgLiBQbGF5ZXIgKCApIC4gcGxheSAoIGlpMWlpMTFJSUlpaUkgKQogICBlbHNlIDoKICAgIGlpMWlpMTFJSUlpaUkgPSBtdV9wbGF5bGlzdCBbIG9PMDBvMCBdCiAgICB4Ym1jIC4gUGxheWVyICggKSAuIHBsYXkgKCBpaTFpaTExSUlJaWlJICkKIGVsc2UgOgogIE8wTzBPME9vID0geGJtYyAuIFBsYXlMaXN0ICggMSApCiAgTzBPME8wT28gLiBjbGVhciAoICkKICBvME8wT09PT29PTzAgPSAwCiAgZm9yIE9vME8wT09Pb28gaW4gbXVfcGxheWxpc3QgOgogICBvME8wT09PT29PTzAgKz0gMQogICBvb29vID0geGJtY2d1aSAuIExpc3RJdGVtICggJyVzKSAlcycgJSAoIHN0ciAoIG8wTzBPT09Pb09PMCApICwgbmFtZSApICkKICAgTzBPME8wT28gLiBhZGQgKCBPbzBPME9PT29vICwgb29vbyApCiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICdwbGF5bGlzdC5wbGF5b2Zmc2V0KHZpZGVvLDApJyApCiAgIGlmIDI3IC0gMjc6IGkxMWlJaWlJaWkgLSBvT29vT29PME9vME8KICAgaWYgMzUgLSAzNTogT29vb29vb29PTyAtIEkxaTFpSTFpIC8gTzBPCmRlZiBpaWkxMWkxICggbmFtZSAsIHVybCApIDoKIGlmIGkxMSAuIGdldFNldHRpbmcgKCAnc2F2ZV9sb2NhdGlvbicgKSA9PSAiIiA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKCdGYWxjb24gTW92aWVzJywnQ2hvb3NlIGEgbG9jYXRpb24gdG8gc2F2ZSBmaWxlcy4nLDE1MDAwLCIgKyBJMUlpSWlpSUlJICsgIikiICkKICBpMTEgLiBvcGVuU2V0dGluZ3MgKCApCiBPb09vTzBPID0geyAndXJsJyA6IHVybCAsICdkb3dubG9hZF9wYXRoJyA6IGkxMSAuIGdldFNldHRpbmcgKCAnc2F2ZV9sb2NhdGlvbicgKSB9CiBkb3dubG9hZGVyIC4gZG93bmxvYWQgKCBuYW1lICwgT29Pb08wTyApCiBvME9PMDAgPSB4Ym1jZ3VpIC4gRGlhbG9nICggKQogbzAgPSBvME9PMDAgLiB5ZXNubyAoICdGYWxjb24gTW92aWVzJyAsICdEbyB5b3Ugd2FudCB0byBhZGQgdGhpcyBmaWxlIGFzIGEgc291cmNlPycgKQogaWYgbzAgOgogIE8wb28wT08wb09PT28gKCBvcyAuIHBhdGggLiBqb2luICggaTExIC4gZ2V0U2V0dGluZyAoICdzYXZlX2xvY2F0aW9uJyApICwgbmFtZSApICkKICBpZiA0OCAtIDQ4OiBJSSAqIG8wT09PCiAgaWYgMTUgLSAxNTogTzBPICogaWlpMUkxSSAlIGlJaWkxSTExSTFJSTEgKiBvME9PTwpkZWYgb28wb29vb29PMCAoIG5hbWUgLCB1cmwgLCBtb2RlICwgaWNvbmltYWdlICwgZmFuYXJ0ICwgZGVzY3JpcHRpb24gLCBnZW5yZSAsIGRhdGUgLCBjcmVkaXRzICwgc2hvd2NvbnRleHQgPSBGYWxzZSApIDoKIGlmIDMxIC0gMzE6IE8wTyAqIE8wIC4gaWlpaUlpMTFpCiBvb29PTzBvT29vTzAwID0gc3lzIC4gYXJndiBbIDAgXSArICI/dXJsPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgKyAiJm1vZGU9IiArIHN0ciAoIG1vZGUgKSArICImbmFtZT0iICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSArICImZmFuYXJ0PSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggZmFuYXJ0ICkKIE9PTyA9IFRydWUKIGlmIGRhdGUgPT0gJycgOgogIGRhdGUgPSBOb25lCiBlbHNlIDoKICBkZXNjcmlwdGlvbiArPSAnXG5cbkRhdGU6ICVzJyAlIGRhdGUKIG9vTzBPMDBPbzBvID0geGJtY2d1aSAuIExpc3RJdGVtICggbmFtZSAsIGljb25JbWFnZSA9ICJEZWZhdWx0Rm9sZGVyLnBuZyIgLCB0aHVtYm5haWxJbWFnZSA9IGljb25pbWFnZSApCiBvb08wTzAwT28wbyAuIHNldEluZm8gKCB0eXBlID0gIlZpZGVvIiAsIGluZm9MYWJlbHMgPSB7ICJUaXRsZSIgOiBuYW1lICwgIlBsb3QiIDogZGVzY3JpcHRpb24gLCAiR2VucmUiIDogZ2VucmUgLCAiZGF0ZWFkZGVkIiA6IGRhdGUgLCAiY3JlZGl0cyIgOiBjcmVkaXRzIH0gKQogb29PME8wME9vMG8gLiBzZXRQcm9wZXJ0eSAoICJGYW5hcnRfSW1hZ2UiICwgZmFuYXJ0ICkKIGlmIHNob3djb250ZXh0IDoKICBpSUlpSTExaTFJMTEgPSBbIF0KICBpZiBzaG93Y29udGV4dCA9PSAnc291cmNlJyA6CiAgIGlmIG5hbWUgaW4gc3RyICggT29vTzBPTyApIDoKICAgIGlJSWlJMTFpMUkxMSAuIGFwcGVuZCAoICggJ1JlbW92ZSBmcm9tIFNvdXJjZXMnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9OCZuYW1lPSVzKScgJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiAgZWxpZiBzaG93Y29udGV4dCA9PSAnZG93bmxvYWQnIDoKICAgaUlJaUkxMWkxSTExIC4gYXBwZW5kICggKCAnRG93bmxvYWQnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP3VybD0lcyZtb2RlPTkmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKICBlbGlmIHNob3djb250ZXh0ID09ICdmYXYnIDoKICAgaUlJaUkxMWkxSTExIC4gYXBwZW5kICggKCAnUmVtb3ZlIGZyb20gRmFsY29uIE1vdmllcyBGYXZvcml0ZXMnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9NiZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogICBpZiAyOSAtIDI5OiBPME8gKiBpSWlpMUkxMUkxSUkxICogTzAgLSBvbzAwMCAvIE9vMG9vTzBvbzBvTwogIGlmIG5vdCBuYW1lIGluIEkxSTExSTFJMUkgOgogICBpSUlpSTExaTFJMTEgLiBhcHBlbmQgKCAoICdBZGQgdG8gRmFsY29uIE1vdmllcyBGYXZvcml0ZXMnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9NSZuYW1lPSVzJnVybD0lcyZpY29uaW1hZ2U9JXMmZmFuYXJ0PSVzJmZhdl9tb2RlPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpY29uaW1hZ2UgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBmYW5hcnQgKSAsIG1vZGUgKSApICkKICBvb08wTzAwT28wbyAuIGFkZENvbnRleHRNZW51SXRlbXMgKCBpSUlpSTExaTFJMTEgKQogT09PID0geGJtY3BsdWdpbiAuIGFkZERpcmVjdG9yeUl0ZW0gKCBoYW5kbGUgPSBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB1cmwgPSBvb29PTzBvT29vTzAwICwgbGlzdGl0ZW0gPSBvb08wTzAwT28wbyAsIGlzRm9sZGVyID0gVHJ1ZSApCiBpZiA5OSAtIDk5OiBJSQogcmV0dXJuIE9PTwpkZWYgbzBPTzAwaUlpMTFpICggdXJsICwgdGl0bGUgLCBtZWRpYV90eXBlID0gJ3ZpZGVvJyApIDoKIGlmIDU2IC0gNTY6IGkxMWlJaWlJaWkgLiBJSSAvIE8wb28wT08wCiBpZiA0OCAtIDQ4OiBPME8gKiBJaTFJICsgaUlpaTFJMTFJMUlJMSAvIGkxMWkKIGltcG9ydCB5b3V0dWJlZGwKIGlmIG5vdCB1cmwgPT0gJycgOgogIGlmIG1lZGlhX3R5cGUgPT0gJ2F1ZGlvJyA6CiAgIHlvdXR1YmVkbCAuIHNpbmdsZV9ZRCAoIHVybCAsIGRvd25sb2FkID0gVHJ1ZSAsIGF1ZGlvID0gVHJ1ZSApCiAgZWxzZSA6CiAgIHlvdXR1YmVkbCAuIHNpbmdsZV9ZRCAoIHVybCAsIGRvd25sb2FkID0gVHJ1ZSApCiBlbGlmIHhibWMgLiBQbGF5ZXIgKCApIC4gaXNQbGF5aW5nICggKSA9PSBUcnVlIDoKICBpbXBvcnQgWURTdHJlYW1FeHRyYWN0b3IKICBpZiBZRFN0cmVhbUV4dHJhY3RvciAuIGlzRG93bmxvYWRpbmcgKCApID09IFRydWUgOgogICBpZiAxMDAgLSAxMDA6IGlpaTFJMUkKICAgWURTdHJlYW1FeHRyYWN0b3IgLiBtYW5hZ2VEb3dubG9hZHMgKCApCiAgZWxzZSA6CiAgIE9PTzBvT08wb29vMCA9IHhibWMgLiBQbGF5ZXIgKCApIC4gZ2V0UGxheWluZ0ZpbGUgKCApCiAgIGlmIDE0IC0gMTQ6IGkxMWkKICAgT09PMG9PTzBvb28wID0gT09PMG9PTzBvb28wIC4gc3BsaXQgKCAnfFVzZXItQWdlbnQ9JyApIFsgMCBdCiAgIG9vb28gPSB7ICd1cmwnIDogT09PMG9PTzBvb28wICwgJ3RpdGxlJyA6IHRpdGxlICwgJ21lZGlhX3R5cGUnIDogbWVkaWFfdHlwZSB9CiAgIHlvdXR1YmVkbCAuIHNpbmdsZV9ZRCAoICcnICwgZG93bmxvYWQgPSBUcnVlICwgZGxfaW5mbyA9IG9vb28gKQogZWxzZSA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKERPV05MT0FELEZpcnN0IFBsYXkgW0NPTE9SIHllbGxvd11XSElMRSBwbGF5aW5nIGRvd25sb2FkWy9DT0xPUl0gLDEwMDAwKSIgKQogIGlmIDQyIC0gNDI6IGkxMWkgKyBJMWkxaUkxaSAtIE8wMG9Pb09vTzBvME8gLSBPMCAvIElpSWkxMWlJSWkxSWkgJSBPbzBvb08wb28wb08KZGVmIE8wMG9PICggc2l0ZV9uYW1lICwgc2VhcmNoX3Rlcm0gPSBOb25lICkgOgogSUlpID0gJycKIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG9vMG8wTzAwICkgPT0gRmFsc2Ugb3IgaTExIC4gZ2V0U2V0dGluZyAoICdjbGVhcnNlYWNoaGlzdG9yeScgKSA9PSAndHJ1ZScgOgogIGlJSUkxSTFpMWkgKCBvbzBvME8wMCAsICcnICkKICBpMTEgLiBzZXRTZXR0aW5nICggImNsZWFyc2VhY2hoaXN0b3J5IiAsICJmYWxzZSIgKQogaWYgc2l0ZV9uYW1lID09ICdoaXN0b3J5JyA6CiAgT09PTzBvbzAgPSBPbzAwT09PT29vMG9vICggb28wbzBPMDAgKQogIE9vME8wME9vMG8wID0gcmUgLiBjb21waWxlICggJyguKz8pOiguKj8pKD86XHJ8XG4pJyApIC4gZmluZGFsbCAoIE9PT08wb28wICkKICBpZiA4MyAtIDgzOiBJaUlpMTFpSUlpMUlpCiAgZm9yIE8wME8wb09PMDBPMDAgLCBzZWFyY2hfdGVybSBpbiBPbzBPMDBPbzBvMCA6CiAgIGlmICdwbHVnaW46Ly8nIGluIHNlYXJjaF90ZXJtIDoKICAgIGkxaSAoIHNlYXJjaF90ZXJtICwgTzAwTzBvT08wME8wMCAsIElJaSAsICcnICwgJycgLCAnJyAsICcnICwgJycgLCBOb25lICwgJycgLCB0b3RhbCA9IGludCAoIGxlbiAoIE9vME8wME9vMG8wICkgKSApCiAgIGVsc2UgOgogICAgb28wb29vb29PMCAoIE8wME8wb09PMDBPMDAgKyAnOicgKyBzZWFyY2hfdGVybSAsIE8wME8wb09PMDBPMDAgLCAyNiAsIEkxSWlJaWlJSUkgLCBpSTExICwgJycgLCAnJyAsICcnICwgJycgKQogaWYgbm90IHNlYXJjaF90ZXJtIDoKICBPMG8wID0geGJtYyAuIEtleWJvYXJkICggJycgLCAnRW50ZXIgU2VhcmNoIFRlcm0nICkKICBPMG8wIC4gZG9Nb2RhbCAoICkKICBpZiAoIE8wbzAgLiBpc0NvbmZpcm1lZCAoICkgPT0gRmFsc2UgKSA6CiAgIHJldHVybgogIHNlYXJjaF90ZXJtID0gTzBvMCAuIGdldFRleHQgKCApCiAgaWYgbGVuICggc2VhcmNoX3Rlcm0gKSA9PSAwIDoKICAgcmV0dXJuCiBzZWFyY2hfdGVybSA9IHNlYXJjaF90ZXJtIC4gcmVwbGFjZSAoICcgJyAsICcrJyApCiBzZWFyY2hfdGVybSA9IHNlYXJjaF90ZXJtIC4gZW5jb2RlICggJ3V0Zi04JyApCiBpZiAneW91dHViZScgaW4gc2l0ZV9uYW1lIDoKICBpZiAzOCAtIDM4OiBJMWkxaUkxaSArIE9vb29vb29vT08gLiBpMUlJaQogIGltcG9ydCBfeXRwbGlzdAogIGlmIDE5IC0gMTk6IE8wb28wT08wIC0gSWlJaTExaUlJaTFJaSAtIE8wMG9Pb09vTzBvME8gLSBvbzAwMCAuIE8wb28wT08wIC4gSTFpMWlJMWkKICBpMTFJMUkgPSB7IH0KICBpMTFJMUkgPSBfeXRwbGlzdCAuIFlvVVR1YmUgKCAnc2VhcmNoWVQnICwgeW91dHViZSA9IHNlYXJjaF90ZXJtICwgbWF4X3BhZ2UgPSA0ICwgbm9zYXZlID0gJ25vc2F2ZScgKQogIEkxMWlpSTFpMSA9IGxlbiAoIGkxMUkxSSApCiAgZm9yIG8wTzBPT09Pb09PMCBpbiBpMTFJMUkgOgogICB0cnkgOgogICAgTzAwTzBvT08wME8wMCA9IGkxMUkxSSBbIG8wTzBPT09Pb09PMCBdIFsgJ3RpdGxlJyBdCiAgICBpSSA9IGkxMUkxSSBbIG8wTzBPT09Pb09PMCBdIFsgJ2RhdGUnIF0KICAgIHRyeSA6CiAgICAgb28wb29vb28wMG8gPSBpMTFJMUkgWyBvME8wT09PT29PTzAgXSBbICdkZXNjJyBdCiAgICBleGNlcHQgRXhjZXB0aW9uIDoKICAgICBvbzBvb29vbzAwbyA9ICdVTkFWQUlBQkxFJwogICAgIGlmIDc4IC0gNzg6IGlJaWkxSTExSTFJSTEgLiBJaUlpMTFpSUlpMUlpICUgaUlpaTFJMTFJMUlJMSAuIE8wIC8gSWkxSQogICAgaWkxaWkxMUlJSWlpSSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS9wbGF5Lz92aWRlb19pZD0nICsgaTExSTFJIFsgbzBPME9PT09vT08wIF0gWyAndXJsJyBdCiAgICBJSWkgPSAnaHR0cDovL2ltZy55b3V0dWJlLmNvbS92aS8nICsgaTExSTFJIFsgbzBPME9PT09vT08wIF0gWyAndXJsJyBdICsgJy8wLmpwZycKICAgIGkxaSAoIGlpMWlpMTFJSUlpaUkgLCBPMDBPMG9PTzAwTzAwICwgSUlpICwgJycgLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCAnJyAsIEkxMWlpSTFpMSApCiAgIGV4Y2VwdCBFeGNlcHRpb24gOgogICAgT08gKCAnVGhpcyBpdGVtIGlzIGlnbm9yZWQ6OicgKQogIE9vMG9PbzAwME9vTzAgPSBzaXRlX25hbWUgKyAnOicgKyBzZWFyY2hfdGVybSArICdcbicKICBpSUlJMUkxaTFpICggb3MgLiBwYXRoIC4gam9pbiAoIE9vMG8wMDAwbzBvMCAsICdoaXN0b3J5JyApICwgT28wb09vMDAwT29PMCAsIGFwcGVuZCA9IFRydWUgKQogZWxpZiAnZG1vdGlvbicgaW4gc2l0ZV9uYW1lIDoKICBJSWlpMUkxaSA9ICJodHRwczovL2FwaS5kYWlseW1vdGlvbi5jb20iCiAgaWYgMjIgLSAyMjogSUlpSTFJMTFpMTEgJSBPME8gLSBPb29vb29vb09PICogSUlpSTFJMTFpMTEKICBpbXBvcnQgX0RNc2VhcmNoCiAgaWkxaSA9IHN0ciAoIGkxMSAuIGdldFNldHRpbmcgKCAnZmFtaWx5RmlsdGVyJyApICkKICBfRE1zZWFyY2ggLiBsaXN0VmlkZW9zICggSUlpaTFJMWkgKyAiL3ZpZGVvcz9maWVsZHM9ZGVzY3JpcHRpb24sZHVyYXRpb24saWQsb3duZXIudXNlcm5hbWUsdGFrZW5fdGltZSx0aHVtYm5haWxfbGFyZ2VfdXJsLHRpdGxlLHZpZXdzX3RvdGFsJnNlYXJjaD0iICsgc2VhcmNoX3Rlcm0gKyAiJnNvcnQ9cmVsZXZhbmNlJmxpbWl0PTEwMCZmYW1pbHlfZmlsdGVyPSIgKyBpaTFpICsgIiZsb2NhbGl6YXRpb249ZW5fRU4mcGFnZT0xIiApCiAgaWYgMTIgLSAxMjogTzAwb09vT29PMG8wTwogIE9vMG9PbzAwME9vTzAgPSBzaXRlX25hbWUgKyAnOicgKyBzZWFyY2hfdGVybSArICdcbicKICBpSUlJMUkxaTFpICggb3MgLiBwYXRoIC4gam9pbiAoIE9vMG8wMDAwbzBvMCAsICdoaXN0b3J5JyApICwgT28wb09vMDAwT29PMCAsIGFwcGVuZCA9IFRydWUgKQogZWxpZiAnSU1EQmlkcGxheScgaW4gc2l0ZV9uYW1lIDoKICBJSWlpMUkxaSA9ICJodHRwOi8vd3d3Lm9tZGJhcGkuY29tLz90PSIKICBpaTFpaTExSUlJaWlJID0gSUlpaTFJMWkgKyBzZWFyY2hfdGVybQogIGlmIDcxIC0gNzE6IG9Pb29Pb08wT28wTyAuIGkxMWkgLiBvT29vT29PME9vME8gLSBJSQogIG9vT08wMG9PbyA9IGRpY3QgKCBoZWFkZXJzID0geyAnVXNlci1hZ2VudCcgOiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4xOyBXT1c2NDsgcnY6MTkuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xOS4wJyAsICdSZWZlcmVyJyA6ICdodHRwOi8vam9rZXIub3JnLycgLCAnQWNjZXB0LUVuY29kaW5nJyA6ICdnemlwLCBkZWZsYXRlJyAsICdDb250ZW50LVR5cGUnIDogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcgLCAnQWNjZXB0JyA6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonIH0gKQogIGlmIDQ1IC0gNDU6IE9vMG9vTzBvbzBvTyAvIE8wIC8gb28wMDAgKiBJaTFJCiAgT09Pb08wMCA9IHJlcXVlc3RzIC4gZ2V0ICggaWkxaWkxMUlJSWlpSSAsIGhlYWRlcnMgPSBvb09PMDBvT28gKQogIGlpMUkgPSBPT09vTzAwIC4ganNvbiAoICkKICBJaUlJaWlJID0gaWkxSSBbICdSZXNwb25zZScgXQogIGlmIElpSUlpaUkgPT0gJ1RydWUnIDoKICAgbzBvME9PMG8wMG8wTyA9IGlpMUkgWyAnaW1kYklEJyBdCiAgIE8wME8wb09PMDBPMDAgPSBpaTFJIFsgJ1RpdGxlJyBdICsgaWkxSSBbICdSZWxlYXNlZCcgXQogICBvME9PMDAgPSB4Ym1jZ3VpIC4gRGlhbG9nICggKQogICBvMCA9IG8wT08wMCAuIHllc25vICggJ0NoZWNrIE1vdmllIFRpdGxlJyAsICdQTEFZIDo6ICVzID8nICUgTzAwTzBvT08wME8wMCApCiAgIGlmIG8wIDoKICAgIGlpMWlpMTFJSUlpaUkgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnB1bHNhci9tb3ZpZS8nICsgbzBvME9PMG8wMG8wTyArICcvcGxheScKICAgIE9vMG9PbzAwME9vTzAgPSBPMDBPMG9PTzAwTzAwICsgJzonICsgaWkxaWkxMUlJSWlpSSArICdcbicKICAgIGlJSUkxSTFpMWkgKCBvbzBvME8wMCAsIE9vMG9PbzAwME9vTzAgLCBhcHBlbmQgPSBUcnVlICkKICAgIHJldHVybiBpaTFpaTExSUlJaWlJCiAgZWxzZSA6CiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihGYWxjb24gTW92aWVzLE5vIElNREIgbWF0Y2ggZm91bmQgLDcwMDAsIiArIEkxSWlJaWlJSUkgKyAiKSIgKQogICBpZiAyOCAtIDI4OiBPME8gLSBpaWlpSWkxMWkgKyBvbzAwMCArIE8wMG9Pb09vTzBvME8gLyBpSWlpMUkxMUkxSUkxCmRlZiBpaWlpaTExSTEgKCBzdHJpbmcgKSA6CiBpZiBpc2luc3RhbmNlICggc3RyaW5nICwgYmFzZXN0cmluZyApIDoKICBpZiBpc2luc3RhbmNlICggc3RyaW5nICwgdW5pY29kZSApIDoKICAgc3RyaW5nID0gc3RyaW5nIC4gZW5jb2RlICggJ2FzY2lpJyAsICdpZ25vcmUnICkKIHJldHVybiBzdHJpbmcKZGVmIElpMSAoIHN0cmluZyAsIGVuY29kaW5nID0gJ3V0Zi04JyApIDoKIGlmIGlzaW5zdGFuY2UgKCBzdHJpbmcgLCBiYXNlc3RyaW5nICkgOgogIGlmIG5vdCBpc2luc3RhbmNlICggc3RyaW5nICwgdW5pY29kZSApIDoKICAgc3RyaW5nID0gdW5pY29kZSAoIHN0cmluZyAsIGVuY29kaW5nICwgJ2lnbm9yZScgKQogcmV0dXJuIHN0cmluZwpkZWYgT09Pb0kxaUkxSWlJICggcyApIDogcmV0dXJuICIiIC4gam9pbiAoIGZpbHRlciAoIGxhbWJkYSBpMWkxSWkxSSA6IG9yZCAoIGkxaTFJaTFJICkgPCAxMjggLCBzICkgKQppZiAxMSAtIDExOiBJaTFJIC0gb28wMDAgLSBJaUlpMTFpSUlpMUlpICogb28wMDAgKyBJSQpkZWYgb29vbzBPMG8wT29PTyAoIGNvbW1hbmQgKSA6CiBpaTFJID0gJycKIHRyeSA6CiAgaWkxSSA9IHhibWMgLiBleGVjdXRlSlNPTlJQQyAoIElpMSAoIGNvbW1hbmQgKSApCiBleGNlcHQgVW5pY29kZUVuY29kZUVycm9yIDoKICBpaTFJID0geGJtYyAuIGV4ZWN1dGVKU09OUlBDICggaWlpaWkxMUkxICggY29tbWFuZCApICkKICBpZiAzNiAtIDM2OiBpaWlpSWkxMWkgLyBJMWkxaUkxaSAtIG9Pb29Pb08wT28wTyAuIG9Pb29Pb08wT28wTwogcmV0dXJuIElpMSAoIGlpMUkgKQogaWYgMiAtIDI6IE9vMG9vTzBvbzBvTyArIG8wT09PCiBpZiA5MSAtIDkxOiBvME9PTyAlIElJCmRlZiBJaTExSTEgKCApIDoKIGkxaTFJSTFJID0geGJtYyAuIGdldFNraW5EaXIgKCApCiBpZiBpMWkxSUkxSSA9PSAnc2tpbi5jb25mbHVlbmNlJyA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggJ0NvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDApJyApCiBlbGlmIGkxaTFJSTFJID09ICdza2luLmFlb24ubm94JyA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggJ0NvbnRhaW5lci5TZXRWaWV3TW9kZSg1MTEpJyApCiBlbHNlIDoKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAnQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMCknICkKICBpZiA2MiAtIDYyOiBvbzAwMCArIE8wMG9Pb09vTzBvME8gKiBPMG9vME9PMAogIGlmIDU0IC0gNTQ6IElJIC4gTzBPCmRlZiBJMWlpSWkxSWkxSUlpSSAoIHVybCApIDoKIG9vbzAwT28wME8wID0gSWkxICggJ3sianNvbnJwYyI6IjIuMCIsIm1ldGhvZCI6IkZpbGVzLkdldERpcmVjdG9yeSIsInBhcmFtcyI6eyJkaXJlY3RvcnkiOiIlcyIsIm1lZGlhIjoidmlkZW8iLCJwcm9wZXJ0aWVzIjpbInRodW1ibmFpbCIsInRpdGxlIiwieWVhciIsImRhdGVhZGRlZCIsImZhbmFydCIsInJhdGluZyIsInNlYXNvbiIsImVwaXNvZGUiLCJzdHVkaW8iXX0sImlkIjoxfScgKSAlIHVybAogaWYgNTQgLSA1NDogTzBPICUgaWlpaUlpMTFpIC0gSUlpSTFJMTFpMTEgLSBpSWlpMUkxMUkxSUkxCiBJSWkxaSA9IGpzb24gLiBsb2FkcyAoIG9vb28wTzBvME9vT08gKCBvb28wME9vMDBPMCApICkKIGZvciBPbzBPME9PT29vIGluIElJaTFpIFsgJ3Jlc3VsdCcgXSBbICdmaWxlcycgXSA6CiAgdXJsID0gT28wTzBPT09vbyBbICdmaWxlJyBdCiAgTzAwTzBvT08wME8wMCA9IE9PT29JMWlJMUlpSSAoIE9vME8wT09Pb28gWyAnbGFiZWwnIF0gKQogIElJaSA9IE9PT29JMWlJMUlpSSAoIE9vME8wT09Pb28gWyAndGh1bWJuYWlsJyBdICkKICB0cnkgOgogICBvT08wMG9PTyA9IE9PT29JMWlJMUlpSSAoIE9vME8wT09Pb28gWyAnZmFuYXJ0JyBdICkKICBleGNlcHQgRXhjZXB0aW9uIDoKICAgb09PMDBvT08gPSAnJwogIHRyeSA6CiAgIGlJID0gT28wTzBPT09vbyBbICd5ZWFyJyBdCiAgZXhjZXB0IEV4Y2VwdGlvbiA6CiAgIGlJID0gJycKICB0cnkgOgogICBpSWlJSWlpaTFJSSA9IE9vME8wT09Pb28gWyAnZXBpc29kZScgXQogICBJaSA9IE9vME8wT09Pb28gWyAnc2Vhc29uJyBdCiAgIGlmIGlJaUlJaWlpMUlJID09IC0gMSBvciBJaSA9PSAtIDEgOgogICAgb28wb29vb28wMG8gPSAnJwogICBlbHNlIDoKICAgIG9vMG9vb29vMDBvID0gJ1tDT0xPUiB5ZWxsb3ddIFMnICsgc3RyICggSWkgKSArICdbL0NPTE9SXVtDT0xPUiBob3RwaW5rXSBFJyArIHN0ciAoIGlJaUlJaWlpMUlJICkgKyAnWy9DT0xPUl0nCiAgZXhjZXB0IEV4Y2VwdGlvbiA6CiAgIG9vMG9vb29vMDBvID0gJycKICB0cnkgOgogICBpSWkxMUlpMWlJMSA9IE9vME8wT09Pb28gWyAnc3R1ZGlvJyBdCiAgIGlmIGlJaTExSWkxaUkxIDoKICAgIG9vMG9vb29vMDBvICs9ICdcbiBTdHVkaW86W0NPTE9SIHN0ZWVsYmx1ZV0gJyArIGlJaTExSWkxaUkxIFsgMCBdICsgJ1svQ09MT1JdJwogIGV4Y2VwdCBFeGNlcHRpb24gOgogICBpSWkxMUlpMWlJMSA9ICcnCiAgIGlmIDkxIC0gOTE6IElpMUkgKyBJMWkxaUkxaSAuIGlpaTFJMUkKICBpZiBPbzBPME9PT29vIFsgJ2ZpbGV0eXBlJyBdID09ICdmaWxlJyA6CiAgIGkxaSAoIHVybCAsIE8wME8wb09PMDBPMDAgLCBJSWkgLCBvT08wMG9PTyAsIG9vMG9vb29vMDBvICwgJycgLCBpSSAsICcnICwgTm9uZSAsICcnICwgdG90YWwgPSBsZW4gKCBJSWkxaSBbICdyZXN1bHQnIF0gWyAnZmlsZXMnIF0gKSApCiAgIGlmIDE1IC0gMTU6IGlpaTFJMUkKICAgaWYgOTQgLSA5NDogSTFpMWlJMWkgJSBpMTFpICogaTFJSWkgKiBpSWlpMUkxMUkxSUkxCiAgZWxzZSA6CiAgIG9vMG9vb29vTzAgKCBPMDBPMG9PTzAwTzAwICwgdXJsICwgNTMgLCBJSWkgLCBvT08wMG9PTyAsIG9vMG9vb29vMDBvICwgJycgLCBpSSAsICcnICkKICAgaWYgODEgLSA4MTogSUlpSTFJMTFpMTEgLSBpaWkxSTFJCiAgIGlmIDI0IC0gMjQ6IE9vb29vb29vT08gLiBPME8gKiBpMTFpCmRlZiBpMWkgKCB1cmwgLCBuYW1lICwgaWNvbmltYWdlICwgZmFuYXJ0ICwgZGVzY3JpcHRpb24gLCBnZW5yZSAsIGRhdGUgLCBzaG93Y29udGV4dCAsIHBsYXlsaXN0ICwgcmVnZXhzICwgdG90YWwgLCBzZXRDb29raWUgPSAiIiApIDoKIGlmIDU5IC0gNTk6IEkxaTFpSTFpICsgTzBPIC8gSWkxSQogaUlJaUkxMWkxSTExID0gWyBdCiB0cnkgOgogIG5hbWUgPSBuYW1lIC4gZW5jb2RlICggJ3V0Zi04JyApCiBleGNlcHQgOiBwYXNzCiBPT08gPSBUcnVlCiBpZiA5NyAtIDk3OiBJSWlJMUkxMWkxMSAqIE8wb28wT08wICUgSUkgLiBPMG9vME9PMCAtIEkxaTFpSTFpIC0gSWkxSQogaWYgcmVnZXhzIDoKICBvbzBPMG8wMCA9ICcxNycKICBpZiAzOSAtIDM5OiBJSSArIE8wIC8gaTFJSWkgJSBPbzBvb08wb28wb08gLyBpaWlpSWkxMWkgKiBPbzBvb08wb28wb08KICBpSUlpSTExaTFJMTEgLiBhcHBlbmQgKCAoICdbQ09MT1Igd2hpdGVdISFEb3dubG9hZCBDdXJyZW50bHkgUGxheWluZyEhWy9DT0xPUl0nICwgJ1hCTUMuUnVuUGx1Z2luKCVzP3VybD0lcyZtb2RlPTIxJm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiBlbGlmIGFueSAoIHggaW4gdXJsIGZvciB4IGluIElpaUlJSTExMWlJICkgYW5kIHVybCAuIHN0YXJ0c3dpdGggKCAnaHR0cCcgKSA6CiAgb28wTzBvMDAgPSAnMTknCiAgaWYgNzcgLSA3NzogT28wb29PMG9vMG9PIC4gSTFpMWlJMWkgJSBvbzAwMAogIGlJSWlJMTFpMUkxMSAuIGFwcGVuZCAoICggJ1tDT0xPUiB3aGl0ZV0hIURvd25sb2FkIEN1cnJlbnRseSBQbGF5aW5nISFbL0NPTE9SXScgLCAnWEJNQy5SdW5QbHVnaW4oJXM/dXJsPSVzJm1vZGU9MjEmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKIGVsaWYgdXJsIC4gZW5kc3dpdGggKCAnJm1vZGU9MTgnICkgOgogIHVybCA9IHVybCAuIHJlcGxhY2UgKCAnJm1vZGU9MTgnICwgJycgKQogIG9vME8wbzAwID0gJzE4JwogIGlmIDQyIC0gNDI6IE9vMG9vTzBvbzBvTyAlIE8wb28wT08wICUgSWlJaTExaUlJaTFJaSAlIGlpaWlJaTExaSArIGlpaTFJMUkgJSBvbzAwMAogIGlJSWlJMTFpMUkxMSAuIGFwcGVuZCAoICggJ1tDT0xPUiB3aGl0ZV0hIURvd25sb2FkISFbL0NPTE9SXScgLCAnWEJNQy5SdW5QbHVnaW4oJXM/dXJsPSVzJm1vZGU9MjMmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKICBpZiBpMTEgLiBnZXRTZXR0aW5nICggJ2RsYXVkaW9vbmx5JyApID09ICd0cnVlJyA6CiAgIGlJSWlJMTFpMUkxMSAuIGFwcGVuZCAoICggJyEhRG93bmxvYWQgW0NPTE9SIHNlYWJsdWVdQXVkaW8hIVsvQ09MT1JdJyAsICdYQk1DLlJ1blBsdWdpbiglcz91cmw9JXMmbW9kZT0yNCZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogZWxpZiB1cmwgLiBzdGFydHN3aXRoICggJ21hZ25ldDo/eHQ9JyApIG9yICcudG9ycmVudCcgaW4gdXJsIDoKICBpZiAzIC0gMzogaWlpaUlpMTFpCiAgaWYgJyYnIGluIHVybCBhbmQgbm90ICcmYW1wOycgaW4gdXJsIDoKICAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICcmJyAsICcmYW1wOycgKQogIHVybCA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ucHVsc2FyL3BsYXk/dXJpPScgKyB1cmwKICBvbzBPMG8wMCA9ICcxMicKICBpZiA2NCAtIDY0OiBPME8gLiBvT29vT29PME9vME8gLSBPb29vb29vb09PIC4gSUkgLSBPMG9vME9PMAogZWxzZSA6CiAgb28wTzBvMDAgPSAnMTInCiAgaWYgNzcgLSA3NzogTzAwb09vT29PMG8wTyAlIG9vMDAwIC8gaTExaSAlIE8wb28wT08wICUgT29vb29vb29PTyAlIE8wTwogIGlJSWlJMTFpMUkxMSAuIGFwcGVuZCAoICggJ1tDT0xPUiB3aGl0ZV0hIURvd25sb2FkIEN1cnJlbnRseSBQbGF5aW5nISFbL0NPTE9SXScgLCAnWEJNQy5SdW5QbHVnaW4oJXM/dXJsPSVzJm1vZGU9MjEmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKIG9vb09PMG9Pb29PMDAgPSBzeXMgLiBhcmd2IFsgMCBdICsgIj8iCiBJMWkxMUlJMTFpMWlJID0gRmFsc2UKIGlmIDQzIC0gNDM6IElJaUkxSTExaTExIC4gSTFpMWlJMWkKIGlmIHBsYXlsaXN0IDoKICBpZiBpMTEgLiBnZXRTZXR0aW5nICggJ2FkZF9wbGF5bGlzdCcgKSA9PSAiZmFsc2UiIDoKICAgb29vT08wb09vb08wMCArPSAidXJsPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgKyAiJm1vZGU9IiArIG9vME8wbzAwCiAgZWxzZSA6CiAgIG9vb09PMG9Pb29PMDAgKz0gIm1vZGU9MTMmbmFtZT0lcyZwbGF5bGlzdD0lcyIgJSAoIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggc3RyICggcGxheWxpc3QgKSAuIHJlcGxhY2UgKCAnLCcgLCAnfHwnICkgKSApCiAgIG5hbWUgPSBuYW1lICsgJ1tDT0xPUiBtYWdlbnRhXSAoJyArIHN0ciAoIGxlbiAoIHBsYXlsaXN0ICkgKSArICcgaXRlbXMgKVsvQ09MT1JdJwogICBJMWkxMUlJMTFpMWlJID0gVHJ1ZQogZWxzZSA6CiAgb29vT08wb09vb08wMCArPSAidXJsPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgKyAiJm1vZGU9IiArIG9vME8wbzAwCiBpZiByZWdleHMgOgogIG9vb09PMG9Pb29PMDAgKz0gIiZyZWdleHM9IiArIHJlZ2V4cwogaWYgbm90IHNldENvb2tpZSA9PSAnJyA6CiAgb29vT08wb09vb08wMCArPSAiJnNldENvb2tpZT0iICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHNldENvb2tpZSApCiAgaWYgMTIgLSAxMjogSTFpMWlJMWkgKyBJaTFJICsgaWlpMUkxSSAuIE9vMG9vTzBvbzBvTyAvIE8wMG9Pb09vTzBvME8KIGlmIGRhdGUgPT0gJycgOgogIGRhdGUgPSBOb25lCiBlbHNlIDoKICBkZXNjcmlwdGlvbiArPSAnXG5cbkRhdGU6ICVzJyAlIGRhdGUKIG9vTzBPMDBPbzBvID0geGJtY2d1aSAuIExpc3RJdGVtICggbmFtZSAsIGljb25JbWFnZSA9ICJEZWZhdWx0VmlkZW8ucG5nIiAsIHRodW1ibmFpbEltYWdlID0gaWNvbmltYWdlICkKIG9vTzBPMDBPbzBvIC4gc2V0SW5mbyAoIHR5cGUgPSAiVmlkZW8iICwgaW5mb0xhYmVscyA9IHsgIlRpdGxlIiA6IG5hbWUgLCAiUGxvdCIgOiBkZXNjcmlwdGlvbiAsICJHZW5yZSIgOiBnZW5yZSAsICJkYXRlYWRkZWQiIDogZGF0ZSB9ICkKIG9vTzBPMDBPbzBvIC4gc2V0UHJvcGVydHkgKCAiRmFuYXJ0X0ltYWdlIiAsIGZhbmFydCApCiBpZiAyOSAtIDI5OiBPbzBvb08wb28wb08gLiBJSSAtIGkxMWkKIGlmICggbm90IEkxaTExSUkxMWkxaUkgKSBhbmQgbm90IGFueSAoIHggaW4gdXJsIGZvciB4IGluIE9vICkgOgogIGlmIHJlZ2V4cyA6CiAgIGlmICckcHlGdW5jdGlvbjpwbGF5bWVkaWEoJyBub3QgaW4gdXJsbGliIC4gdW5xdW90ZV9wbHVzICggcmVnZXhzICkgYW5kICdub3RwbGF5YWJsZScgbm90IGluIHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIHJlZ2V4cyApIDoKICAgIGlmIDY4IC0gNjg6IGlJaWkxSTExSTFJSTEgKyBpMTFpIC8gaWlpaUlpMTFpCiAgICBvb08wTzAwT28wbyAuIHNldFByb3BlcnR5ICggJ0lzUGxheWFibGUnICwgJ3RydWUnICkKICBlbHNlIDoKICAgb29PME8wME9vMG8gLiBzZXRQcm9wZXJ0eSAoICdJc1BsYXlhYmxlJyAsICd0cnVlJyApCiBlbHNlIDoKICBPTyAoICdOT1Qgc2V0dGluZyBpc3BsYXlhYmxlJyArIHVybCApCiAgaWYgOTEgLSA5MTogb28wMDAgJSBpSWlpMUkxMUkxSUkxIC4gb09vb09vTzBPbzBPCiBpZiBzaG93Y29udGV4dCA6CiAgaUlJaUkxMWkxSTExID0gWyBdCiAgaWYgc2hvd2NvbnRleHQgPT0gJ2ZhdicgOgogICBpSUlpSTExaTFJMTEgLiBhcHBlbmQgKAogKCAnUmVtb3ZlIGZyb20gRmFsY29uIE1vdmllcyBGYXZvcml0ZXMnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9NiZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkKICkKICBlbGlmIG5vdCBuYW1lIGluIEkxSTExSTFJMUkgOgogICBPMDBvb29vbzAwID0gKAogJyVzP21vZGU9NSZuYW1lPSVzJnVybD0lcyZpY29uaW1hZ2U9JXMmZmFuYXJ0PSVzJmZhdl9tb2RlPTAnCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggaWNvbmltYWdlICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggZmFuYXJ0ICkgKQogKQogICBpZiBwbGF5bGlzdCA6CiAgICBPMDBvb29vbzAwICs9ICdwbGF5bGlzdD0nICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHN0ciAoIHBsYXlsaXN0ICkgLiByZXBsYWNlICggJywnICwgJ3x8JyApICkKICAgaWYgcmVnZXhzIDoKICAgIE8wMG9vb29vMDAgKz0gIiZyZWdleHM9IiArIHJlZ2V4cwogICBpSUlpSTExaTFJMTEgLiBhcHBlbmQgKCAoICdBZGQgdG8gRmFsY29uIE1vdmllcyBGYXZvcml0ZXMnICwgJ1hCTUMuUnVuUGx1Z2luKCVzKScgJSBPMDBvb29vbzAwICkgKQogIG9vTzBPMDBPbzBvIC4gYWRkQ29udGV4dE1lbnVJdGVtcyAoIGlJSWlJMTFpMUkxMSApCiAgaWYgOTQgLSA5NDogaWlpMUkxSSAtIGkxMWkgLiBvT29vT29PME9vME8gLSBJSWlJMUkxMWkxMSArIG8wT09PICogbzBPT08KIGlmIG5vdCBwbGF5bGlzdCBpcyBOb25lIDoKICBpZiBpMTEgLiBnZXRTZXR0aW5nICggJ2FkZF9wbGF5bGlzdCcgKSA9PSAiZmFsc2UiIDoKICAgSTFpaUlpaWlpMTExMSA9IG5hbWUgLiBzcGxpdCAoICcpICcgKSBbIDEgXQogICBJMWlpMWkxMWkgPSBbCiAoICdQbGF5ICcgKyBJMWlpSWlpaWkxMTExICsgJyBQbGF5TGlzdCcgLCAnWEJNQy5SdW5QbHVnaW4oJXM/bW9kZT0xMyZuYW1lPSVzJnBsYXlsaXN0PSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIEkxaWlJaWlpaTExMTEgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBzdHIgKCBwbGF5bGlzdCApIC4gcmVwbGFjZSAoICcsJyAsICd8fCcgKSApICkgKQogXQogICBvb08wTzAwT28wbyAuIGFkZENvbnRleHRNZW51SXRlbXMgKCBJMWlpMWkxMWkgKQogICBpZiA4NiAtIDg2OiBPMCAlIGkxSUlpIC4gaTExaSAuIGlpaTFJMUkKICAgaWYgNDQgLSA0NDogaTExaUlpaUlpaSAqIGlpaTFJMUkgKyBvbzAwMCArIE9vMG9vTzBvbzBvTyAqIE8wIC4gT28wb29PMG9vMG9PCiBPT08gPSB4Ym1jcGx1Z2luIC4gYWRkRGlyZWN0b3J5SXRlbSAoIGhhbmRsZSA9IGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHVybCA9IG9vb09PMG9Pb29PMDAgLCBsaXN0aXRlbSA9IG9vTzBPMDBPbzBvICwgdG90YWxJdGVtcyA9IHRvdGFsICkKIGlmIDE5IC0gMTk6IGkxMWkgLSBPbzBvb08wb28wb08KIHJldHVybiBPT08KIGlmIDU5IC0gNTk6IElpSWkxMWlJSWkxSWkgKiBPME8gLSBPMDBvT29Pb08wbzBPIC4gSWkxSQpkZWYgbzBPTzAwb28wTyAoIHVybCAsIG5hbWUgLCBpY29uaW1hZ2UgLCBzZXRyZXNvbHZlZCA9IFRydWUgKSA6CiBpZiBzZXRyZXNvbHZlZCA6CiAgb29PME8wME9vMG8gPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBuYW1lICwgaWNvbkltYWdlID0gaWNvbmltYWdlICkKICBvb08wTzAwT28wbyAuIHNldEluZm8gKCB0eXBlID0gJ1ZpZGVvJyAsIGluZm9MYWJlbHMgPSB7ICdUaXRsZScgOiBuYW1lIH0gKQogIG9vTzBPMDBPbzBvIC4gc2V0UHJvcGVydHkgKCAiSXNQbGF5YWJsZSIgLCAidHJ1ZSIgKQogIG9vTzBPMDBPbzBvIC4gc2V0UGF0aCAoIHN0ciAoIHVybCApICkKICB4Ym1jcGx1Z2luIC4gc2V0UmVzb2x2ZWRVcmwgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCBUcnVlICwgb29PME8wME9vMG8gKQogZWxzZSA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggJ1hCTUMuUnVuUGx1Z2luKCcgKyB1cmwgKyAnKScgKQogIGlmIDQ2IC0gNDY6IGkxMWlJaWlJaWkgLSBJaTFJICogb09vb09vTzBPbzBPICogaWlpMUkxSSAlIG8wT09PICogaTFJSWkKICBpZiA1IC0gNTogTzAgLyBJSSAuIElJaUkxSTExaTExICsgT29vb29vb29PTwogIGlmIDk3IC0gOTc6IE9vMG9vTzBvbzBvTyAuIE8wMG9Pb09vTzBvME8gLiBPMDBvT29Pb08wbzBPIC8gaUlpaTFJMTFJMUlJMSAtIE8wTyArIE8wb28wT08wCiAgaWYgMzIgLSAzMjogSWkxSSAuIElpSWkxMWlJSWkxSWkgJSBPbzBvb08wb28wb08gKyBvME9PTyArIE8wTwpkZWYgT29vT28wb28wTzBvMDBPICggbGluayApIDoKIGlpMWlpMTFJSUlpaUkgPSB1cmxsaWIgLiB1cmxvcGVuICggbGluayApCiBPT09vT09vMG8gPSBpaTFpaTExSUlJaWlJIC4gcmVhZCAoICkKIGlpMWlpMTFJSUlpaUkgLiBjbG9zZSAoICkKIElpSTFJaWkxID0gT09Pb09PbzBvIC4gc3BsaXQgKCAiSmV0enQiICkKIE9vb29vID0gSWlJMUlpaTEgWyAxIF0gLiBzcGxpdCAoICdwcm9ncmFtbS9kZXRhaWwucGhwP2NvbnN0X2lkPScgKQogaUlpaWlJaUlpID0gT29vb28gWyAxIF0gLiBzcGxpdCAoICc8YnIgLz48YSBocmVmPSIvJyApCiBpMUkxSWkxMWkgPSBpSWlpaUlpSWkgWyAwIF0gWyA0MCA6IGxlbiAoIGlJaWlpSWlJaSBbIDAgXSApIF0KIEkxaUlpaWlJMSA9IE9vb29vIFsgMiBdIC4gc3BsaXQgKCAiPC9hPjwvcD48L2Rpdj4iICkKIE9PTzBPMDBPbyA9IEkxaUlpaWlJMSBbIDAgXSBbIDE3IDogbGVuICggSTFpSWlpaUkxIFsgMCBdICkgXQogT09PME8wME9vID0gT09PME8wME9vIC4gZW5jb2RlICggJ3V0Zi04JyApCiByZXR1cm4gIiAgLSAiICsgT09PME8wME9vICsgIiAtICIgKyBpMUkxSWkxMWkKIGlmIDEzIC0gMTM6IGlJaWkxSTExSTFJSTEKIGlmIDIgLSAyOiBpMUlJaSAqIGlpaWlJaTExaSAtIGlpaWlJaTExaSArIE9vb29vb29vT08gJSBvbzAwMCAvIG9vMDAwCmRlZiBJMWkxMTFJICggdXJsICwgcmVnZXggKSA6CiBpaTFJID0gb09vTyAoIHVybCApCiB0cnkgOgogIG8wTzBPT09Pb09PMCA9IHJlIC4gZmluZGFsbCAoIHJlZ2V4ICwgaWkxSSApIFsgMCBdCiAgcmV0dXJuIG8wTzBPT09Pb09PMAogZXhjZXB0IDoKICBPTyAoICdyZWdleCBmYWlsZWQnICkKICBPTyAoIHJlZ2V4ICkKICByZXR1cm4KICBpZiAzIC0gMzogT29vb29vb29PTwogIGlmIDcxIC0gNzE6IE9vMG9vTzBvbzBvTyArIGkxSUlpIC0gTzBvbzBPTzAgLSBpMTFpSWlpSWlpIC4gaWlpMUkxSSAtIElJCnhibWNwbHVnaW4gLiBzZXRDb250ZW50ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgJ21vdmllcycgKQppZiA4NSAtIDg1OiBvME9PTyAtIG9vMDAwIC8gbzBPT08gKyBJaTFJIC0gTzBvbzBPTzAKdHJ5IDoKIHhibWNwbHVnaW4gLiBhZGRTb3J0TWV0aG9kICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgeGJtY3BsdWdpbiAuIFNPUlRfTUVUSE9EX1VOU09SVEVEICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIHhibWNwbHVnaW4gLiBhZGRTb3J0TWV0aG9kICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgeGJtY3BsdWdpbiAuIFNPUlRfTUVUSE9EX0xBQkVMICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIHhibWNwbHVnaW4gLiBhZGRTb3J0TWV0aG9kICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgeGJtY3BsdWdpbiAuIFNPUlRfTUVUSE9EX0RBVEUgKQpleGNlcHQgOgogcGFzcwp0cnkgOgogeGJtY3BsdWdpbiAuIGFkZFNvcnRNZXRob2QgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB4Ym1jcGx1Z2luIC4gU09SVF9NRVRIT0RfR0VOUkUgKQpleGNlcHQgOgogcGFzcwogaWYgNDkgLSA0OTogTzBPIC0gTzAgLyBPME8gKiBvbzAwMCArIEkxaTFpSTFpCk9vT29PME8gPSBJMUlpMTFJSTFJMSAoICkKaWYgMzUgLSAzNTogaTExaSAuIG9Pb29Pb08wT28wTyAvIGkxSUlpIC8gb09vb09vTzBPbzBPICogaWlpaUlpMTFpCmlpMWlpMTFJSUlpaUkgPSBOb25lCk8wME8wb09PMDBPMDAgPSBOb25lCm9vME8wbzAwID0gTm9uZQpPME8wTzBPbyA9IE5vbmUKT09PTyA9IE5vbmUKb09PMDBvT08gPSBpSTExCk8wTzBPME9vID0gTm9uZQpPbzBPMDAwME9vMDBvID0gTm9uZQpPMDBvME9PMCA9IE5vbmUKaWYgMjAgLSAyMDogTzBPIC4gb09vb09vTzBPbzBPICogaTExaUlpaUlpaSAvIGkxMWlJaWlJaWkKdHJ5IDoKIGlpMWlpMTFJSUlpaUkgPSB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBPb09vTzBPIFsgInVybCIgXSApIC4gZGVjb2RlICggJ3V0Zi04JyApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiBPMDBPMG9PTzAwTzAwID0gdXJsbGliIC4gdW5xdW90ZV9wbHVzICggT29Pb08wTyBbICJuYW1lIiBdICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIE9PT08gPSB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBPb09vTzBPIFsgImljb25pbWFnZSIgXSApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiBvT08wMG9PTyA9IHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIE9vT29PME8gWyAiZmFuYXJ0IiBdICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIG9vME8wbzAwID0gaW50ICggT29Pb08wTyBbICJtb2RlIiBdICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIE8wTzBPME9vID0gZXZhbCAoIHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIE9vT29PME8gWyAicGxheWxpc3QiIF0gKSAuIHJlcGxhY2UgKCAnfHwnICwgJywnICkgKQpleGNlcHQgOgogcGFzcwp0cnkgOgogT28wTzAwMDBPbzAwbyA9IGludCAoIE9vT29PME8gWyAiZmF2X21vZGUiIF0gKQpleGNlcHQgOgogcGFzcwp0cnkgOgogTzAwbzBPTzAgPSBPb09vTzBPIFsgInJlZ2V4cyIgXQpleGNlcHQgOgogcGFzcwogaWYgODkgLSA4OTogTzBvbzBPTzAgLiBpMTFpSWlpSWlpICogTzAKT08gKCAiTW9kZTogIiArIHN0ciAoIG9vME8wbzAwICkgKQppZiBub3QgaWkxaWkxMUlJSWlpSSBpcyBOb25lIDoKIE9PICggIlVSTDogIiArIHN0ciAoIGlpMWlpMTFJSUlpaUkgLiBlbmNvZGUgKCAndXRmLTgnICkgKSApCk9PICggIk5hbWU6ICIgKyBzdHIgKCBPMDBPMG9PTzAwTzAwICkgKQppZiA0NCAtIDQ0OiBpMUlJaSAuIG9Pb29Pb08wT28wTyAvIGkxMWlJaWlJaWkgKyBPbzBvb08wb28wb08KaWYgb28wTzBvMDAgPT0gTm9uZSA6CiBPTyAoICJJbmRleCIgKQogb28gKCApCiBpZiAyNyAtIDI3OiBJaTFJCmVsaWYgb28wTzBvMDAgPT0gMSA6CiBPTyAoICJnZXREYXRhIiApCiBPMG8wT28gKCBpaTFpaTExSUlJaWlJICwgb09PMDBvT08gKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDUyIC0gNTI6IEkxaTFpSTFpICUgb28wMDAgKyBpSWlpMUkxMUkxSUkxICogaWlpaUlpMTFpIC4gTzAwb09vT29PMG8wTwplbGlmIG9vME8wbzAwID09IDIgOgogT08gKCAiZ2V0Q2hhbm5lbEl0ZW1zIiApCiBPb08wT09PT28wTyAoIE8wME8wb09PMDBPMDAgLCBpaTFpaTExSUlJaWlJICwgb09PMDBvT08gKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDk1IC0gOTU6IGlJaWkxSTExSTFJSTEgLiBPbzBvb08wb28wb08gLSBPb29vb29vb09PICogTzBPIC8gSWlJaTExaUlJaTFJaQplbGlmIG9vME8wbzAwID09IDMgOgogT08gKCAiZ2V0U3ViQ2hhbm5lbEl0ZW1zIiApCiBPTzBPMDAwICggTzAwTzBvT08wME8wMCAsIGlpMWlpMTFJSUlpaUkgLCBvT08wMG9PTyApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgNzQgLSA3NDogaWlpaUlpMTFpCmVsaWYgb28wTzBvMDAgPT0gNCA6CiBPTyAoICJnZXRGYXZvcml0ZXMiICkKIGlJMWlJaWlpSTFJMSAoICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiAzNCAtIDM0OiBPMG9vME9PMAplbGlmIG9vME8wbzAwID09IDUgOgogT08gKCAiYWRkRmF2b3JpdGUiICkKIHRyeSA6CiAgTzAwTzBvT08wME8wMCA9IE8wME8wb09PMDBPMDAgLiBzcGxpdCAoICdcXCAnICkgWyAxIF0KIGV4Y2VwdCA6CiAgcGFzcwogdHJ5IDoKICBPMDBPMG9PTzAwTzAwID0gTzAwTzBvT08wME8wMCAuIHNwbGl0ICggJyAgLSAnICkgWyAwIF0KIGV4Y2VwdCA6CiAgcGFzcwogaWlJaUlJMTFpMSAoIE8wME8wb09PMDBPMDAgLCBpaTFpaTExSUlJaWlJICwgT09PTyAsIG9PTzAwb09PICwgT28wTzAwMDBPbzAwbyApCiBpZiA0NCAtIDQ0OiBpMUlJaSAlIG9Pb29Pb08wT28wTyAlIElpSWkxMWlJSWkxSWkKZWxpZiBvbzBPMG8wMCA9PSA2IDoKIE9PICggInJtRmF2b3JpdGUiICkKIHRyeSA6CiAgTzAwTzBvT08wME8wMCA9IE8wME8wb09PMDBPMDAgLiBzcGxpdCAoICdcXCAnICkgWyAxIF0KIGV4Y2VwdCA6CiAgcGFzcwogdHJ5IDoKICBPMDBPMG9PTzAwTzAwID0gTzAwTzBvT08wME8wMCAuIHNwbGl0ICggJyAgLSAnICkgWyAwIF0KIGV4Y2VwdCA6CiAgcGFzcwogaWlpMUlpSTFJMSAoIE8wME8wb09PMDBPMDAgKQogaWYgOSAtIDk6IElJaUkxSTExaTExICUgT29vb29vb29PTyAtIE8wMG9Pb09vTzBvME8KZWxpZiBvbzBPMG8wMCA9PSA3IDoKIE9PICggImFkZFNvdXJjZSIgKQogTzBvbzBPTzBvT09PbyAoIGlpMWlpMTFJSUlpaUkgKQogaWYgNDMgLSA0MzogTzBPICUgTzBPCmVsaWYgb28wTzBvMDAgPT0gOCA6CiBPTyAoICJybVNvdXJjZSIgKQogaUlJICggTzAwTzBvT08wME8wMCApCiBpZiA0NiAtIDQ2OiBJSWlJMUkxMWkxMSAlIGlJaWkxSTExSTFJSTEgLiBPMG9vME9PMCAuIE8wICogSUkgLyBPb29vb29vb09PCmVsaWYgb28wTzBvMDAgPT0gOSA6CiBPTyAoICJkb3dubG9hZF9maWxlIiApCiBpaWkxMWkxICggTzAwTzBvT08wME8wMCAsIGlpMWlpMTFJSUlpaUkgKQogaWYgNyAtIDc6IGlpaWlJaTExaSAtIE8wICogaWlpMUkxSSAtIElpSWkxMWlJSWkxSWkgLSBpMTFpCmVsaWYgb28wTzBvMDAgPT0gMTAgOgogT08gKCAiZ2V0Q29tbXVuaXR5U291cmNlcyIgKQogSTExT29Pb09PT29PTyAoICkKIGlmIDQxIC0gNDE6IG9Pb29Pb08wT28wTyAtIEkxaTFpSTFpICUgaTExaSAuIEkxaTFpSTFpIC0gaWlpMUkxSQplbGlmIG9vME8wbzAwID09IDExIDoKIE9PICggImFkZFNvdXJjZSIgKQogTzBvbzBPTzBvT09PbyAoIGlpMWlpMTFJSUlpaUkgKQogaWYgNDUgLSA0NTogTzAwb09vT29PMG8wTyAtIElpMUkKZWxpZiBvbzBPMG8wMCA9PSAxMiA6CiBPTyAoICJzZXRSZXNvbHZlZFVybCIgKQogaWYgbm90IGlpMWlpMTFJSUlpaUkgLiBzdGFydHN3aXRoICggInBsdWdpbjovL3BsdWdpbiIgKSBvciBub3QgYW55ICggeCBpbiBpaTFpaTExSUlJaWlJIGZvciB4IGluIE9vICkgOgogIG8wTzBPT09Pb09PMCA9IHhibWNndWkgLiBMaXN0SXRlbSAoIHBhdGggPSBpaTFpaTExSUlJaWlJICkKICB4Ym1jcGx1Z2luIC4gc2V0UmVzb2x2ZWRVcmwgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCBUcnVlICwgbzBPME9PT09vT08wICkKIGVsc2UgOgogIHByaW50ICdOb3Qgc2V0dGluZyBzZXRSZXNvbHZlZFVybCcKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAnWEJNQy5SdW5QbHVnaW4oJyArIGlpMWlpMTFJSUlpaUkgKyAnKScgKQogIGlmIDcwIC0gNzA6IE8wTyAlIG9Pb29Pb08wT28wTyAvIG9Pb29Pb08wT28wTyAuIGlpaTFJMUkgJSBJSSAuIGkxMWkKICBpZiAxMCAtIDEwOiBPMDBvT29Pb08wbzBPIC0gaTExaUlpaUlpaSAuIG8wT09PICUgaTFJSWkKZWxpZiBvbzBPMG8wMCA9PSAxMyA6CiBPTyAoICJwbGF5X3BsYXlsaXN0IiApCiBJMTFvMDAwMG8wT28gKCBPMDBPMG9PTzAwTzAwICwgTzBPME8wT28gKQogaWYgNzggLSA3ODogaUlpaTFJMTFJMUlJMSAqIElJaUkxSTExaTExIC4gSUlpSTFJMTFpMTEgLSBJaTFJIC4gaUlpaTFJMTFJMUlJMQplbGlmIG9vME8wbzAwID09IDE0IDoKIE9PICggImdldF94bWxfZGF0YWJhc2UiICkKIGlJaWkgKCBpaTFpaTExSUlJaWlJICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiAzMCAtIDMwOiBJSSArIElJICUgT28wb29PMG9vMG9PIC0gSWlJaTExaUlJaTFJaSAtIG8wT09PCmVsaWYgb28wTzBvMDAgPT0gMTUgOgogT08gKCAiYnJvd3NlX3htbF9kYXRhYmFzZSIgKQogaUlpaSAoIGlpMWlpMTFJSUlpaUkgLCBUcnVlICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiAzNiAtIDM2OiBpaWkxSTFJICUgSWkxSQplbGlmIG9vME8wbzAwID09IDE2IDoKIE9PICggImJyb3dzZV9jb21tdW5pdHkiICkKIEkxMU9vT29PT09vT08gKCBUcnVlICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiA3MiAtIDcyOiBvT29vT29PME9vME8gLyBPMG9vME9PMCAtIE8wICsgaWlpMUkxSQplbGlmIG9vME8wbzAwID09IDE3IDoKIE9PICggImdldFJlZ2V4UGFyc2VkIiApCiBpaTFpaTExSUlJaWlJICwgSTFJMWkgPSBJMTFpMUlJICggTzAwbzBPTzAgLCBpaTFpaTExSUlJaWlJICkKIGlmIGlpMWlpMTFJSUlpaUkgOgogIG8wT08wMG9vME8gKCBpaTFpaTExSUlJaWlJICwgTzAwTzBvT08wME8wMCAsIE9PT08gLCBJMUkxaSApCiBlbHNlIDoKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oRmFsY29uIE1vdmllcyxGYWlsZWQgdG8gZXh0cmFjdCByZWdleC4gLSAiICsgInRoaXMiICsgIiw0MDAwLCIgKyBJMUlpSWlpSUlJICsgIikiICkKZWxpZiBvbzBPMG8wMCA9PSAxOCA6CiBPTyAoICJ5b3V0dWJlZGwiICkKIHRyeSA6CiAgaW1wb3J0IHlvdXR1YmVkbAogZXhjZXB0IEV4Y2VwdGlvbiA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKEZhbGNvbiBNb3ZpZXMsUGxlYXNlIFtDT0xPUiBibHVlXWluc3RhbGwgWW91dHViZS1kbFsvQ09MT1JdIG1vZHVsZSAsMTAwMDAsIiAiKSIgKQogb09PME8wMG9PME9vbyA9IHlvdXR1YmVkbCAuIHNpbmdsZV9ZRCAoIGlpMWlpMTFJSUlpaUkgKQogbzBPTzAwb28wTyAoIG9PTzBPMDBvTzBPb28gLCBPMDBPMG9PTzAwTzAwICwgT09PTyApCmVsaWYgb28wTzBvMDAgPT0gMTkgOgogT08gKCAiR2VuZXNpc2NvbW1vbnJlc29sdmVycyIgKQogbzBPTzAwb28wTyAoIE9vMG8wME9PMDAwMCAoIGlpMWlpMTFJSUlpaUkgKSAsIE8wME8wb09PMDBPMDAgLCBPT09PICwgVHJ1ZSApCiBpZiA4MyAtIDgzOiBPMAplbGlmIG9vME8wbzAwID09IDIxIDoKIE9PICggImRvd25sb2FkIGN1cnJlbnQgZmlsZSB1c2luZyB5b3V0dWJlLWRsIHNlcnZpY2UiICkKIG8wT08wMGlJaTExaSAoICcnICwgTzAwTzBvT08wME8wMCAsICd2aWRlbycgKQplbGlmIG9vME8wbzAwID09IDIzIDoKIE9PICggImdldCBpbmZvIHRoZW4gZG93bmxvYWQiICkKIG8wT08wMGlJaTExaSAoIGlpMWlpMTFJSUlpaUkgLCBPMDBPMG9PTzAwTzAwICwgJ3ZpZGVvJyApCmVsaWYgb28wTzBvMDAgPT0gMjQgOgogT08gKCAiQXVkaW8gb25seSB5b3V0dWJlIGRvd25sb2FkIiApCiBvME9PMDBpSWkxMWkgKCBpaTFpaTExSUlJaWlJICwgTzAwTzBvT08wME8wMCAsICdhdWRpbycgKQplbGlmIG9vME8wbzAwID09IDI1IDoKIE9PICggIllvdVR1YmUvRE1vdGlvbiIgKQogTzAwb08gKCBpaTFpaTExSUlJaWlJICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCmVsaWYgb28wTzBvMDAgPT0gMjYgOgogT08gKCAiWW91VHViZS9ETW90aW9uIEZyb20gU2VhcmNoIEhpc3RvcnkiICkKIE8wME8wb09PMDBPMDAgPSBPMDBPMG9PTzAwTzAwIC4gc3BsaXQgKCAnOicgKQogTzAwb08gKCBpaTFpaTExSUlJaWlJICwgc2VhcmNoX3Rlcm0gPSBPMDBPMG9PTzAwTzAwIFsgMSBdICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCmVsaWYgb28wTzBvMDAgPT0gMjcgOgogT08gKCAiVXNpbmcgSU1EQiBpZCB0byBwbGF5IGluIFB1bHNhciIgKQogb09PT09PbyA9IE8wMG9PICggaWkxaWkxMUlJSWlpSSApCiB4Ym1jIC4gUGxheWVyICggKSAuIHBsYXkgKCBvT09PT09vICkKZWxpZiBvbzBPMG8wMCA9PSAzMCA6CiBPb2lJSWlJaTEgKCBPMDBPMG9PTzAwTzAwICwgaWkxaWkxMUlJSWlpSSAsIE9PT08gLCBvT08wMG9PTyApCiBpZiA1MCAtIDUwOiBJMWkxaUkxaSArIElJICsgTzBvbzBPTzAKZWxpZiBvbzBPMG8wMCA9PSA0MCA6CiBTZWFyY2hDaGFubmVscyAoICkKIElpMTFJMSAoICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiAxNSAtIDE1OiBpaWkxSTFJCmVsaWYgb28wTzBvMDAgPT0gNDEgOgogSWkxaUlpSUkxaWkxICggaWkxaWkxMUlJSWlpSSApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgMTMgLSAxMzogaUlpaTFJMTFJMUlJMSAqIG9vMDAwIC8gSTFpMWlJMWkgJSBJSSArIGlpaWlJaTExaQplbGlmIG9vME8wbzAwID09IDUzIDoKIE9PICggIlJlcXVlc3RpbmcgSlNPTi1SUEMgSXRlbXMiICkKIEkxaWlJaTFJaTFJSWlJICggaWkxaWkxMUlJSWlpSSApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQojIGRkNjc4ZmFhZTlhYzE2N2JjODNhYmY3OGU1Y2IyZjNmMDY4OGQzYTMK]')